{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to MkDocs","text":""},{"location":"#welcome-to-mkdocs","title":"Welcome to MkDocs","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"1024-Liberty-Getting-Started/","title":"1024 Liberty Getting Started","text":""},{"location":"1024-Liberty-Getting-Started/#lab-1024","title":"Lab 1024:","text":""},{"location":"1024-Liberty-Getting-Started/#liberty-getting-started","title":"Liberty Getting Started","text":"<p>WebSphere Liberty (Liberty) is a lightweight open framework for building fast and efficient cloud-native Java microservices. Build cloud-native apps and microservices while running only what you need. It is the most flexible server runtime available to Java developers in this solar system.</p> <p>Liberty is built on the open source Open Liberty codebase. Open Liberty is designed with both developers and application business owners in mind.</p> <ul> <li>It delivers the latest Java APIs and integrates with the most popular Developer and Build tools.</li> <li>It has built-in innovation like zero-migration to reduce application runtime costs and delivery effort.</li> <li>Liberty is downstream of Open Liberty so anything that works on Open Liberty works on Liberty.</li> <li>Same Monthly Continuous Delivery Release Cycle as Liberty</li> <li>You do not need to switch to Liberty for commercial support</li> </ul> <p>Liberty Tools is a set of intuitive developer tools for the Eclipse IDE, Visual Studio Code, and IntelliJ IDEA development environments. These tools adopt a Maven/Gradle-centric approach and enable fast, iterative cloud-native Java application development through Liberty dev mode. Liberty Tools also provides helpful, time-saving features such as code completion, hover descriptions, and configuration diagnostics for Jakarta EE APIs, MicroProfile APIs, and Liberty configuration. For more information, check out the Liberty Tools overview.</p> <p>In the lab, there will be different roles involved with perform different tasks using different tools. You will perform all the different roles during the lab. </p> <ul> <li>You will start as an application developer and use Liberty starter and the code assistant to develop a simple web application. But don't worry, you do not have to be a developer to do this.</li> <li>As Liberty configuration opertor, you will use the configuration assistant and concepts like includes and variables to create a portable configuration. </li> <li>As Liberty administrator, you will install Liberty from a kernel image, add missing features, configure logging, security and so on, will use the Liberty REST APIs to review the configuration and use Liberty Admin Center for monitoring.</li> </ul> <p>These are the objectives in the lab:</p> <ul> <li> <p>As an application developer:</p> <ul> <li>Tasks: <ul> <li>Develops the application.</li> <li>Creates a basic Liberty configuration for the application</li> </ul> </li> <li>Tools:<ul> <li>Apache Maven <ul> <li>to build the project </li> <li>to download the Open Liberty server runtime from the maven repository</li> </ul> </li> <li>Liberty Maven Plugin for inner-loop development via Liberty Dev Mode<ul> <li>to build the application war and deploy it to Liberty</li> </ul> </li> <li>Visual Studio Code <ul> <li>as IDE to build the application code</li> </ul> </li> <li>Liberty Tools plugin for Visual Studio Code<ul> <li>provides a Liberty dashboard with Dev Mode integration in the IDE</li> <li>provides Jakarta EE and MicroProfile code assistance</li> <li>provides Liberty configuration assistance</li> </ul> </li> <li>Liberty Starter Project <ul> <li>to generate a maven project for Liberty </li> </ul> </li> <li>Open Liberty / WebSphere Liberty<ul> <li>as runtime for the Java application that will be developed</li> <li>to create a server package</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>As a Liberty configuration operator:</p> <ul> <li>Tasks: <ul> <li>Extract Liberty package from command line and implement Liberty dynamic updates</li> <li>Develop portable Liberty configuration snippets using includes, variables and much more.</li> </ul> </li> <li>Tools:<ul> <li>Visual Studio Code with Liberty Tools plugin as editor with configuration assistance</li> </ul> </li> </ul> </li> <li> <p>As a Liberty administrator:</p> <ul> <li>Tasks: <ul> <li>Installs Liberty</li> <li>Configures Liberty for the target application using Liberty configuration snippets</li> <li>Applies security to harden the Liberty configuration</li> <li>Configure logging using configDropins</li> <li>Review the configuration using LIberty REST APIs</li> <li>Monitor Liberty using the Admin Center</li> </ul> </li> <li>Tools:<ul> <li>Liberty server command to create a Liberty instance and start, stop or dump it</li> <li>Liberty installUtility to install missing features</li> <li>Liberty securityUtility to create a keystore or encode a password</li> <li>Liberty REST APIs and Admin Center</li> </ul> </li> </ul> </li> </ul>"},{"location":"1024-Liberty-Getting-Started/#access-the-lab-environment","title":"Access the lab environment","text":"<p>Access the lab environment from your web browser.</p> <p>The lab environment page is displayed, the lab environment contains one (1) Linux VMs, with the Graphical User Interface (GUI) for you to access and  work in this lab.</p> <p></p> <ol> <li> <p>Click Red Hat icon to access it.</p> <p> </p> </li> <li> <p>Click techzone user to log in.</p> <p></p> </li> <li> <p>Enter the password as: IBMDm0s! and press Enter.</p> <p></p> <p>Note:\u00a0That is a numeric zero in IBMDem0s!</p> <p>The lab VM GUI is displayed.</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#tips-for-working-in-the-lab-environment","title":"Tips for working in the lab environment:","text":"<ol> <li> <p>You can use the VM Desktop tools to fit to window or resize the     window.</p> <p></p> </li> <li> <p>You can copy text from the lab guide into the lab     environment using the VM Desktop Send Text tool.</p> <p></p> <p>a. Copy the text from the lab guide that you want to paste into the lab environment.</p> <p>b. Open a terminal window, or a text editor or a web browser in the VM Desktop where you want to copy the text to.</p> <p>c. Click the Send Text icon in the VM Desktop tool bar, paste the text into its window, then again click Send Text to send the text to an open command shell and close its window.</p> <p></p> <p>The text is now copied to the terminal window, or the text editor or the web browser you opened in the previous step.</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#execute-lab-tasks","title":"Execute Lab Tasks","text":""},{"location":"1024-Liberty-Getting-Started/#1-create-the-required-working-directories","title":"1 Create the required working directories","text":"<ol> <li> <p>Double-click the terminal icon to open a terminal window.</p> <p> </p> </li> <li> <p>Create a Student directory and some sub-directories used in the lab with commands:</p> <pre><code>mkdir ~/Student\nmkdir ~/Student/dev\nmkdir ~/Student/ops\nmkdir ~/Student/assets\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#2-develop-a-liberty-web-application","title":"2 Develop a Liberty web application","text":"<p>The objective of this section is to develop a simple web application for Liberty. You will use a Liberty starter application to now start from scratch and use Visual Studio Code and Liberty Tools to build the application.</p>"},{"location":"1024-Liberty-Getting-Started/#21-create-a-starter-app-project","title":"2.1 Create a starter app project.","text":"<p>In this scenario, you want to create a Jakarta EE 10 Web application with the name simpleweb and will use maven to build it. The fastest way to get started is to use an Open Liberty starter application which generates a project with the maven configuration as well as a basic Liberty setup.</p> <p></p> <p>The Open Liberty starter gives you a simple, quick way to get the necessary files to start building an application on Open Liberty. There is no need to search how to find out what to add to your maven or gradle build files. A simple RestApplication.java file is generated for you to start creating a REST based application. A server.xml configuration file is provided with the necessary features for the MicroProfile and Jakarta EE versions that you previously selected. </p> <ol> <li> <p>Click the Activties button.</p> <p></p> </li> <li> <p>Open a browser window by double-clicking on Activities and then select the Firefox browser icon.</p> <p></p> <p>If you get a pop-up that Authentication is required, enter IBMDem0s!. </p> <p></p> </li> <li> <p>Type the URL as: https://openliberty.io/start/ and press Enter.  </p> </li> <li> <p>Change the artifact name to simpleweb, change the Java level to 17 and leave the rest as is, then click Generate project </p> <p></p> <p>The project zip file is saved under the Downloads directory.</p> <p></p> </li> <li> <p>You will see a pop-up like the one below. Click Got it!  to close the window.</p> <p></p> </li> <li> <p>Extract the file.</p> <p>a. Click Activities and switch to the terminal window. </p> <p>b. Move the starter project to the developer directory and extract it with commands:</p> <pre><code>mv ~/Downloads/simpleweb.zip ~/Student/dev\nunzip ~/Student/dev/simpleweb.zip -d ~/Student/dev/simpleweb\n</code></pre> <p></p> <p>The project has been created under the ~/Student/dev/simpleweb directory.</p> <p>c. List the content via following command:</p> <pre><code>ls -lrt ~/Student/dev/simpleweb\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#22-inspect-the-starter-project-using-open-visual-studio-code","title":"2.2 Inspect the starter project using Open Visual Studio Code","text":"<p>Now you will use Visual Studio Code to see what has been generated as part of the starter project.</p> <ol> <li> <p>From the terminal window, start Visual Studio Code.</p> <pre><code>cd ~/Student/dev/simpleweb/\ncode .\n</code></pre> <p></p> <p>Visual Studio Code UI will be opened.</p> </li> <li> <p>Click on Yes, I trust the authors to continue.</p> <p></p> <p>If you see during the lab one of the pop-ups below or any other pop-up asking to install something, close the pop-up without installation by clicking the X.  </p> </li> <li> <p>Investigate into the generated project:</p> <p>In Visual Studio Code, take a look at the Explorer section to see the content of the project. You can find a src and a target folder, a Dockerfile and a maven build file (pom.xml).</p> <p></p> </li> <li> <p>Take a look at the generated Maven configuration </p> <p>a. Click pom.xml to see the maven pom.</p> <p>In the build section, you can find the configuration of the liberty-maven-plugin. </p> </li> </ol> <p>Don\u2019t worry if the version of the plugin has changed to 3.10.2 or later. </p> <pre><code>b. Finally close the **pom.xml** file.\n</code></pre> <ol> <li> <p>Review the generated Liberty configuration</p> <p>a.  Open src &gt;  main &gt;liberty &gt; config &gt; server.xml to see the Liberty configuration.</p> <p></p> <p>As you can see, the features for jakartaee-10 and MicroProfile-6.1 have been configured.</p> <p></p> <p>b. Scroll down and you can see that the http endpoint and the web application have been configured.</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#23-adjust-the-liberty-configuration","title":"2.3 Adjust the Liberty configuration","text":"<p>The simpleweb application will not require the full Jakarta EE 10 standard but only the servlet specification.</p> <p>As best practice to optimize the footprint of the application runtime regarding memory and disk space and limit the number of potential vulnerabilities, you should define only the features that are required by the application. In this case, you are ging to replace the jakartaee-10 feature with an appropriate servlet feature. </p> <ol> <li> <p>In the Visual Studio Code editor for server.xml, scroll up to the feature section.</p> </li> <li> <p>Delete the lines \\jakartaee-10.0\\ and \\&lt; feature&gt;MicroProfile-6.1\\.     Your featureManager section should now look like this:</p> <p></p> </li> <li> <p>Now you will use the Liberty configuration assistant to define the servlet feature. Place your cursor at the beginning of an empty line in the featureManager section. Then press the CTRL key and press SPACE to activate the configuration assistant. You should see something like:</p> <p></p> </li> </ol> <p>You might have to click on the arrow right to feature to get the description. </p> <ol> <li> <p>Select feature and the feature element gets added.</p> <p></p> </li> <li> <p>Use again CTRL+SPACE to get the list of available features.</p> <p></p> </li> <li> <p>Type the word servlet to see the available servlet features.</p> <p></p> </li> <li> <p>Use the arrow-down key to get the description for servlet-6.0.</p> <p></p> </li> <li> <p>Select the feature servlet-6.0 and your configuration should now look like this:</p> <p></p> </li> <li> <p>For this part of the lab, you do not need to define a keystore or the basic registry, so you need to delete the generated entries.     Your configuration should now look like this:</p> <p></p> </li> <li> <p>Save the configuration by using CTRL+S.</p> </li> <li> <p>Close the server.xml file.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#24-using-liberty-dev-mode","title":"2.4  Using Liberty Dev Mode","text":"<p>Liberty development mode, or dev mode, allows you to develop applications with any text editor or IDE by providing hot reload and deployment, on demand testing, and debugger support. Liberty Dev Mode is enabled through Maven and Gradle projects.</p> <p>Your code is automatically compiled and deployed to your running server, making it easy to iterate on your changes.</p> <p>You can run tests on demand or even automatically so that you can get immediate feedback on your changes. You can also attach a debugger at any time to debug your running application.</p> <p></p> <p>You can use the capabilities of Liberty dev mode inside and outside of an IDE. This provides you the flexibility of choice. In a terminal window, you would use Liberty in dev mode with maven using the command mvn liberty:dev or mvn liberty:devc if you want to develop in a container. </p> <p>In the lab environment, the Liberty tools plugin has been installed into Visual Studio Code. Therefore you will use the integrated Liberty dashboard instead.\u2003</p> <ol> <li> <p>In Visual Studio Code, expand the Liberty Dashboard.</p> <p></p> </li> <li> <p>Right-click on simpleweb and then start to start the server in dev mode.</p> <p></p> </li> <li> <p>A terminal opens within Visual Studio Code and you can see that the start of the build process gets triggered.</p> <p></p> </li> <li> <p>The Liberty plugin as well as the Liberty server artifacts get downloaded, then the server is ready for testing.</p> <p></p> </li> <li> <p>Switch to the browser window and enter the URL localhost:9080. You should see something like this:</p> <p></p> </li> </ol> <p>If you get a pop-up with Authentication required, enter the password IBMDem0s! and click on Unlock. </p> <pre><code>Now, let\u2019s edit the **simpleweb** application.\n</code></pre>"},{"location":"1024-Liberty-Getting-Started/#25-edit-the-simpleweb-application","title":"2.5 Edit the simpleweb application","text":"<p>Now you will edit the simpleweb application which only consists of a servlet. Thanks to Liberty code assistant, you don't have to write the code on your own. </p> <ol> <li> <p>Switch to Visual Studio Code.</p> </li> <li> <p>In Visual Studio Code, expand the path to src/main/java/com/demo/rest, then right-click on demo and select New File.</p> <p></p> </li> <li> <p>Enter the name helloWorldServlet.java and press ENTER.</p> <p></p> </li> <li> <p>The file src/main/java/com/demo/helloWorldServlet.java is generated and opens in an editor.</p> <p></p> </li> <li> <p>Remove all code from the file. Then enter servlet.</p> <p></p> <p>The code assistant window is shown.</p> </li> </ol> <p>If you do not see the code assistant window, enter **CTRL+Space** to activate it. </p> <ol> <li> <p>The code assistant offers some servlet methods for Jakarta EE. Select servlet_doget, and the required starter code gets generated.     As you can see, the fields that should be changed are highlighted.</p> <p></p> </li> <li> <p>Change the servletName to helloWorldServlet and the urlPatters to /helloWorld. The code should now look like this:</p> <p></p> </li> <li> <p>Press CTRL+S to save the code change. Take a look at the terminal output. As Liberty has been started in DevMode, the code changes are picked up automatically, the source gets compiled and Liberty gets updated.</p> <p></p> </li> <li> <p>Switch to the browser and open the URL localhost:9080/simpleweb/helloWorld. You should see the output of the created servlet.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and change the source code of the servlet response text to something like this: helloWorld - Example HTTP GET request for HTTPServlet</p> <p></p> </li> <li> <p>Save the changes and reload the page in the browser. The output should be updated.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and close the editor for the file helloWorldServlet.java.</p> </li> </ol> <p>Final step as a developer is to export the developed application as WAR file so that it can be used in the next part of the lab.</p>"},{"location":"1024-Liberty-Getting-Started/#26-export-the-developed-application-as-war-file","title":"2.6 Export the developed application as WAR file","text":"<p>Export the developed application so that it can be deployed to Liberty by the operations team.</p> <p>The generated maven pom by default does not generate a WAR file as it uses a \u201clooseApplication\u201d approach to optimize the inner-loop development experience. (For more details, see https://github.com/OpenLiberty/ci.maven). To change the default build behaviour, you need to adjust the pom.xml file and configure the Liberty maven plugin to generate a WAR by setting the property: \\false\\.</p> <ol> <li> <p>Switch back to Visual Studio Code.</p> </li> <li> <p>In the Liberty dashboard, right-click on the simpleweb application and select Stop (or use CTRL+C on the terminal window instead).</p> <p></p> </li> <li> <p>Verify in the terminal that Liberty has been stopped.</p> <p></p> </li> <li> <p>In Visual Studio Code, open the file pom.xml and add to the Liberty plugin configuration the lines:</p> <pre><code>&lt;configuration&gt;\n&lt;looseApplication&gt;false&lt;/looseApplication&gt;\n&lt;/configuration&gt;\n</code></pre> <p></p> </li> <li> <p>If you would start Liberty now again in Dev Mode, the property looseApplication would be ignored and you would see a warning like this:   </p> <p></p> <p>Therefore, you must start Liberty in run mode to generate the WAR file. This can be done by entering in the terminal window the command:</p> <pre><code>mvn liberty:run\n</code></pre> <p></p> <p>As you can see in the screenshot above, maven has built the file simpleweb.war and stored it at the ~/Student/dev/simpleweb/target/ directory.</p> </li> <li> <p>Scroll down and you can see that it has been installed into the directory ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer/apps.</p> <p></p> </li> <li> <p>Feel free to test the application in the browser, then stop the Liberty instance by using CTRL+C.</p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#27-create-a-server-package","title":"2.7 Create a server package","text":"<p>For the next lab, you will need the WAR file as well as the server.xml which can be found in the created Liberty instance at:  ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer.</p> <p>More complex applications also depend on other files like utility jars, additional Liberty configuration files and JDBC drivers for example. </p> <p>So instead of copying the files one by one, you could create a server package that contains all files.</p> <p>What is a server package? A server package can contain only the user directory or the full application server.  </p> <p>The syntax of the server package command is: </p> <pre><code>server package server_name --archive=package_file_name.jar --include=all\n</code></pre> <p>With the option --include=all, the Liberty binaries as well as the usr directory get packaged.</p> <p>For more details and options, see https://www.ibm.com/docs/en/was-liberty/base?topic=line-packaging-liberty-server-from-command.</p> <ol> <li> <p>To create the server package, execute the following command:</p> <pre><code>~/Student/dev/simpleweb/target/liberty/wlp/bin/server package defaultServer --archive=simpleweb-serverpackage.jar --include=all\n</code></pre> <p></p> </li> <li> <p>To hand over the server package to the ops team, use the following commands: </p> <pre><code>cp ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer/simpleweb-serverpackage.jar ~/Student/assets\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#28-recap","title":"2.8 Recap","text":"<p>Congratulations, you have finished the application development part.</p> <p>Let\u2019s recap what you did so far. </p> <p>You acted as a developer and used Visual Studio Code and the Liberty Tools for these tasks:</p> <ul> <li>generated a Liberty starter project including the required maven and Liberty configuration. </li> <li>used the Liberty Tools configuration assistant to adjust the Liberty configuration.</li> <li>used Liberty Dev Mode for inner-loop development.</li> <li>updated the simpleweb application using the Jakarta EE code assistant. </li> <li>exported the web application as WAR file.</li> <li>created a server package including application and Liberty binaries.</li> </ul> <p>Useful links: https://github.com/OpenLiberty/liberty-tools-vscode/blob/HEAD/docs/user-guide.md </p>"},{"location":"1024-Liberty-Getting-Started/#3-liberty-operations","title":"3. Liberty operations","text":"<p>Now you will work with Liberty from an operational point of view. Development has handed over a Liberty server package to you. The server package contains all necessary configuration to run the application called simpleweb. The provided server package is typically not production-ready, as it is likely not portable between stages and does not fulfill the requirements regarding security and so on. </p> <p>In this part of the lab, you will explore how to create configuration snippets and how to administer Liberty from the command line. But first you will explore the server package and get an understanding about dynamic updates.</p>"},{"location":"1024-Liberty-Getting-Started/#31-explore-the-server-package","title":"3.1 Explore the server package","text":"<p>You will now explore the Liberty server package to get a better understanding how to use it, in addition you will use it to learn more about Liberty administration from the command line and Liberty dynamic updates.</p> <p>In this section, you will use the server run command instead of the server start command. This will allow you to see the logs immediately instead of having to use a tail command. It will also allow you to stop the Liberty server via CTRL+C </p>"},{"location":"1024-Liberty-Getting-Started/#311-extract-liberty-package-from-command-line","title":"3.1.1 Extract Liberty package from command line","text":"<ol> <li> <p>Extract the Liberty server package and try to run it. When asked, enter test as target directory.</p> <pre><code>cd ~/Student/ops/\njava -jar ~/Student/assets/simpleweb-serverpackage.jar\n</code></pre> <p></p> <p>The directory test/wlp got created and contains the configured Liberty instance including application. </p> </li> <li> <p>Run the following command to get the Liberty version:</p> <pre><code>test/wlp/bin/productInfo version\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the Liberty features that have been installed:</p> <pre><code>test/wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, the server package provided by the developer only contains the servlet-6.0 features which is the only feature required by the application. </p> </li> <li> <p>Run the following command to get the list of defined Liberty application servers:</p> <pre><code>test/wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Start the Liberty server instance by running the command:</p> <pre><code>test/wlp/bin/server start defaultServer\n</code></pre> <p></p> <p>This runs the server in the background and the output is written to files in the test/wlp/bin/servers/defaultServer/logs directory.</p> <p>To start the server in the foreground (so the console messages are displayed in the command window) you would use the command </p> <pre><code>test/wlp/bin/server run defaultServer.\n</code></pre> <p>You will use this command later in the lab.</p> </li> <li> <p>View the Liberty server\u2019s messages.log file to see the server startup messages via the command:</p> <pre><code>cat test/wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> <p>At the beginning of the log, you can see that Open Liberty version is used. The server is started when the message \u201cThe defaultServer server is ready to run a smarter planet\u201d is displayed in the messages.log file.</p> </li> <li> <p>Test that the application is accessible via URL http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#312-liberty-dynamic-updates","title":"3.1.2 Liberty dynamic updates","text":"<p>Let\u2019s do a short excurse about Liberty dynamic updates. You will use Visual Studio Code to perform some minor configuration changes. For this part of the lab, you could instead also use a simple text editor like vi or gedit instead. </p> <ol> <li> <p>Open Visual Studio Code.</p> <pre><code>cd ~/Student/ops/test\ncode .\n</code></pre> <p></p> </li> <li> <p>Visual Studio Code opens. Click on Yes, if you are asked to trust the author.</p> <p></p> </li> <li> <p>In Visual Studio Code, open a terminal window</p> <p></p> </li> <li> <p>In the terminal, use the tail command to display the Liberty message log.</p> <pre><code>tail -f wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> </li> <li> <p>In Visual Studio Code, navigate to wlp &gt; usr &gt; servers &gt; defaultServer and open the file server.xml.</p> <p></p> </li> <li> <p>In the server.xml file, change the httpPort setting from port 9080 to port 9081.</p> <p></p> <p>You can see in the terminal that the change is picked up and Liberty listens now on port 9081.</p> <p></p> </li> <li> <p>Change the webApplication contextRoot setting from \u201c/simpleweb\u201d to \u201c/mysimpleweb\u201d.</p> <p></p> <p>You can see in the log that the change is picked up.</p> <p></p> </li> <li> <p>Switch to the browser and access the application via URL localhost:9081/mysimpleweb/helloWorld.</p> <p></p> <p>As you have seen, you can change the Liberty configuration without having to restart the server.  You will explore this further later in the lab when you dynamically update the logging for example. Now let's stop the server.</p> </li> <li> <p>In the terminal, press CTRL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty instance by executing in the terminal the command:</p> <pre><code>wlp/bin/server stop defaultServer\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#32-create-liberty-configuration-snippets","title":"3.2 Create Liberty configuration snippets","text":"<p>There are different ways to create a Liberty server configuration and there are often different roles involved to get the final configuration for production. The application specific configuration, for example, is typically created by the application developer while security related configuration is typically done by operations. Operations is typically also responsible to make the configuration portable across stages, configure logging and so on. </p> <p>You could create Liberty configuration snippets by copying over the related snippets from the product documentation and adjust them in a normal text editor. In this part of the lab, you will see that the Liberty tools plugin in Visual Studio Code can help you to speed up the create of configuration snippets as it provides configuration assistance including documentation. Let\u2019s get started.</p> <p>You will now modify the file server.xml which has been provided as part of the server package to make it more portable and re-usable.</p> <ol> <li> <p>In Visual Studio Code, open the file server.xml if you closed it previously.</p> <p></p> </li> <li> <p>Take a look at the httpEndpoint element.</p> <p></p> <p>As mentioned in the comment, the httpEndpoint is by default not accessible from a remote client.  This is good from security point of view and works fine if the client is local to the server. But if you, for example, use a remote load balancer or a remote HTTP server, this will not work. So there will be likely situations where you want to allow access to the application from a remote client and you must add a host attribute. You will use the Liberty Tools configuration assistant to do this.</p> </li> <li> <p>Place the cursor at the end of the line &lt;httpEndpoint id=\"defaultHttpEndpoint\" and press ENTER to add another line. </p> <p>In the new line, press CTRL+SPACE to see the available attributes. </p> <p>Use the arrow-down key and navigate to the host attribute to see the description of the attribute.</p> <p></p> </li> <li> <p>Select host and your configuration should look like this:</p> <p></p> <p>As you can see, the attribute host defaults to localhost.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#321-use-variables-for-portability","title":"3.2.1 Use variables for portability","text":"<p>To make the configuration portable, you will replace the fixed values for ports and host with Liberty variables. Liberty variables can be defined with a default value and overridden from inside or outside Liberty. To show the concept, you will adjust the httpEndpoint settings.</p> <p>You could use the configuration snippet below to replace the existing httpEndpoint configuration with a portable configuration. </p> <pre><code>&lt;httpEndpoint id=\"defaultHttpEndpoint\"\n              host=\"${httpEndpoint_host}\"\n              httpPort=\"${httpEndpoint_port}\"\n              httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n&lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n&lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n&lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n</code></pre> <p>Instead you will use the Liberty configuration assistant to get an understanding how you could create such a configuration snippet.</p> <ol> <li> <p>Place the cursor in an empty line under the httpEndpoint section, then enter var and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select variable, then enter as name \"httpEndpoint_port\".</p> <p></p> </li> <li> <p>Place the cursor after name=\"httpEndpoint_port\", enter a SPACE and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select defaultValue and enter as value 9080.</p> <p> </p> </li> <li> <p>Use copy and paste to create two additional variables: </p> <ul> <li>one with the name \"httpEndpoint_secure_port\" and the default value \"9443\"</li> <li>the other one with the name \"httpEndpoint_host\" and the value \"*\".</li> </ul> <p>Your configuration should now look like this:</p> <p></p> </li> <li> <p>Switch to the httpEndpoint section, remove for the attribute host the value \"localhost\", enter ${ht and press CTRL+SPACE.</p> <p></p> <p>As you can see, the variable names are offered. </p> </li> <li> <p>Select \"httpEndpoint_host\", then enter \"}\". Your configuration should look like this:</p> <p></p> </li> <li> <p>Do the same kind of change for the attributes httpPort and httpsPort. </p> <p>Your final httpEndpoint configuration should now look like this:</p> <p></p> </li> <li> <p>Save your changes.</p> <p>Your server.xml file should now look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n&lt;!-- Enable features --&gt;\n&lt;featureManager&gt;\n    &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n&lt;/featureManager&gt;\n\n&lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n&lt;httpEndpoint id=\"defaultHttpEndpoint\"\n              host=\"${httpEndpoint_host}\"\n              httpPort=\"${httpEndpoint_port}\"\n              httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n&lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n&lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n&lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n&lt;!-- Automatically expand WAR files and EAR files --&gt;\n&lt;applicationManager autoExpand=\"true\"/&gt;\n\n&lt;!-- Configures the application on a specified context root --&gt;\n&lt;webApplication contextRoot=\"/mysimpleweb\" location=\"simpleweb.war\" /&gt;\n\n&lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n&lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n&lt;/server&gt;\n</code></pre> <p>Now let's test if the Liberty configuration is really portable.</p> </li> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, the Liberty server gets started and listens on port 9080.</p> </li> <li> <p>Press CTRL+C to stop the server. </p> </li> <li> <p>Set the httpEnpoint_port value in the Operating System environment variable and start the Liberty server again.</p> <pre><code>export httpEndpoint_port=9081\nwlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, the Liberty server now listens on port 9081, which shows that you can now override from outside Liberty the default settings defined in the Liberty server.xml file. In a Kubernetes environment, you could for example use a config map to change configuration settings.</p> </li> <li> <p>Press CTRL+C to stop the server. Then unset the operating system variable by the following command:</p> <pre><code>unset httpEndpoint_port\n</code></pre> <p>This will restore the httpEnpoint_port value in the Operating System environment variable to 9080.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#322-use-includes-for-better-re-use-and-visibility","title":"3.2.2 Use includes for better re-use and visibility","text":"<p>If you configure a Liberty server with resources like datasources or JMS queues, user registry and more, your configureation file can get quite long and not easy to be read and maintained. Liberty allows to specify configuration resources to get included into the server configuration. This helps to keep control over the configuration, provides better reuse of the different configuration and allows to split the responsibility for the configuration between different teams. The developer for example could create the application specific configuration and operations the security configuration.</p> <p>You will now use includes to structure the server configuration.</p> <ol> <li> <p>In the terminal in Visual Studio Code, copy the existing server.xml file into a new file called application-config.xml.</p> <pre><code>cp wlp/usr/servers/defaultServer/server.xml wlp/usr/servers/defaultServer/application-config.xml\n</code></pre> <p></p> </li> <li> <p>Open the newly created file application-config.xml in Visual Studio Code.</p> <p></p> </li> <li> <p>Remove all configuration inside the server section other than the definition of the webApplication element.     Your application-config.xml should look like this:</p> <p></p> </li> <li> <p>Save the changes, then close the application-config.xml file.</p> </li> <li> <p>Switch to the server.xml file. Delete the webApplication element, then enter include and press CTRL+SPACE.</p> <p>The Liberty configuration assistant shows you the available elements.</p> <p></p> </li> <li> <p>Select include and the element gets generated. As value for location, enter \"application-config.xml\".</p> <p></p> </li> <li> <p>As the owner of the server.xml file, you might want to decide what happens if the file to be included does not exist or contains conflicting configuration settings. </p> <p>Go to the end of the include statement and press CTRL+SPACE. The available attributes for the include element are displayed.</p> <p></p> <p>As you can see, you could define the include file as optional, so Liberty would not throw an error if the include file is missing. </p> </li> <li> <p>Click on onConflict to see the available attributes for that options. </p> <p></p> <p>If you want to make sure, that settings in the server.xml cannot be overridden by included files, select IGNORE, otherwise use MERGE or REPLACE. </p> </li> <li> <p>Click on MERGE and your include statement should look like this:</p> <pre><code>&lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n</code></pre> <p></p> <p>You can configure multiple include files, for example one file for security-config.xml and another one for resource specific configuration settings like for databases or JMS. Now let's test if the include works.</p> </li> <li> <p>Save the server.xml file.</p> </li> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p>As you can see, the include has been found and processed, so that the application is started.</p> <p></p> <p>Keep the server running as we need it in the next section.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#323-enable-transport-security","title":"3.2.3    Enable transport security","text":"<p>Right now, you are not able to access Liberty via HTTPS. While the HTTPS port 9443 has been defined, SSL has not been enabled in Liberty. SSL can be enabled using the transport security feature. So the next step is to enable transport security and take a look at other related topics like keystores.</p> <ol> <li> <p>In the file server.xml, navigate the to featureManager section.</p> </li> <li> <p>Add the feature transportSecurity-1.0 to the featureManager section by add the line:</p> <pre><code>&lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n</code></pre> <p>Alternatively, you can use the configuration assistant to enable it.</p> <p></p> </li> <li> <p>Take a look at the logs and you can see that the feature is not available yet.</p> <p></p> <p>This is due to the fact that the Liberty server package generated by the developer only includes the required features (features that have been defined in the server configuration file). You will use the Liberty featureUtility tool to install the missing feature. The feature could be downloaded from a local repository if configured, in this case you will download it from a central maven repository.</p> </li> <li> <p>In the terminal window, stop the Liberty instance by pressing CTRL+C.</p> <p>Then execute the following command to install the missing feature from the maven repository:</p> <pre><code>wlp/bin/featureUtility installFeature transportSecurity-1.0\n</code></pre> <p></p> </li> <li> <p>Then start the Liberty instance again by running the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, Liberty created a certificate and placed it into the SSL key file \"wlp/usr/servers/defaultServer/resources/security/key.p12\". </p> </li> <li> <p>Liberty used the variable keystore_password to secure the keystore. As you did not define a value for the variable keystore_password, Liberty generated a password and stored it in the server.env file. In Visual Studio, open the server.env file to see the keystore password. Your password will likely look different as it has been generated randomly.</p> <p></p> <p>Close the server.env file.</p> </li> <li> <p>To make it more visible where the keystore password comes from, add the following definition to the server.xml file:</p> <pre><code>&lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n</code></pre> <p>The keyStore element also allows you to specify a different keystore location and much more.</p> <p></p> </li> <li> <p>Review your configuration in server.xml. It should look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n    &lt;!-- Enable features --&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n        &lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n    &lt;httpEndpoint id=\"defaultHttpEndpoint\"\n                host=\"${httpEndpoint_host}\"\n                httpPort=\"${httpEndpoint_port}\"\n                httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n    &lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n    &lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n    &lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n    &lt;!-- Automatically expand WAR files and EAR files --&gt;\n    &lt;applicationManager autoExpand=\"true\"/&gt;\n\n    &lt;!-- Configures the application on a specified context root --&gt;\n    &lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n\n    &lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n    &lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n    &lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n&lt;/server&gt;\n</code></pre> </li> <li> <p>Now let's see if the application is accessible via HTTPS. </p> <p>Switch to the browser and access Liberty via https://localhost:9443/mysimpleweb/helloWorld.</p> <p>You should get a security warning like this:</p> <p></p> </li> <li> <p>Click on Advanced, then scroll down and click on \"Accept the Risk and Continue\".</p> <p></p> </li> <li> <p>You should see the output of the web application.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and stop the running Liberty instance by entering CTRL+C in the terminal window. </p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#324-backup-the-generated-files","title":"3.2.4 Backup the generated files","text":"<p>You will re-use the generated configuration snippets and other assets in the next section of the lab. Therefore it is a good approach to create a snippet repository. Configuration snippets are typically hosted in a git repository or so, here you will use the folder ~/Student/assets. You will also use the asset directory to store the application WAR file.</p> <ol> <li> <p>Copy the generated configuration files as well as the application war file into the assets directory.</p> <pre><code>cp ~/Student/ops/test/wlp/usr/servers/defaultServer/server.* ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/application-config.xml ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/apps/simpleweb.war ~/Student/assets\n</code></pre> <p></p> </li> <li> <p>Verify that the assets directory contains the application WAR as well as the configuration files. It also contains the server package but this is no longer required.</p> <pre><code>ls ~/Student/assets\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#325-recap","title":"3.2.5 Recap","text":"<p>In this section of the lab, you got an impression how to create and use configuration snippets:</p> <ul> <li>used the Liberty Tools configuration assistant to create configuration snippets and to configure Liberty. </li> <li>used the Liberty featureUtility tool to install missing features.</li> <li>learned how to use variables to make the configuration more portable.</li> <li>learned how to use includes to split the configuration into multiple re-usable files.</li> <li>created a security configuration. </li> </ul> <p>Comments:</p> <ul> <li>Instead of using the Liberty Tools configuration assistant in Visual Studio Code, you could also use the product documentation and copy &amp; paste to create Liberty configuration snippets. </li> <li>You could also use the IBM migration tools to transform an existing configuration for WebSphere Traditional and other runtimes into a Liberty configuration.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/#4-liberty-administration","title":"4. Liberty Administration","text":"<p>Now let\u2019s switch to the Liberty Admistrator role and explor how to install and configure Liberty from an administrator point of view. </p> <p>A traditional administrator typically downloads the application server binaries from the IBM pages and uses a regular editor instead of an IDE like Visual Studio to configure Liberty. To download the latest version of WebSphere Liberty, the administrator can use the IBM support page: https://www.ibm.com/support/pages/recommended-updates-websphere-application-server.</p>"},{"location":"1024-Liberty-Getting-Started/#41-install-liberty-from-scratch","title":"4.1 Install Liberty from scratch","text":"<p>The best practice for Liberty installation is to create a minimal installation by using the Liberty kernel image and install only the required features on top of it. The latest WebSphere Liberty kernel image could be downloaded from the IBM support page. For simplicity, we will use the International License Agreement for Non-Warranted Programs (ILAN) package which is available as zip file at: https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip</p> <ol> <li> <p>Open a new terminal window.</p> </li> <li> <p>Create a directory to store the Liberty package. </p> <pre><code>mkdir ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Download and store the Liberty kernel image. </p> <pre><code>wget https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip -P ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Use ls command to see that the kernel image is less than 17 MB in size. The overall disk footprint will be larger depending on the required Liberty features.</p> <pre><code>ls -lrt ~/Student/ops/software/\n</code></pre> <p></p> </li> <li> <p>Create a directory for the integration environment. This will be used for the Liberty installation.</p> <pre><code>mkdir ~/Student/ops/int\ncd ~/Student/ops/int\n</code></pre> <p></p> </li> <li> <p>Use the unzip command to extract the image.</p> <pre><code>unzip ../software/wlp-kernel-24.0.0.1.zip\n</code></pre> <p></p> </li> </ol> <p>On the IBM support page, you can find next to the convenience packages like the Liberty kernel package also Liberty archives for Liberty Core, Liberty Base or Liberty ND. To install such an archive, you would use a command like:     \"java -jar ../wlp-base-all-24.0.0.1.jar --acceptLicense .\" </p> <ol> <li> <p>Get the Liberty version by running the following command:</p> <pre><code>wlp/bin/productInfo version\n</code></pre> <p></p> <p>As you can see, this is an ILAN package which can be used for evaluation as well as for production. </p> </li> <li> <p>Get the list of Liberty features that are part of the installation:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, no feature is included in the kernel image.</p> <p>Now that Liberty has been installed, the next step is to create a Liberty server instance.</p> </li> </ol> <p>As you have seen, the installation of Liberty is basically an unzip. If you  want to update Liberty later on, you can either apply a jar file or simply replace the binaries.</p>"},{"location":"1024-Liberty-Getting-Started/#42-introducing-liberty-environment-variable-configuration","title":"4.2  Introducing Liberty Environment Variable Configuration","text":"<p>You can customize the Liberty environment using certain specific variables to support the placement of product binaries and shared resources. The Liberty environment variables are specified using server.env file. You can use server.env file at the installation and server levels to specify environment variables such as JAVA_HOME, WLP_USER_DIR and WLP_OUTPUT_DIR. Here some of the Liberty specific variables can be used to customize the Liberty environment: (see also https://www.ibm.com/docs/en/was-liberty/nd?topic=liberty-customizing-environment) </p> <ul> <li>${wlp.install.dir} - This configuration variable has an inferred location. The installation directory is always set to the parent of the directory containing the launch script or the parent of the /lib directory containing the target jar files.</li> <li>JVM_ARGS - This environment variable can be used to specify a list of command-line options, such as system properties or -X parameters, that are passed to the JVM when the server starts. Any values that contain spaces must be enclosed in quotes.</li> <li>WLP_USER_DIR - This environment variable can be used to specify an alternative location for wlp.user.dir. This variable must be an absolute path. If this variable is specified, the runtime environment looks for shared resources and server definitions in the specified directory. WLP_USER_DIR can be specified only in the ${wlp.install.dir}/etc/server.env file because the purpose of this variable is to specify where the remaining configuration is located. After the remaining configuration is found and merged, no further configuration in a different location is expected, or supported</li> <li>WLP_OUTPUT_DIR - This environment variable can be used to specify an alternative location for server generated output such as logs, the workarea directory, and generated files. Files in the logs directory can include console.log, messages.log, and any generated FFDC files. Generated files can include server dumps that are created with the server dump or server javadump command. This variable must be an absolute path.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/#43-create-a-liberty-server-instance","title":"4.3 Create a Liberty server instance","text":"<p>The Liberty server command supports actions for starting, stopping, creating, packaging, and dumping a Liberty server. The server create command creates a new Liberty server with the name specified. Additional detail on the server command can be found here: **https://www.ibm.com/docs/en/was-liberty/base?topic=line-server-command-options **</p> <p>The server create command creates by default the user directory in a sub-directory of the \\${wlp.install.dir} directory. In production, it is recommended to store the Liberty configuration in a separate directory. This can be done by setting the WLP_USER_DIR environment variable.</p> <ol> <li> <p>The etc directory as well as the server.env file are not created as part of the installation.      Use the following commands to set the variable WLP_USER_DIR to /home/techzone/Student/ops/int/wlp_usr in the server.env on runtime level.      (Keep in mind that the path in server.env must be absolute, ~/Student, for example is not supported):</p> <pre><code>mkdir ~/Student/ops/int/wlp/etc\necho \"WLP_USER_DIR=/home/techzone/Student/ops/int/wlp_usr\" &gt; ~/Student/ops/int/wlp/etc/server.env\ncat ~/Student/ops/int/wlp/etc/server.env\n</code></pre> <p></p> </li> <li> <p>Run the following commands to create a new server named \"myServer\":</p> <pre><code>wlp/bin/server create myServer\n</code></pre> <p></p> <p>The new server is created in the following directory: wlp_usr/servers/myServer.</p> </li> <li> <p>Run the following command to verify the name and the path of the server instance:</p> <pre><code>wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the files and directories that have been created for myServer:</p> <pre><code>ls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Replace the generated Liberty configuration with the configuration that you stored in the assets directory.</p> <pre><code>cp ~/Student/assets/server.* wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> </ol> <p>In the Liberty setup, you now have a server.env file on two levels:          - on runtime level at ${wlp.install.dir}/etc/server.env and          - on server level at ${server.config.dir}/server.env.          If both files are present, the contents of the two files are merged; values in the server-level file take precedence over values in the runtime-level file.     </p> <ol> <li> <p>Verify that the pre-defined HTTP settings fit to your environment:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep http\n</code></pre> <p></p> </li> </ol> <p>If you want to change those port values, you could define them in the server.env file or bootstrap.properties file for example.  Alternatively you could define the related variable on the operating system level.      </p>"},{"location":"1024-Liberty-Getting-Started/#44-install-required-features","title":"4.4  Install required features","text":"<p>You installed the Liberty kernel package which does not contain any features. The next step is to install the required features. Instead of looking into the Liberty configuration to determine which features are required, you can let Liberty inspect which features are missing. This can be done using the featureUtility and specifying the server you are looking for. The command by default will download the required features from the online repository. In an air-gapped environment, you could download the feature repository from the IBM support page and then specify in the featureUtility command to use a local repository. </p> <ol> <li> <p>To download and install the required features, use the following command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> <p>As you can see, the command detected that the features for servlet-6.0 and transportSecurity-1.0 were missing. It also downloads the feature ssl-1.0 as transportSecurity-1.0 depends on it.</p> </li> <li> <p>Verify that the Liberty features have been installed by using the following command:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#45-use-your-own-keystore","title":"4.5  Use your own keystore","text":"<p>If you do not create a keystore but enable SSL, Liberty will create a keystore with a random password. Now, you will create your own keystore with a password of choice. </p> <ol> <li> <p>Run the following command to create a keystore</p> <pre><code>wlp/bin/securityUtility createSSLCertificate --server=myServer --password=mySecret\n</code></pre> <p></p> <p>As you can see, the command uses the hostname and server name as subjectDN and encodes the password using xor. The command also allows to use aes encoding or encryption, see https://www.ibm.com/docs/en/was-liberty/base?topic=applications-securityutility-command.</p> </li> <li> <p>Our server template has already configured SSL and uses a variable to specify the keystore password. Use the following commands to review what has been configured in the server.xml file:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep trans\ncat wlp_usr/servers/myServer/server.xml | grep keystore\n</code></pre> <p></p> </li> <li> <p>The keystore password has been configured in the server.env file. Use the following command for review the settings:</p> <pre><code>cat wlp_usr/servers/myServer/server.env;echo\n</code></pre> <p></p> <p>As expected, the password used for the keystore does not match to the one in server.env and must be updated. </p> </li> <li> <p>Best practice is to store the password encoded or encrypted. In this case, you will use encoding via aes and store the password in the server.env file. To generate the encoded password, you can use the securityUtility encode command. Use the following command to update the server.env file with the encoded keystore password of \u201cmySecret\u201d, then review the result:</p> <pre><code>echo \"keystore_password=$(wlp/bin/securityUtility encode --encoding=aes mySecret)\" &gt; wlp_usr/servers/myServer/server.env\ncat wlp_usr/servers/myServer/server.env\n</code></pre> <p></p> </li> </ol> <p>The encoded keystore password is not unique, so you might have a different password as in the screenshot above.           But as long as you use the same password to be encoded, all of the different resulting strings are valid.      </p>"},{"location":"1024-Liberty-Getting-Started/#46-verify-that-the-server-configuration-works","title":"4.6  Verify that the server configuration works:","text":"<ol> <li> <p>Start the server via the following command:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the Liberty server is running and listens on port 9080 and 9443. You can also see that it complains about the missing include file application-config.xml. You will fix this later.</p> </li> <li> <p>Verify that the server is accessible via HTTPs. Switch to the browser and access the web application via the URL https://localhost:9443.      As before, you will get a warning that your connection is not secure. Click on Advanced, scroll down and click on \"Accept the Risk and Continue\". Then you should be able to access the application.</p> <p></p> </li> <li> <p>Switch back to the terminal window and press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the server via the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#47-deploying-a-sample-application-to-liberty","title":"4.7  Deploying a sample application to Liberty","text":"<p>In the first part of this lab, you used the Liberty Tools to develop an application and configure Liberty. The application got deployed via maven under the cover. Then you used the Liberty server package which already included the deployed application. In this section of the lab, you will deploy an application to Liberty using two different techniques.</p> <p>First, you will simply copy the application WAR module into the Liberty \"dropins\" directory. The dropins directory is monitored by Liberty. As deployable units (WAR, EAR, JAR) are added to the directory, Liberty automatically deploys and starts the application on the Liberty server.  The dropins directory can be used for applications that do not require extra configuration like security role mapping. As the deployable units are removed from the dropins folder, the applications are stopped and removed from the running Liberty server.</p> <ol> <li> <p>In the terminal window start the server and use the tail -f command to view the messages.log file.</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> </li> <li> <p>Right-click on Terminal and select New Window to open a second terminal window.</p> <p></p> </li> <li> <p>In the new Terminal window, navigate to the int directory:</p> <pre><code>cd ~/Student/ops/int/\n</code></pre> </li> <li> <p>Copy the web application into the dropins directory.</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/dropins\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window where tail command is running. You can see messages that the application deployment has taken place, the application simpleweb application has been started and is available at http://rhel9.techxchange.local:9080/simpleweb/.</p> <p>Be aware that Liberty defined the context root based on the name of the WAR file as \"/simpleweb\".</p> <p></p> </li> <li> <p>Verify that the application is accessible by opening a browser at: http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> <li> <p>In the terminal window where tail is running, you can see that the application has been accessed.</p> <p></p> </li> <li> <p>Switch back to the terminal where you entered the copy command and remove the deployed application from the dropins directory using the following command:</p> <pre><code>rm wlp_usr/servers/myServer/dropins/simpleweb.war\n</code></pre> </li> <li> <p>Switch back to the terminal window where tail is running. You can see that the application has been removed.</p> <p></p> <p>While the dropins directory can be used for applications that do not require extra configuration, deploying the application by adding it to the Liberty server configuration provides the freedom to configure the Liberty server based on the application configuration requirements.  Now you will deploy the simpleweb application by adding it to the Liberty server configuration.</p> <p>The default place for applications is: ${server.config.dir}/apps.</p> </li> <li> <p>Switch back to the terminal window not running tail. Copy the application WAR file into the apps directory by using the following command:</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/apps\nls -lrt wlp_usr/servers/myServer/apps/*.war\n</code></pre> <p></p> </li> <li> <p>To define the application in the Liberty configuration file, take a look at the application configuration that has been provided as snippet.</p> <pre><code>cat ~/Student/assets/application-config.xml\n</code></pre> <p></p> <p>As you can see, a different context root has been defined.</p> </li> <li> <p>You will add the webApplication element to the Liberty configuration by using the include concept. Review that the include element and the properties that have already been defined in the server.xml file.</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep include\n</code></pre> <p></p> </li> <li> <p>Copy the application-config.xml into the server directory.</p> <pre><code>cp ~/Student/assets/application-config.xml wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Switch back to the terminal window running tail. You can see that the application simpleweb gets deployed, this time with the context root mysimpleweb. </p> <p></p> </li> <li> <p>Finally test the application in the browser via URL http://localhost:9080/mysimpleweb/helloWorld. </p> <p></p> </li> </ol> <p>You have successfully deployed the web application into Liberty, first via dropins directory, then by adding it to the server.xml file via include.</p>"},{"location":"1024-Liberty-Getting-Started/#48-change-logging-and-tracing-by-using-configdropins","title":"4.8  Change logging and tracing by using ConfigDropins","text":"<p>Right now, you used the include concept to enhance the server.xml file with additional configuration files. Alternatively, you can specify additional configuration files in the configDropins directory without specifying include elements in the server.xml file. If you want to add configuration files to override anything in the erver.xml file of the server, create a configDropins/overrides directory.  In this case, you want to add/change the log level of the application server.</p> <ol> <li> <p>From the second terminal window, issue the following command to create a configDropins directory in the server directory.</p> <pre><code>mkdir -p wlp_usr/servers/myServer/configDropins/overrides\n</code></pre> <p></p> <p>Add INFO logging output to console</p> <p>Liberty provides the ability to set the logging level to any of the supported log levels defined in the documentation: https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace </p> <ul> <li>AUDIT logging enables logging of \u201cSignificant event affecting server state or resources\u201d</li> <li>INFO logging enables of \u201cGeneral information outlining overall task progress\u201d By default, the Liberty Server has the console log level set to AUDIT. In this section, you will change the level of log messages written to the console from AUDIT to INFO, which will result in additional logging messages. You will perform this activity not directly in the server.xml file but using the configDropins concept. Purpose is that you could change the log level easily on the fly and switch back to the previous level without having to manually edit a file. </li> </ul> </li> </ol> <p>Note:          It is also possible to set default logging options in the bootstrap.properties file.          If the logging options are set in the bootstrap.properties file, the logging options will take effect very early in server startup,          so it may be useful for debugging server initialization problems.     </p> <ol> <li> <p>Switch to the terminal currently running the tail on the file messages.log and press CTRL+C to stop it.</p> </li> <li> <p>Review the current console logging and you can see that it only contains messages from type AUDIT.</p> <pre><code>tail -f wlp_usr/servers/myServer/logs/console.log\n</code></pre> <p></p> </li> <li> <p>Switch to the second terminal window. Create a server configuration file to change the console log level to INFO via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\"&gt; &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>You will verify that messages of log level INFO will now be logged during the configuration of tracing.</p> <p>Update trace specification</p> <p>By default, the Liberty Server trace specification is set to \"*=info=enabled\". </p> <p>To update the trace specification, you will again use the configDropings concept.</p> </li> <li> <p>Switch to the second terminal window. Update the file configDropins/overrides/loglevel-config.xml to include a trace specification via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\" traceSpecification=\"webcontainer=all=enabled\"&gt;\n    &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, messages of log level INFO are displayed now which means that the change of the consoleLogLevel has been picked up.  The message indicates as expected, that the trace level has been set to \u201cwebcontainer=all\u201d. </p> </li> <li> <p>Switch to the second terminal window to verify that the trace has been created.</p> <pre><code>ls -lrt wlp_usr/servers/myServer/logs\n</code></pre> <p></p> </li> <li> <p>Remove the file to set the trace level back to default. </p> <pre><code>rm wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, the trace specification has been changed back to \"*=info\".</p> </li> <li> <p>Press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the Liberty instance using the following command: </p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> <li> <p>Delete the generated trace files by using  the following command:</p> <pre><code>rm wlp_usr/servers/myServer/logs/trace*.log\n</code></pre> <p>As you have seen, the logging component can be controlled through the server configuration and it is quite convenient to enable and disable tracing using configDropins.</p> <p>Configure logging in the bootstrap.properties file</p> <p>Occasionally, you might need to configure trace to diagnose a problem that occurs before the server.xml file is processed. Or you want to change the log format to something other than basic. In this case, the equivalent configuration properties can be specified in the bootstrap.properties file. </p> <p>If a configuration property is specified in both the bootstrap.properties file and the server.xml file, the value in bootstrap.properties is used until the server.xml file is processed. Then, the value in the server.xml file is used. Avoid specifying different values for the same configuration property in both the bootstrap.properties and the server.xml file.</p> <p>You will now change the log format to json. As the bootstrap.properties file does not exist, you will simpoly create it.</p> </li> <li> <p>Create a bootstrap,properties file that defines the property com.ibm.ws.logging.console.format by executing the following command: </p> <pre><code>echo 'com.ibm.ws.logging.console.format=json' &gt; wlp_usr/servers/myServer/bootstrap.properties\ncat wlp_usr/servers/myServer/bootstrap.properties\n</code></pre> <p></p> </li> <li> <p>Start the server via server run and you can see that the log format has been set to JSON.</p> <pre><code>wlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal window, press CTRL+C to stop the server.</p> </li> <li> <p>Change the log format back to default by deleting bootstrap.properties, then run the server again.</p> <pre><code>rm wlp_usr/servers/myServer/bootstrap.properties\nwlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal, press CTRL+C to stop the server.</p> <p>If you are interested into additional logging attributes, please take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace \u2003</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#49-review-the-liberty-configuration-via-liberty-rest-apis","title":"4.9  Review the Liberty configuration via Liberty REST APIs","text":"<p>If you use several includes or config dropins, you might run into the situation where you want to review the final setup. This can be done by using the restConnector APIs. </p> <p>Configure the admin access to the Liberty instance. </p> <ol> <li> <p>First of all, you need a strong password as the APIs provide access to sensitive data which could help a hacker to manipulate the system. Use the securityUtility to create a secure password as LibertyIsGreat.</p> <pre><code>wlp/bin/securityUtility encode --encoding=aes LibertyIsGreat\n</code></pre> <p></p> <p>As before, the encoded password is not unique, so your output will likely look different that the one above. But both are valid.</p> </li> <li> <p>Use the following commands to setup and configure the restConnector.</p> <p>a. Update the user password in the following code snippet or keep the password as is.</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;restConnector-2.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n&lt;quickStartSecurity userName=\"admin\" userPassword=\"{aes}ALCpb79MrIuO8aVUdyXKVDWNssXfX3OmL+xD2J3jWcOgLwrIq1f7/qO8tCR7JwNmcQ==\" /&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> <p></p> <p>b. As the restConnector feature is not installed so far, switch to a terminal window to install the missing features via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the Liberty instance by using the command:</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>From a browser window, access the Liberty REST APIs via the URL https://localhost:9443/ibm/api/config.      Enter Username/Password as: admin/LibertyIsGreat.</p> <p></p> </li> <li> <p>If asked, don\u2019t save the password in the browser. Your browser should display something like this:</p> <p></p> </li> <li> <p>In the browser window, press CTRL+F and enter webapp to search for webapp. You should find the related settings.</p> <p></p> </li> <li> <p>Search for logging and you get all attributes currently used for logging.</p> <p></p> </li> <li> <p>Finally stop the server and remove the restConnector configuration.</p> <pre><code>wlp/bin/server stop myServer\nrm wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> <p>For more details about the restConnector for administration, please take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=features-admin-rest-connector-20</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#410-using-the-liberty-admincenter","title":"4.10 Using the Liberty AdminCenter","text":"<p>The Liberty AdminCenter can be used to monitor the status of the Liberty server. You will define two users, an administrative user with the role admin and the second user with the role reader. Use again the securityUtility to create two secure passwords.</p> <ol> <li> <p>Create a password as Liberty4Admins for the admin user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Admins\n</code></pre> <p></p> </li> <li> <p>Create a password as Liberty4Readers for the second user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Readers\n</code></pre> <p></p> </li> <li> <p>Execute the following command to Configure the AdminCenter with the two users using the generated passwords generated before.</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;adminCenter-1.0&lt;/feature&gt;\n        &lt;feature&gt;websocket-2.1&lt;/feature&gt;\n    &lt;/featureManager&gt;\n    &lt;!-- Configure administrative roles. --&gt;\n    &lt;basicRegistry realm=\"basicRealm\"&gt;\n        &lt;user name=\"admin\" password=\"{xor}EzY9Oi0rJmseOzI2MSw=\" /&gt;\n        &lt;user name=\"reader\" password=\"{xor}EzY9Oi0rJmsNOj47Oi0s\" /&gt;\n    &lt;/basicRegistry&gt; \n    &lt;!-- Assign 'admin' to Administrator --&gt;\n    &lt;administrator-role&gt;\n        &lt;user&gt;admin&lt;/user&gt;\n    &lt;/administrator-role&gt;\n    &lt;reader-role&gt;\n        &lt;user&gt;reader&lt;/user&gt;\n    &lt;/reader-role&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/adminCenter-config.xml\n</code></pre> <p></p> </li> <li> <p>As the AdminCenter feature is not installed so far, switch to a terminal window to install the feature via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the server and take a look at the log:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the AdminCenter feature adminCenter-1.0 has been enabled. </p> </li> <li> <p>Access the Liberty Admin Center via URL https://localhost:9443/adminCenter, then enter the credentials for the admin user (admin/Liberty4Admins) and press Submit.</p> <p> The Admin Center Toolbox is displayed.</p> </li> <li> <p>Click on Explore to explore the Liberty status, the applications as well monitoring data and configuration.</p> <p></p> </li> <li> <p>On the tab Overview take a look at the running servers and applications. </p> <p></p> <p>You would see more than one server if a collection would have been defined.</p> </li> <li> <p>On the tab Applications you can see the running applications. As user with admin rights, you can use the menu to start, stop or restart an application.</p> <p></p> </li> <li> <p>On the tab Montor, you can see basic performance data. </p> <p></p> <p>As you can see here, the Used Heap Memory max value above 1.9 MB which indicates that max heap has not been defined. You will change that in the next section of the lab.</p> </li> <li> <p>On the tab Configure, you can see current configuration. </p> <p></p> <p>You can see a warning that remote file access is not configured. You can ignore that as you will not configure Liberty via AdminCenter.  But you could click on the link to see the configuration in design and source view.</p> </li> <li> <p>Select to log out as admin.</p> <p></p> </li> <li> <p>Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select the tab Applications. Try to click on the twisty next to the simpleweb application and you can see that you are not auithorized to start or stop an application.</p> <p></p> </li> <li> <p>Select to log out as reader.</p> <p></p> </li> <li> <p>In the terminal window, press CRTL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty server.</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#411-customizing-liberty-jvm-options","title":"4.11 Customizing Liberty JVM Options","text":"<p>As you have seen in the Admin Center, the Liberty value for max heap is quite large which indicates that a limit has not been defined yet. This will be done as part of this section by defining Liberty JVM options. </p> <p>The generic JVM arguments are used to configure and adjust how the JVM executes. Liberty is pre-configured with minimal settings defined. Custom generic JVM arguments such as heap settings for a Liberty server can be defined in the jvm.options file.</p> <ol> <li> <p>Create a jvm.options file with definitions for min and max heap by executing the following command:</p> <pre><code>echo '\n-Xms25m\n-Xmx500m\n' &gt; wlp_usr/servers/myServer/jvm.options\ncat wlp_usr/servers/myServer/jvm.options\n</code></pre> <p></p> </li> <li> <p>Start the server with the updated JVM options.</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>Access the Liberty Admin Center again via URL https://localhost:9443/adminCenter. Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select Monitor. Take a look at the dashboard and you can see that the Used Heap Memory Max is now 500 MB as defined in jvm.options.</p> <p> </p> </li> <li> <p>Log out from admin center.</p> </li> <li> <p>Stop the Liberty server using the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> <p>For additional information around the Liberty Admin Center, take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=center-setting-up-admin</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#412-recap","title":"4.12 Recap","text":"<p>Let\u2019s recap what you did in this part of the lab: </p> <ul> <li>installed a Liberty server using the Liberty kernel image.</li> <li>used Liberty environment variables to separate the Liberty configuration from the binaries.</li> <li>created a Liberty server instance and installed missing features.</li> <li>deployed a simple web application via dropins and via server.xml.</li> <li>configured logging via server.xml and server.env.</li> <li>changed the Liberty heap size via jvm.options.</li> <li>used the REST API to see the Liberty configuration.</li> <li>used Liberty Admin Center to see monitoring data and administer Liberty apps. \u2003</li> </ul>"},{"location":"1024-Liberty-Getting-Started/#5-lab-cleanup","title":"5 Lab Cleanup","text":"<ol> <li> <p>Once you are done, make sure that Liberty and Visual Studio Code is not running.</p> </li> <li> <p>Delete the Student folder via command:</p> <pre><code>rm -rf ~/Student\n</code></pre> </li> <li> <p>Close the browser and all terminal windows</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/#summary","title":"Summary","text":"<p>In this lab, you learned how to develop a simple application as a developer, how to deployment and configure the application as an configuration opertor, and how to install and configure Liberty as an administrator.</p> <p>Congratulations!</p> <p>You have successfully completed the lab \"Liberty Getting Started\"</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/","title":"Liberty Getting Started","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#liberty-getting-started","title":"Liberty Getting Started","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#data-collection-assessments-deployment-accelerators","title":"data collection, assessments, &amp; deployment accelerators","text":"<p>Last updated: March 2024</p> <p>Duration: 90 minutes</p> <p>Need support? Contact Lars Besselmann, Kevin Postreich</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#liberty-getting-started-tasks","title":"Liberty Getting Started tasks","text":"<p>WebSphere Liberty (Liberty) is a lightweight open framework for building fast and efficient cloud-native Java microservices. Build cloud-native apps and microservices while running only what you need. It is the most flexible server runtime available to Java developers in this solar system.</p> <p>Liberty is built on the open source Open Liberty codebase. Open Liberty is designed with both developers and application business owners in mind.</p> <ul> <li>It delivers the latest Java APIs and integrates with the most popular Developer and Build tools.</li> <li>It has built-in innovation like zero-migration to reduce application runtime costs and delivery effort.</li> <li>Liberty is downstream of Open Liberty so anything that works on Open Liberty works on Liberty.</li> <li>Same Monthly Continuous Delivery Release Cycle as Liberty</li> <li>You do not need to switch to Liberty for commercial support</li> </ul> <p>Liberty Tools is a set of intuitive developer tools for the Eclipse IDE, Visual Studio Code, and IntelliJ IDEA development environments. These tools adopt a Maven/Gradle-centric approach and enable fast, iterative cloud-native Java application development through Liberty dev mode. Liberty Tools also provides helpful, time-saving features such as code completion, hover descriptions, and configuration diagnostics for Jakarta EE APIs, MicroProfile APIs, and Liberty configuration. For more information, check out the Liberty Tools overview.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#1-introduction","title":"1. Introduction","text":"<p>In the lab, there will be different roles involved with perform different tasks using different tools. You will perform all the different roles during the lab. </p> <ul> <li>You will start as an application developer and use Liberty starter and the code assistant to develop a simple web application. But don't worry, you do not have to be a developer to do this.</li> <li>As Liberty configuration opertor, you will use the configuration assistant and concepts like includes and variables to create a portable configuration. </li> <li>As Liberty administrator, you will install Liberty from a kernel image, add missing features, configure logging, security and so on, will use the Liberty REST APIs to review the configuration and use Liberty Admin Center for monitoring.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#2-objective","title":"2. Objective","text":"<p>These are the objectives in the lab:</p> <ul> <li> <p>As application developer:</p> <ul> <li>Tasks: <ul> <li>Develops the application.</li> <li>Creates a basic Liberty configuration for the application</li> </ul> </li> <li>Tools:<ul> <li>Apache Maven <ul> <li>to build the project </li> <li>to download the Open Liberty server runtime from the maven repository</li> </ul> </li> <li>Liberty Maven Plugin for inner-loop development via Liberty Dev Mode<ul> <li>to build the application war and deploy it to Liberty</li> </ul> </li> <li>Visual Studio Code <ul> <li>as IDE to build the application code</li> </ul> </li> <li>Liberty Tools plugin for Visual Studio Code<ul> <li>provides a Liberty dashboard with Dev Mode integration in the IDE</li> <li>provides Jakarta EE and MicroProfile code assistance</li> <li>provides Liberty configuration assistance</li> </ul> </li> <li>Liberty Starter Project <ul> <li>to generate a maven project for Liberty </li> </ul> </li> <li>Open Liberty / WebSphere Liberty<ul> <li>as runtime for the Java application that will be developed</li> <li>to create a server package</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>As Liberty configuration operator:</p> <ul> <li>Tasks: <ul> <li>Extract Liberty package from command line and implement Liberty dynamic updates</li> <li>Develop portable Liberty configuration snippets using includes, variables and much more.</li> </ul> </li> <li>Tools:<ul> <li>Visual Studio Code with Liberty Tools plugin as editor with configuration assistance</li> </ul> </li> </ul> </li> <li> <p>As Liberty administrator:</p> <ul> <li>Tasks: <ul> <li>Installs Liberty</li> <li>Configures Liberty for the target application using Liberty configuration snippets</li> <li>Applies security to harden the Liberty configuration</li> <li>Configure logging using configDropins</li> <li>Review the configuration using LIberty REST APIs</li> <li>Monitor Liberty using the Admin Center</li> </ul> </li> <li>Tools:<ul> <li>Liberty server command to create a Liberty instance and start, stop or dump it</li> <li>Liberty installUtility to install missing features</li> <li>Liberty securityUtility to create a keystore or encode a password</li> <li>Liberty REST APIs and Admin Center</li> </ul> </li> </ul> </li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#3-prerequisites","title":"3. Prerequisites","text":"<p>The following prerequisites must be completed prior to beginning this lab:</p> <ul> <li>Familiarity with basic Linux commands</li> <li>Have internet access</li> <li>Have a lab environment ready</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#4-accessing-the-environment","title":"4. Accessing the environment","text":"<p>If you are doing this lab as part of an instructor led workshop (virtual or face to face), an environment has already been provisioned for you. The instructor will provide the details for accessing the lab environment.</p> <p>Otherwise, you will need to reserve an environment for the lab. You can obtain one here. Follow the on-screen instructions for the \u201cReserve now\u201d option.</p> <p>https://TBD-to-the-reservation-link</p> <p>The lab environment contains one (1) Linux VM, named Workstation.</p> <p></p> <p></p> <ol> <li> <p>Access the lab environment from your web browser. </p> <p>A <code>Published Service</code> is configured to provide access to the <code>Workstation</code> VM through the noVNC interface for the lab environment.</p> <p>a. When the demo environment is provisioned, click on the <code>environment tile</code> to open its details view. </p> <p>b. Click on the <code>Published Service</code> link which will display a Directory listing </p> <p>c. Click on the <code>vnc.html</code> link to open the lab environment through the noVNC interface. </p> <p></p> <p>d. Click the <code>Connect</code> button </p> <p></p> <p>e. Enter the password as:  <code>passw0rd</code>. Then click the <code>Send Credentials</code> button to access the lab environment. </p> <p>Note: That is a numeric zero in passw0rd  </p> <p></p> <p></p> </li> <li> <p>If prompted to Login to the \"workstation\" VM, use the credetials below: </p> <p>The login credentials for the workstation\u201d VM is:</p> <ul> <li> <p>User ID: techzone</p> </li> <li> <p>Password: IBMDem0s!</p> </li> </ul> <p>Note: That is a numneric zero in the password</p> <p></p> <p></p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#5-tips-for-working-in-the-lab-environment","title":"5. Tips for working in the lab environment","text":"<ol> <li> <p>You can resize the viewable area using the noVNC Settings options to resize the virtual desktop to fit your screen.</p> <p>a. From the environment VM, click on the twisty on the noNC control pane to open the menu.  </p> <p></p> <p>b. To increase the visible area, click on <code>Settings &gt; Scaling Mode</code> and set the value to <code>Remote Resizing</code></p> <p></p> </li> <li> <p>You can copy / paste text from the lab guide into the lab environment using the clipboard in the noVNC viewer. </p> <p>a. Copy the text from the lab guide that you want to paste into the lab environment</p> <p>b. Click the <code>Clipboard</code> icon and <code>paste</code> the text into the noVNC clipboard</p> <p></p> <p>c. Paste the text into the VM, such as to a terminal window, browser window, etc. </p> <p>d. Click on the <code>clipboard</code> icon again to close the clipboard</p> </li> <li> <p>An alternative to using the noVNC Copy / Paste option, you may consider opening the lab guide in a web browser inside of the VM. Using this method, you can easily copy / paste text from the lab guide without having to use the noVNC clipboard. </p> </li> <li> <p>To switch between different windows or get access the tool bar, click on the <code>Activities</code> icon within the VM.</p> <p></p> <p>Then select from the tool bar the application that you want to open. In the lab, you will use Firefox and the terminal.</p> <p></p> </li> <li> <p>How to change the background color  In the environment, the default background for terminal windows and Visual Studio Code is dark. For the lab documentation, we changed the color to light. Feel free to keep the background in light but if you want to change it to dark, here the explanation how it was changed.</p> <ol> <li> <p>How to change the terminal background to white     Right-click into the terminal background, then select Preferences.</p> <p></p> <p>A Preferences window opens. Click on Colors, then uncheck the box for  Use colors from system theme . (If you want to get back to dark, check the box again).</p> <p></p> <p>The terminal background should switch to white.</p> <p></p> <p>Close the Preferences window.</p> </li> <li> <p>How to switch the background of Visual Studio Code from dark to light</p> <p>In a terminal Window, run the following command to start Visual Studio Code</p> <pre><code>mkdir ~/temp\ncode ~/temp\n</code></pre> <p></p> <p>Visual Studio Code opens with a dark background.  Click on  Yes, I trust the authors </p> <p></p> <p>Then select Preferences &gt; Theme &gt; Color Theme</p> <p></p> <p>Select Light</p> <p></p> <p>The tool will change to a light background, see below.</p> <p></p> <p>Close Visual Studio Code.</p> </li> </ol> </li> </ol> <p> </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6-execute-lab-tasks","title":"6. Execute Lab Tasks","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#61-verify-the-installed-software","title":"6.1 Verify the installed software","text":"<ol> <li> <p>Open a terminal by clicking on Activities and selecting terminal.</p> <p></p> <p>The terminal window opens.</p> <p></p> </li> <li> <p>Check the Maven version via the following command:</p> <pre><code>mvn -version\n</code></pre> <p></p> </li> <li> <p>Check the Docker version via the following command:</p> <pre><code>docker -v\n</code></pre> <p></p> </li> <li> <p>Check the Git version via the following command:</p> <pre><code>git -v\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#62-create-the-required-working-directories","title":"6.2 Create the required working directories","text":"<ol> <li>Create the Student directories and some sub-directories used in the lab with commands:<pre><code>mkdir ~/Student\nmkdir ~/Student/dev\nmkdir ~/Student/ops\nmkdir ~/Student/assets\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#63-develop-a-liberty-web-application","title":"6.3 Develop a Liberty web application","text":"<p>The objective of this section is to develop a simple web application for Liberty. You will use a Liberty starter application to now start from scratch and use Visual Studio Code and Liberty Tools to build the application.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#631-create-a-starter-app-project","title":"6.3.1 Create a starter app project.","text":"<p>In this scenario, you want to create a Jakarta EE 10 Web application with the name simpleweb and will use maven to build it. The fastest way to get started is to use an Open Liberty starter application which generates a project with the maven configuration as well as a basic Liberty setup.</p> <p></p> <p>The Open Liberty starter gives you a simple, quick way to get the necessary files to start building an application on Open Liberty. There is no need to search how to find out what to add to your maven or gradle build files. A simple RestApplication.java file is generated for you to start creating a REST based application. A server.xml configuration file is provided with the necessary features for the MicroProfile and Jakarta EE versions that you previously selected. </p> <ol> <li> <p>Open a browser window by clicking on Activities and then select the Firefox browser icon.</p> <p></p> <p>If you get a pop-up that Authentication is required, enter IBMDem0s!. </p> <p></p> </li> <li> <p>Enter the URL https://openliberty.io/start/ </p> </li> </ol> <p>If the page does not open, close the browser and open it again. </p> <ol> <li> <p>Change the artifact name to simpleweb, change the Java level to 17 and leave the rest as is, then click on Generate project </p> <p></p> </li> <li> <p>Click on Save to save the project under Downloads.</p> <p></p> <p>You will see a pop-up like the one below. Click on Got it!  to close the window.</p> <p></p> </li> <li> <p>Extract the file.</p> <p>a. Click on Activities and switch to the terminal window. </p> <p>b. Move the starter project to the developer directory and extract it with commands:</p> <pre><code>mv ~/Downloads/simpleweb.zip ~/Student/dev\nunzip ~/Student/dev/simpleweb.zip -d ~/Student/dev/simpleweb\n</code></pre> <p></p> <p>The project has been created under ~/Student/dev/simpleweb directory.</p> <p>c. List the content via following command:</p> <pre><code>ls -lrt ~/Student/dev/simpleweb\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#632-inspect-the-starter-project-using-open-visual-studio-code","title":"6.3.2. Inspect the starter project using Open Visual Studio Code","text":"<p>Now you will use Visual Studio Code to see what has been generated as part of the starter project.</p> <ol> <li> <p>From the terminal window, start Visual Studio Code</p> <pre><code>cd ~/Student/dev/simpleweb/\ncode .\n</code></pre> <p></p> <p>Visual Studio Code UI will be opened.</p> </li> <li> <p>Click on Yes, I trust the authors to continue.</p> <p></p> <p>If you see during the lab one of the pop-ups below or any other pop-up asking to install something, close the pop-up without installation by clicking the X.  </p> </li> <li> <p>Investigate into the generated project:</p> <p>In Visual Studio Code, take a look at the Explorer section to see the content of the project. You can find a src and a target folder, a Dockerfile and a maven build file (pom.xml).</p> <p></p> </li> <li> <p>Take a look at the generated Maven configuration </p> <p>a. Click on pom.xml to see the maven pom.</p> <p>In the build section, you can find the configuration of the liberty-maven-plugin. </p> </li> </ol> <p>Don\u2019t worry if the version of the plugin has changed to 3.10.2 or later. </p> <pre><code>b. Finally close the pom.xml.\n</code></pre> <ol> <li> <p>Review the generated Liberty configuration</p> <p>a.  Open src &gt;  main &gt;liberty &gt; config &gt; server.xml to see the Liberty configuration.</p> <p></p> <p>As you can see, the features for jakartaee-10 and MicroProfile-6.1 have been configured.</p> <p></p> <p>b. Scroll down and you can see that the http endpoint and the web application have been configured.</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#633-adjust-the-liberty-configuration","title":"6.3.3 Adjust the Liberty configuration","text":"<p>The simpleweb application will not require the full Jakarta EE 10 standard but only the servlet specification.</p> <p>As best practice to optimize the footprint of the application runtime regarding memory and disk space and limit the number of potential vulnerabilities, you should define only the features that are required by the application. In this case, you are ging to replace the jakartaee-10 feature with an appropriate servlet feature. </p> <ol> <li> <p>In the Visual Studio Code editor for server.xml, scroll up to the feature section.</p> </li> <li> <p>Delete the lines \\jakartaee-10.0\\ and \\&lt; feature&gt;MicroProfile-6.1\\.     Your featureManager section should now look like this:</p> <p></p> </li> <li> <p>Now you will use the Liberty configuration assistant to define the servlet feature. Place your cursor at the beginning of an empty line in the featureManager section. Then press the CTRL key and press SPACE to activate the configuration assistant. You should see something like:</p> <p></p> </li> </ol> <p>You might have to click on the arrow right to feature to get the description. </p> <ol> <li> <p>Select feature and the feature element gets added.</p> <p></p> </li> <li> <p>Use again CTRL+SPACE to get the list of available features.</p> <p></p> </li> <li> <p>Type the word servlet to see the available servlet features.</p> <p></p> </li> <li> <p>Use the arrow-down key to get the description for servlet-6.0.</p> <p></p> </li> <li> <p>Select the feature servlet-6.0 and your configuration should now look like this:</p> <p></p> </li> <li> <p>For this part of the lab, you do not need to define a keystore or the basic registry, so you need to delete the generated entries.     Your configuration should now look like this:</p> <p></p> </li> <li> <p>Save the configuration by using CTRL+S.</p> </li> <li> <p>Close the server.xml file.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#634-using-liberty-dev-mode","title":"6.3.4   Using Liberty Dev Mode","text":"<p>Liberty development mode, or dev mode, allows you to develop applications with any text editor or IDE by providing hot reload and deployment, on demand testing, and debugger support. Liberty Dev Mode is enabled through Maven and Gradle projects.</p> <p>Your code is automatically compiled and deployed to your running server, making it easy to iterate on your changes.</p> <p>You can run tests on demand or even automatically so that you can get immediate feedback on your changes. You can also attach a debugger at any time to debug your running application.</p> <p></p> <p>You can use the capabilities of Liberty dev mode inside and outside of an IDE. This provides you the flexibility of choice. In a terminal window, you would use Liberty in dev mode with maven using the command mvn liberty:dev or mvn liberty:devc if you want to develop in a container. </p> <p>In the lab environment, the Liberty tools plugin has been installed into Visual Studio Code. Therefore you will use the integrated Liberty dashboard instead.\u2003</p> <ol> <li> <p>In Visual Studio Code, expand the Liberty Dashboard.</p> <p></p> </li> <li> <p>Right-click on simpleweb and then start to start the server in dev mode.</p> <p></p> </li> <li> <p>A terminal opens within Visual Studio Code and you can see that the start of the build process gets triggered.</p> <p></p> </li> <li> <p>The Liberty plugin as well as the Liberty server artifacts get downloaded, then the server is ready for testing.</p> <p></p> </li> <li> <p>Switch to the browser window and enter the URL localhost:9080. You should see something like this:</p> <p></p> </li> </ol> <p>If you get a pop-up with Authentication required, enter the password IBMDem0s! and click on Unlock. </p> <pre><code>Now, let\u2019s create a simple web application.\n</code></pre>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#635-edit-the-simpleweb-application","title":"6.3.5 Edit the simpleweb application","text":"<p>Now you will edit the simpleweb application which only consists of a servlet. Thanks to Liberty code assistant, you don't have to write the code on your own. </p> <ol> <li> <p>Switch to Visual Studio Code.</p> </li> <li> <p>In Visual Studio Code, expand the path to src/main/java/com/demo/rest, then right-click on demo and select New File.</p> <p></p> </li> <li> <p>Enter the name helloWorldServlet.java and press ENTER.</p> <p></p> </li> <li> <p>The file src/main/java/com/demo/helloWorldServlet.java is generated and opens in an editor.</p> <p></p> </li> <li> <p>Remove all code from the file. Then enter servlet and press CTRL+SPACE.</p> <p></p> </li> <li> <p>The code assistant offers some servlet methods for Jakarta EE. Select servlet_doget, and the required starter code gets generated.     As you can see, the fields that should be changed are highlighted.</p> <p></p> </li> <li> <p>Change the servletName to helloWorldServlet and the urlPatters to /helloWorld. The code should now look like this:</p> <p></p> </li> <li> <p>Press CTRL+S to save the code change. Take a look at the terminal output. As Liberty has been started in DevMode, the code changes are picked up automatically, the source gets compiled and Liberty gets updated.</p> <p></p> </li> <li> <p>Switch to the browser and open the URL localhost:9080/simpleweb/helloWorld. You should see the output of the created servlet.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and change the source code of the servlet response text to something like this: helloWorld - Example HTTP GET request for HTTPServlet</p> <p></p> </li> <li> <p>Save the changes and reload the page in the browser. The output should be updated.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and close the editor for the file helloWorldServlet.java.</p> </li> </ol> <p>Final step as developer is to export the developed application as WAR file so that it can be used in the next part of the lab.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#636-export-the-developed-application-as-war-file","title":"6.3.6 Export the developed application as WAR file","text":"<p>Export the developed application so that it can be deployed to Liberty by the operations team.</p> <p>The generated maven pom by default does not generate a WAR file as it uses a \u201clooseApplication\u201d approach to optimize the inner-loop development experience. (For more details, see https://github.com/OpenLiberty/ci.maven). To change the default build behaviour, you need to adjust the pom.xml file and configure the Liberty maven plugin to generate a WAR by setting the property: \\false\\.</p> <ol> <li> <p>Switch back to Visual Studio Code.</p> </li> <li> <p>In the Liberty dashboard, right-click on the simpleweb application and select Stop (or use CTRL+C on the terminal window instead).</p> <p></p> </li> <li> <p>Verify in the terminal that Liberty has been stopped.</p> <p></p> </li> <li> <p>In Visual Studio Code, open the file pom.xml and add to the Liberty plugin configuration the lines:</p> <pre><code>&lt;configuration&gt;\n&lt;looseApplication&gt;false&lt;/looseApplication&gt;\n&lt;/configuration&gt;\n</code></pre> <p></p> </li> <li> <p>If you would start Liberty now again in Dev Mode, the property looseApplication would be ignored and you would see a warning like this:   </p> <p></p> <p>Therefore, you must start Liberty in run mode to generate the WAR file. This can be done by entering in the terminal window the command:</p> <pre><code>mvn liberty:run\n</code></pre> <p></p> <p>As you can see in the screenshot above, maven has built the file simpleweb.war and stored it at ~/Student/dev/simpleweb/target/ directory.</p> </li> <li> <p>Scroll down and you can see that it has been installed into the directory ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer/apps.</p> <p></p> </li> <li> <p>Feel free to test the application in the browser, then stop the Liberty instance by using CTRL+C.</p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#637-create-a-server-package","title":"6.3.7 Create a server package","text":"<p>For the next lab, you will need the WAR file as well as the server.xml which can be found in the created Liberty instance at:  ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer.</p> <p>More complex applications also depend on other files like utility jars, additional Liberty configuration files and JDBC drivers for example. </p> <p>So instead of copying the files one by one, you could create a server package that contains all files.</p> <p>What is a server package? A server package can contain only the user directory or the full application server.  </p> <p>The syntax of the server package command is: </p> <pre><code>server package server_name --archive=package_file_name.jar --include=all\n</code></pre> <p>With the option --include=all, the Liberty binaries as well as the usr directory get packaged.</p> <p>For more details and options, see https://www.ibm.com/docs/en/was-liberty/base?topic=line-packaging-liberty-server-from-command.</p> <ol> <li> <p>To create the server package, execute the following command:</p> <pre><code>~/Student/dev/simpleweb/target/liberty/wlp/bin/server package defaultServer --archive=simpleweb-serverpackage.jar --include=all\n</code></pre> <p></p> </li> <li> <p>To hand over the server package to the ops team, use the following commands: </p> <pre><code>cp ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer/simpleweb-serverpackage.jar ~/Student/assets\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#638-recap","title":"6.3.8 Recap","text":"<p>Congratulations, you have finished the application development part.</p> <p>Let\u2019s recap what you did so far. </p> <p>You acted as developer and used Visual Studio Code and the Liberty Tools for these tasks:</p> <ul> <li>generated a Liberty starter project including the required maven and Liberty configuration. </li> <li>used the Liberty Tools configuration assistant to adjust the Liberty configuration.</li> <li>used Liberty Dev Mode for inner-loop development.</li> <li>updated the simpleweb application using the Jakarta EE code assistant. </li> <li>exported the web application as WAR file.</li> <li>created a server package including application and Liberty binaries.</li> </ul> <p>Useful links: https://github.com/OpenLiberty/liberty-tools-vscode/blob/HEAD/docs/user-guide.md </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#64-liberty-operations","title":"6.4 Liberty operations","text":"<p>Now you will work with Liberty from an operational point of view. Development has handed over a Liberty server package to you. The server package contains all necessary configuration to run the application called simpleweb. The provided server package is typically not production-ready, as it is likely not portable between stages and does not fulfill the requirements regarding security and so on. </p> <p>In this part of the lab, you will explore how to create configuration snippets and how to administer Liberty from the command line. But first you will explore the server package and get an understanding about dynamic updates.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#641-explore-the-server-package","title":"6.4.1 Explore the server package","text":"<p>You will now explore the Liberty server package to get a better understanding how to use it, in addition you will use it to learn more about Liberty administration from the command line and Liberty dynamic updates.</p> <p>In this section, you will use the server run command instead of the server start command. This will allow you to see the logs immediately instead of having to use a tail command. It will also allow you to stop the Liberty server via CTRL+C </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6411-extract-liberty-package-from-command-line","title":"6.4.1.1 Extract Liberty package from command line","text":"<ol> <li> <p>Extract the Liberty server package and try to run it. When asked, enter test as target directory.</p> <pre><code>cd ~/Student/ops/\njava -jar ~/Student/assets/simpleweb-serverpackage.jar\n</code></pre> <p></p> <p>The directory test/wlp got created and contains the configured Liberty instance including application. </p> </li> <li> <p>Run the following command to get the Liberty version:</p> <pre><code>test/wlp/bin/productInfo version\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the Liberty features that have been installed:</p> <pre><code>test/wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, the server package provided by the developer only contains the servlet-6.0 features which is the only feature required by the application. </p> </li> <li> <p>Run the following command to get the list of defined Liberty application servers:</p> <pre><code>test/wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Start the Liberty server instance by running the command:</p> <pre><code>test/wlp/bin/server start defaultServer\n</code></pre> <p></p> <p>This runs the server in the background and the output is written to files in the test/wlp/bin/servers/defaultServer/logs directory.</p> <p>To start the server in the foreground (so the console messages are displayed in the command window) you would use the command </p> <pre><code>test/wlp/bin/server run defaultServer.\n</code></pre> <p>You will use it later in the lab.</p> </li> <li> <p>View the Liberty server\u2019s messages.log file to see the server startup messages via the command:</p> <pre><code>cat test/wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> <p>At the beginning of the log, you can see that Open Liberty 24.0.0.2 is used. The server is started when the message \u201cThe defaultServer server is ready to run a smarter planet\u201d is displayed in the messages.log file.</p> </li> <li> <p>Test that the application is accessible via URL http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6412-liberty-dynamic-updates","title":"6.4.1.2 Liberty dynamic updates","text":"<p>Let\u2019s do a short excurse about Liberty dynamic updates. You will use Visual Studio Code to perform some minor configuration changes. For this part of the lab, you could instead also use a simple text editor like vi or gedit instead. </p> <ol> <li> <p>Open Visual Studio Code.</p> <pre><code>cd ~/Student/ops/test\ncode .\n</code></pre> <p></p> </li> <li> <p>Visual Studio Code opens. Click on Yes, if you are asked to trust the author.</p> <p></p> </li> <li> <p>In Visual Studio Code, open a terminal window</p> <p></p> </li> <li> <p>In the terminal, use the tail command to display the Liberty message log.</p> <pre><code>tail -f wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> </li> <li> <p>Wait until the web application has been initialized</p> <p></p> </li> <li> <p>In Visual Studio Code, navigate to wlp &gt; usr &gt; servers &gt; defaultServer and open the file server.xml.</p> <p></p> </li> <li> <p>In the server.xml file, change the httpPort setting from port 9080 to port 9081.</p> <p></p> <p>You can see in the terminal that the change is picked up and Liberty listens now on port 9081.</p> <p></p> </li> <li> <p>Change the webApplication contextRoot setting from \u201c/simpleweb\u201d to \u201c/mysimpleweb\u201d.</p> <p></p> <p>You can see in the log that the change is picked up.</p> <p></p> </li> <li> <p>Switch to the browser and access the application via URL localhost:9081/mysimpleweb/helloWorld.</p> <p></p> <p>As you have seen, you can change the Liberty configuration without having to restart the server.  You will explore this further later in the lab when you dynamically update the logging for example. Now let's stop the server.</p> </li> <li> <p>In the terminal, press CTRL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty instance by executing in the terminal the command:</p> <pre><code>wlp/bin/server stop defaultServer\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#642-create-liberty-configuration-snippets","title":"6.4.2 Create Liberty configuration snippets","text":"<p>There are different ways to create a Liberty server configuration and there are often different roles involved to get the final configuration for production. The application specific configuration, for example, is typically created by the application developer while security related configuration is typically done by operations. Operations is typically also responsible to make the configuration portable across stages, configure logging and so on. </p> <p>You could create Liberty configuration snippets by copying over the related snippets from the product documentation and adjust them in a normal text editor. In this part of the lab, you will see that the Liberty tools plugin in Visual Studio Code can help you to speed up the create of configuration snippets as it provides configuration assistance including documentation. Let\u2019s get started.</p> <p>You will now modify the file server.xml which has been provided as part of the server package to make it more portable and re-usable.</p> <ol> <li> <p>In Visual Studio Code, open the file server.xml if you closed it previously.</p> <p></p> </li> <li> <p>Take a look at the httpEndpoint element.</p> <p></p> <p>As mentioned in the comment, the httpEndpoint is by default not accessible from a remote client.  This is good from security point of view and works fine if the client is local to the server. But if you, for example, use a remote load balancer or a remote HTTP server, this will not work. So there will be likely situations where you want to allow access to the application from a remote client and you must add a host attribute. You will use the Liberty Tools configuration assistant to do this.</p> </li> <li> <p>Place the cursor at the end of the line &lt;httpEndpoint id=\"defaultHttpEndpoint\" and press ENTER to add another line. </p> <p>In the new line, press CTRL+SPACE to see the available attributes. </p> <p>Use the arrow-down key and navigate to the host attribute to see the description of the attribute.</p> <p></p> </li> <li> <p>Select host and your configuration should look like this:</p> <p></p> <p>As you can see, the attribute host defaults to localhost.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6421-use-variables-for-portability","title":"6.4.2.1 Use variables for portability","text":"<p>To make the configuration portable, you will replace the fixed values for ports and host with Liberty variables. Liberty variables can be defined with a default value and overridden from inside or outside Liberty. To show the concept, you will adjust the httpEndpoint settings.</p> <p>You could use the configuration snippet below to replace the existing httpEndpoint configuration with a portable configuration. </p> <pre><code>&lt;httpEndpoint id=\"defaultHttpEndpoint\"\n              host=\"${httpEndpoint_host}\"\n              httpPort=\"${httpEndpoint_port}\"\n              httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n&lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n&lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n&lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n</code></pre> <p>Instead you will use the Liberty configuration assistant to get an understanding how you could create such a configuration snippet.</p> <ol> <li> <p>Place the cursor in an empty line under the httpEndpoint section, then enter var and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select variable, then enter as name \"httpEndpoint_port\".</p> <p></p> </li> <li> <p>Place the cursor after name=\"httpEndpoint_port\", enter a SPACE and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select defaultValue and enter as value 9080.</p> <p> </p> </li> <li> <p>Use copy and paste to create two additional variables: </p> <ul> <li>one with the name \"httpEndpoint_secure_port\" and the default value \"9443\"</li> <li>the other one with the name \"httpEndpoint_host\" and the value \"*\".</li> </ul> <p>Your configuration should now look like this:</p> <p></p> </li> <li> <p>Switch to the httpEndpoint section, remove for the attribute host the value \"localhost\", enter ${ht and press CTRL+SPACE.</p> <p></p> <p>As you can see, the variable names are offered. </p> </li> <li> <p>Select \"httpEndpoint_host\", then enter \"}\". Your configuration should look like this:</p> <p></p> </li> <li> <p>Do the same kind of change for the attributes httpPort and httpsPort. </p> <p>Your final httpEndpoint configuration should now look like this:</p> <p></p> </li> <li> <p>Save your changes.</p> <p>Your server.xml file should now look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n&lt;!-- Enable features --&gt;\n&lt;featureManager&gt;\n    &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n&lt;/featureManager&gt;\n\n&lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n&lt;httpEndpoint id=\"defaultHttpEndpoint\"\n              host=\"${httpEndpoint_host}\"\n              httpPort=\"${httpEndpoint_port}\"\n              httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n&lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n&lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n&lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n&lt;!-- Automatically expand WAR files and EAR files --&gt;\n&lt;applicationManager autoExpand=\"true\"/&gt;\n\n&lt;!-- Configures the application on a specified context root --&gt;\n&lt;webApplication contextRoot=\"/mysimpleweb\" location=\"simpleweb.war\" /&gt;\n\n&lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n&lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n&lt;/server&gt;\n</code></pre> <p>Now let's test if the Liberty configuration is really portable.</p> </li> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, the Liberty server gets started and listens on port 9080.</p> </li> <li> <p>Press CTRL+C to stop the server. </p> </li> <li> <p>Set the httpEnpoint_port value in the Operating System environment variable and start the Liberty server again.</p> <pre><code>export httpEndpoint_port=9081\nwlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, the Liberty server now listens on port 9081, which shows that you can now override from outside Liberty the default settings defined in the Liberty server.xml file. In a Kubernetes environment, you could for example use a config map to change configuration settings.</p> </li> <li> <p>Press CTRL+C to stop the server. Then unset the operating system variable by the following command:</p> <pre><code>unset httpEndpoint_port\n</code></pre> <p>This will restore the httpEnpoint_port value in the Operating System environment variable to 9080.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6422-use-includes-for-better-re-use-and-visibility","title":"6.4.2.2 Use includes for better re-use and visibility","text":"<p>If you configure a Liberty server with resources like datasources or JMS queues, user registry and more, your configureation file can get quite long and not easy to be read and maintained. Liberty allows to specify configuration resources to get included into the server configuration. This helps to keep control over the configuration, provides better reuse of the different configuration and allows to split the responsibility for the configuration between different teams. The developer for example could create the application specific configuration and operations the security configuration.</p> <p>You will now use includes to structure the server configuration.</p> <ol> <li> <p>In the terminal in Visual Studio Code, copy the existing server.xml file into a new file called application-config.xml.</p> <pre><code>cp wlp/usr/servers/defaultServer/server.xml wlp/usr/servers/defaultServer/application-config.xml\n</code></pre> <p></p> </li> <li> <p>Open the newly created file application-config.xml in Visual Studio Code.</p> <p></p> </li> <li> <p>Remove all configuration inside the server section other than the definition of the webApplication element.     Your application-config.xml should look like this:</p> <p></p> </li> <li> <p>Save the changes, then close the application-config.xml file.</p> </li> <li> <p>Switch to the server.xml file. Delete the webApplication element, then enter include and press CTRL+SPACE.</p> <p>The Liberty configuration assistant shows you the available elements.</p> <p></p> </li> <li> <p>Select include and the element gets generated. As value for location, enter \"application-config.xml\".</p> <p></p> </li> <li> <p>As the owner of the server.xml file, you might want to decide what happens if the file to be included does not exist or contains conflicting configuration settings. </p> <p>Go to the end of the include statement and press CTRL+SPACE. The available attributes for the include element are displayed.</p> <p></p> <p>As you can see, you could define the include file as optional, so Liberty would not throw an error if the include file is missing. </p> </li> <li> <p>Click on onConflict to see the available attributes for that options. </p> <p></p> <p>If you want to make sure, that settings in the server.xml cannot be overridden by included files, select IGNORE, otherwise use MERGE or REPLACE. </p> </li> <li> <p>Click on MERGE and your include statement should look like this:</p> <pre><code>&lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n</code></pre> <p></p> <p>You can configure multiple include files, for example one file for security-config.xml and another one for resource specific configuration settings like for databases or JMS. Now let's test if the include works.</p> </li> <li> <p>Save the server.xml file.</p> </li> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p>As you can see, the include has been found and processed, so that the application is started.</p> <p></p> <p>Keep the server running as we need it in the next section.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6423-enable-transport-security","title":"6.4.2.3 Enable transport security","text":"<p>Right now, you are not able to access Liberty via HTTPS. While the HTTPS port 9443 has been defined, SSL has not been enabled in Liberty. SSL can be enabled using the transport security feature. So the next step is to enable transport security and take a look at other related topics like keystores.</p> <ol> <li> <p>In the file server.xml, navigate the to featureManager section.</p> </li> <li> <p>Add the feature transportSecurity-1.0 to the featureManager section by add the line:</p> <pre><code>&lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n</code></pre> <p>Alternatively, you can use the configuration assistant to enable it.</p> <p></p> </li> <li> <p>Take a look at the logs and you can see that the feature is not available yet.</p> <p></p> <p>This is due to the fact that the Liberty server package generated by the developer only includes the required features (features that have been defined in the server configuration file). You will use the Liberty featureUtility tool to install the missing feature. The feature could be downloaded from a local repository if configured, in this case you will download it from a central maven repository.</p> </li> <li> <p>In the terminal window, stop the Liberty instance by pressing CTRL+C.</p> <p>Then execute the following command to install the missing feature from the maven repository:</p> <pre><code>wlp/bin/featureUtility installFeature transportSecurity-1.0\n</code></pre> <p></p> </li> <li> <p>Then start the Liberty instance again by running the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, Liberty created a certificate and placed it into the SSL key file \"wlp/usr/servers/defaultServer/resources/security/key.p12\". </p> </li> <li> <p>Liberty used the variable keystore_password to secure the keystore. As you did not define a value for the variable keystore_password, Liberty generated a password and stored it in the server.env file. In Visual Studio, open the server.env file to see the keystore password. Your password will likely look different as it has been generated randomly.</p> <p></p> <p>Close the server.env file.</p> </li> <li> <p>To make it more visible where the keystore password comes from, add the following definition to the server.xml file:</p> <pre><code>&lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n</code></pre> <p>The keyStore element also allows you to specify a different keystore location and much more.</p> <p></p> </li> <li> <p>Review your configuration in server.xml. It should look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n    &lt;!-- Enable features --&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n        &lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n    &lt;httpEndpoint id=\"defaultHttpEndpoint\"\n                host=\"${httpEndpoint_host}\"\n                httpPort=\"${httpEndpoint_port}\"\n                httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n    &lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n    &lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n    &lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n    &lt;!-- Automatically expand WAR files and EAR files --&gt;\n    &lt;applicationManager autoExpand=\"true\"/&gt;\n\n    &lt;!-- Configures the application on a specified context root --&gt;\n    &lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n\n    &lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n    &lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n    &lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n&lt;/server&gt;\n</code></pre> </li> <li> <p>Now let's see if the application is accessible via HTTPS. </p> <p>Switch to the browser and access Liberty via https://localhost:9443/mysimpleweb/helloWorld.</p> <p>You should get a security warning like this:</p> <p></p> </li> <li> <p>Click on Advanced, then scroll down and click on \"Accept the Risk and Continue\".</p> <p></p> </li> <li> <p>You should see the output of the web application.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and stop the running Liberty instance by entering CTRL+C in the terminal window. </p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6424-backup-the-generated-files","title":"6.4.2.4 Backup the generated files","text":"<p>You will re-use the generated configuration snippets and other assets in the next section of the lab. Therefore it is a good approach to create a snippet repository. Configuration snippets are typically hosted in a git repository or so, here you will use the folder ~/Student/assets. You will also use the asset directory to store the application WAR file.</p> <ol> <li> <p>Copy the generated configuration files as well as the application war file into the assets directory.</p> <pre><code>cp ~/Student/ops/test/wlp/usr/servers/defaultServer/server.* ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/application-config.xml ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/apps/simpleweb.war ~/Student/assets\n</code></pre> <p></p> </li> <li> <p>Verify that the assets directory contains the application WAR as well as the configuration files. It also contains the server package but this is no longer required.</p> <pre><code>ls ~/Student/assets\n</code></pre> <p></p> </li> <li> <p>If not already done, exit Visual Studio Code and stop any running Liberty instance.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6425-recap","title":"6.4.2.5 Recap","text":"<p>In this section of the lab, you got an impression how to create and use configuration snippets:</p> <ul> <li>used the Liberty Tools configuration assistant to create configuration snippets and to configure Liberty. </li> <li>used the Liberty featureUtility tool to install missing features.</li> <li>learned how to use variables to make the configuration more portable.</li> <li>learned how to use includes to split the configuration into multiple re-usable files.</li> <li>created a security configuration. </li> </ul> <p>Comments:</p> <ul> <li>Instead of using the Liberty Tools configuration assistant in Visual Studio Code, you could also use the product documentation and copy &amp; paste to create Liberty configuration snippets. </li> <li>You could also use the IBM migration tools to transform an existing configuration for WebSphere Traditional and other runtimes into a Liberty configuration.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#65-liberty-administration","title":"6.5 Liberty Administration","text":"<p>Now let\u2019s switch to Liberty Admistrator role and explor how to install and configure Liberty from an administrator point of view. </p> <p>A traditional administrator typically downloads the application server binaries from the IBM pages and uses a regular editor instead of an IDE like Visual Studio to configure Liberty. To download the latest version of WebSphere Liberty, the administrator can use the IBM support page https://www.ibm.com/support/pages/recommended-updates-websphere-application-server</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#651-install-liberty-from-scratch","title":"6.5.1 Install Liberty from scratch","text":"<p>The best practice for Liberty installation is to create a minimal installation by using the Liberty kernel image and install only the required features on top of it. The latest WebSphere Liberty kernel image could be downloaded from the IBM support page. For simplicity, we will use the International License Agreement for Non-Warranted Programs (ILAN) package which is available as zip file at: https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip</p> <ol> <li> <p>Open a terminal window.</p> </li> <li> <p>Create a directory to store the Liberty package. </p> <pre><code>mkdir ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Download and store the Liberty kernel image. </p> <pre><code>wget https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip -P ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Use ls command to see that the kernel image is less than 17 MB in size. The overall disk footprint will be larger depending on the required Liberty features.</p> <pre><code>ls -lrt ~/Student/ops/software/\n</code></pre> <p></p> </li> <li> <p>Create a directory for the integration environment. This will be used for the Liberty installation.</p> <pre><code>mkdir ~/Student/ops/int\ncd ~/Student/ops/int\n</code></pre> <p></p> </li> <li> <p>Use the unzip command to extract the image.</p> <pre><code>unzip ../software/wlp-kernel-24.0.0.1.zip\n</code></pre> <p></p> </li> </ol> <p>On the IBM support page, you can find next to the convenience packages like the Liberty kernel package also Liberty archives for Liberty Core, Liberty Base or Liberty ND. To install such an archive, you would use a command like:     \"java -jar ../wlp-base-all-24.0.0.1.jar --acceptLicense .\" </p> <ol> <li> <p>Get the Liberty version by running the following command:</p> <pre><code>wlp/bin/productInfo version\n</code></pre> <p></p> <p>As you can see, this is an ILAN package which can be used for evaluation as well as for production. </p> </li> <li> <p>Get the list of Liberty features that are part of the installation:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, no feature is included in the kernel image.</p> <p>Now that Liberty has been installed, the next step is to create a Liberty server instance.</p> </li> </ol> <p>As you have seen, the installation of Liberty is basically an unzip. If you  want to update Liberty later on, you can either apply a jar file or simply replace the binaries.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#652-introducing-liberty-environment-variable-configuration","title":"6.5.2   Introducing Liberty Environment Variable Configuration","text":"<p>You can customize the Liberty environment using certain specific variables to support the placement of product binaries and shared resources. The Liberty environment variables are specified using server.env file. You can use server.env file at the installation and server levels to specify environment variables such as JAVA_HOME, WLP_USER_DIR and WLP_OUTPUT_DIR. Here some of the Liberty specific variables can be used to customize the Liberty environment: (see also https://www.ibm.com/docs/en/was-liberty/nd?topic=liberty-customizing-environment) </p> <ul> <li>${wlp.install.dir} - This configuration variable has an inferred location. The installation directory is always set to the parent of the directory containing the launch script or the parent of the /lib directory containing the target jar files.</li> <li>JVM_ARGS - This environment variable can be used to specify a list of command-line options, such as system properties or -X parameters, that are passed to the JVM when the server starts. Any values that contain spaces must be enclosed in quotes.</li> <li>WLP_USER_DIR - This environment variable can be used to specify an alternative location for wlp.user.dir. This variable must be an absolute path. If this variable is specified, the runtime environment looks for shared resources and server definitions in the specified directory. WLP_USER_DIR can be specified only in the ${wlp.install.dir}/etc/server.env file because the purpose of this variable is to specify where the remaining configuration is located. After the remaining configuration is found and merged, no further configuration in a different location is expected, or supported</li> <li>WLP_OUTPUT_DIR - This environment variable can be used to specify an alternative location for server generated output such as logs, the workarea directory, and generated files. Files in the logs directory can include console.log, messages.log, and any generated FFDC files. Generated files can include server dumps that are created with the server dump or server javadump command. This variable must be an absolute path.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#653-create-a-liberty-server-instance","title":"6.5.3 Create a Liberty server instance","text":"<p>The Liberty server command supports actions for starting, stopping, creating, packaging, and dumping a Liberty server. The server create command creates a new Liberty server with the name specified. Additional detail on the server command can be found here: https://www.ibm.com/docs/en/was-liberty/base?topic=line-server-command-options </p> <p>The server create command creates by default the user directory in a sub-directory of the \\${wlp.install.dir} directory. In production, it is recommended to store the Liberty configuration in a separate directory. This can be done by setting the WLP_USER_DIR environment variable.</p> <ol> <li> <p>The etc directory as well as the server.env file are not created as part of the installation.      Use the following commands to set the variable WLP_USER_DIR to /home/techzone/Student/ops/int/wlp_usr in the server.env on runtime level.      (Keep in mind that the path in server.env must be absolute, ~/Student for example is not supported):</p> <pre><code>mkdir ~/Student/ops/int/wlp/etc\necho \"WLP_USER_DIR=/home/techzone/Student/ops/int/wlp_usr\" &gt; ~/Student/ops/int/wlp/etc/server.env\ncat ~/Student/ops/int/wlp/etc/server.env\n</code></pre> <p></p> </li> <li> <p>Run the following commands to create a new server named \"myServer\":</p> <pre><code>wlp/bin/server create myServer\n</code></pre> <p></p> <p>The new server is created in the following directory: wlp_usr/servers/myServer.</p> </li> <li> <p>Run the following command to verify the name and the path of the server instance:</p> <pre><code>wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the files and directories that have been created for myServer:</p> <pre><code>ls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Replace the generated Liberty configuration with the configuration that you stored in the assets directory.</p> <pre><code>cp ~/Student/assets/server.* wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> </ol> <p>In the Liberty setup, you now have a server.env file on two levels:          - on runtime level at ${wlp.install.dir}/etc/server.env and          - on server level at ${server.config.dir}/server.env.          If both files are present, the contents of the two files are merged; values in the server-level file take precedence over values in the runtime-level file.     </p> <ol> <li> <p>Verify that the pre-defined HTTP settings fit to your environment:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep http\n</code></pre> <p></p> </li> </ol> <p>If you want to change those port values, you could define them in the server.env file or bootstrap.properties file for example.  Alternatively you could define the related variable on the operating system level.      </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#654-install-required-features","title":"6.5.4   Install required features","text":"<p>You installed the Liberty kernel package which does not contain any features. The next step is to install the required features. Instead of looking into the Liberty configuration to determine which features are required, you can let Liberty inspect which features are missing. This can be done using the featureUtility and specifying the server you are looking for. The command by default will download the required features from the online repository. In an air-gapped environment, you could download the feature repository from the IBM support page and then specify in the featureUtility command to use a local repository. </p> <ol> <li> <p>To download and install the required features, use the following command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> <p>As you can see, the command detected that the features for servlet-6.0 and transportSecurity-1.0 were missing. It also downloads the feature ssl-1.0 as transportSecurity-1.0 depends on it.</p> </li> <li> <p>Verify that the Liberty features have been installed by using the following command:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#655-use-your-own-keystore","title":"6.5.5   Use your own keystore","text":"<p>If you do not create a keystore but enable SSL, Liberty will create a keystore with a random password. Now, you will create your own keystore with a password of choice. </p> <ol> <li> <p>Run the following command to create a keystore</p> <pre><code>wlp/bin/securityUtility createSSLCertificate --server=myServer --password=mySecret\n</code></pre> <p></p> <p>As you can see, the command uses the hostname and server name as subjectDN and encodes the password using xor. The command also allows to use aes encoding or encryption, see https://www.ibm.com/docs/en/was-liberty/base?topic=applications-securityutility-command.</p> </li> <li> <p>Our server template has already configured SSL and uses a variable to specify the keystore password. Use the following commands to review what has been configured in the server.xml file:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep trans\ncat wlp_usr/servers/myServer/server.xml | grep keystore\n</code></pre> <p></p> </li> <li> <p>The keystore password has been configured in the server.env file. Use the following command for review the settings:</p> <pre><code>cat wlp_usr/servers/myServer/server.env;echo\n</code></pre> <p></p> <p>As expected, the password used for the keystore does not match to the one in server.env and must be updated. </p> </li> <li> <p>Best practice is to store the password encoded or encrypted. In this case, you will use encoding via aes and store the password in the server.env file. To generate the encoded password, you can use the securityUtility encode command. Use the following command to update the server.env file with the encoded keystore password of \u201cmySecret\u201d, then review the result:</p> <pre><code>echo \"keystore_password=$(wlp/bin/securityUtility encode --encoding=aes mySecret)\" &gt; wlp_usr/servers/myServer/server.env\ncat wlp_usr/servers/myServer/server.env\n</code></pre> <p></p> </li> </ol> <p>The encoded keystore password is not unique, so you might have a different password as in the screenshot above.           But as long as you use the same password to be encoded, all of the different resulting strings are valid.      </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#656-verify-that-the-server-configuration-works","title":"6.5.6   Verify that the server configuration works:","text":"<ol> <li> <p>Start the server via the following command:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the Liberty server is running and listens on port 9080 and 9443. You can also see that it complains about the missing include file application-config.xml. You will fix this later.</p> </li> <li> <p>Verify that the server is accessible via HTTPs. Switch to the browser and access the web application via the URL https://localhost:9443.      As before, you will get a warning that your connection is not secure. Click on Advanced, scroll down and click on \"Accept the Risk and Continue\". Then you should be able to access the application.</p> <p></p> </li> <li> <p>Switch back to the terminal window and press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the server via the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#657-deploying-a-sample-application-to-liberty","title":"6.5.7   Deploying a sample application to Liberty","text":"<p>In the first part of this lab, you used the Liberty Tools to develop an application and configure Liberty. The application got deployed via maven under the cover. Then you used the Liberty server package which already included the deployed application. In this section of the lab, you will deploy an application to Liberty using two different techniques.</p> <p>First, you will simply copy the application WAR module into the Liberty \"dropins\" directory. The dropins directory is monitored by Liberty. As deployable units (WAR, EAR, JAR) are added to the directory, Liberty automatically deploys and starts the application on the Liberty server.  The dropins directory can be used for applications that do not require extra configuration like security role mapping. As the deployable units are removed from the dropins folder, the applications are stopped and removed from the running Liberty server.</p> <ol> <li> <p>In the terminal window start the server and use the tail -f command to view the messages.log file.</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> </li> <li> <p>Right-click on Terminal and select New Window to open a second terminal window.</p> <p></p> </li> <li> <p>In the new Terminal window, navigate to the int directory:</p> <pre><code>cd ~/Student/ops/int/\n</code></pre> </li> <li> <p>Copy the web application into the dropins directory.</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/dropins\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window where tail command is running. You can see messages that the application deployment has taken place, the application simpleweb application has been started and is available at http://rhel9-base.gym..lan:9080/simpleweb/.</p> <p>Be aware that Liberty defined the context root based on the name of the WAR file as \"/simpleweb\".</p> <p></p> </li> <li> <p>Verify that the application is accessible by opening a browser at: http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> <li> <p>In the terminal window where tail is running, you can see that the application has been accessed.</p> <p></p> </li> <li> <p>Switch back to the terminal where you entered the copy command and remove the deployed application from the dropins directory using the following command:</p> <pre><code>rm wlp_usr/servers/myServer/dropins/simpleweb.war\n</code></pre> </li> <li> <p>Switch back to the terminal window where tail is running. You can see that the application has been removed.</p> <p></p> <p>While the dropins directory can be used for applications that do not require extra configuration, deploying the application by adding it to the Liberty server configuration provides the freedom to configure the Liberty server based on the application configuration requirements.  Now you will deploy the simpleweb application by adding it to the Liberty server configuration.</p> <p>The default place for applications is: ${server.config.dir}/apps.</p> </li> <li> <p>Switch back to the terminal window not running tail. Copy the application WAR file into the apps directory by using the following command:</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/apps\nls -lrt wlp_usr/servers/myServer/apps/*.war\n</code></pre> <p></p> </li> <li> <p>To define the application in the Liberty configuration file, take a look at the application configuration that has been provided as snippet.</p> <pre><code>cat ~/Student/assets/application-config.xml\n</code></pre> <p></p> <p>As you can see, a different context root has been defined.</p> </li> <li> <p>You will add the webApplication element to the Liberty configuration by using the include concept. Review that the include element and the properties that have already been defined in the server.xml file.</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep include\n</code></pre> <p></p> </li> <li> <p>Copy the application-config.xml into the server directory.</p> <pre><code>cp ~/Student/assets/application-config.xml wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Switch back to the terminal window running tail. You can see that the application simpleweb gets deployed, this time with the context root mysimpleweb. </p> <p></p> </li> <li> <p>Finally test the application in the browser via URL http://localhost:9080/mysimpleweb/helloWorld. </p> <p></p> </li> </ol> <p>You have successfully deployed the web application into Liberty, first via dropins directory, then by adding it to the server.xml file via include.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#658-change-logging-and-tracing-by-using-configdropins","title":"6.5.8   Change logging and tracing by using ConfigDropins","text":"<p>Right now, you used the include concept to enhance the server.xml file with additional configuration files. Alternatively, you can specify additional configuration files in the configDropins directory without specifying include elements in the server.xml file. If you want to add configuration files to override anything in the erver.xml file of the server, create a configDropins/overrides directory.  In this case, you want to add/change the log level of the application server.</p> <ol> <li> <p>From the second terminal window, issue the following command to create a configDropins directory in the server directory.</p> <pre><code>mkdir -p wlp_usr/servers/myServer/configDropins/overrides\n</code></pre> <p></p> <p>Add INFO logging output to console</p> <p>Liberty provides the ability to set the logging level to any of the supported log levels defined in the documentation: https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace </p> <ul> <li>AUDIT logging enables logging of \u201cSignificant event affecting server state or resources\u201d</li> <li>INFO logging enables of \u201cGeneral information outlining overall task progress\u201d By default, the Liberty Server has the console log level set to AUDIT. In this section, you will change the level of log messages written to the console from AUDIT to INFO, which will result in additional logging messages. You will perform this activity not directly in the server.xml file but using the configDropins concept. Purpose is that you could change the log level easily on the fly and switch back to the previous level without having to manually edit a file. </li> </ul> </li> </ol> <p>Note:          It is also possible to set default logging options in the bootstrap.properties file.          If the logging options are set in the bootstrap.properties file, the logging options will take effect very early in server startup,          so it may be useful for debugging server initialization problems.     </p> <ol> <li> <p>Switch to the terminal currently running the tail on the file messages.log and press CTRL+C to stop it.</p> </li> <li> <p>Review the current console logging and you can see that it only contains messages from type AUDIT.</p> <pre><code>tail -f wlp_usr/servers/myServer/logs/console.log\n</code></pre> <p></p> </li> <li> <p>Switch to the second terminal window. Create a server configuration file to change the console log level to INFO via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\"&gt; &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>You will verify that messages of log level INFO will now be logged during the configuration of tracing.</p> <p>Update trace specification</p> <p>By default, the Liberty Server trace specification is set to \"*=info=enabled\". </p> <p>To update the trace specification, you will again use the configDropings concept.</p> </li> <li> <p>Switch to the second terminal window. Update the file configDropins/overrides/loglevel-config.xml to include a trace specification via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\" traceSpecification=\"webcontainer=all=enabled\"&gt;\n    &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, messages of log level INFO are displayed now which means that the change of the consoleLogLevel has been picked up.  The message indicates as expected, that the trace level has been set to \u201cwebcontainer=all\u201d. </p> </li> <li> <p>Switch to the second terminal window to verify that the trace has been created.</p> <pre><code>ls -lrt wlp_usr/servers/myServer/logs\n</code></pre> <p></p> </li> <li> <p>Remove the file to set the trace level back to default. </p> <pre><code>rm wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, the trace specification has been changed back to \"*=info\".</p> </li> <li> <p>Press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the Liberty instance using the following command: </p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> <li> <p>Delete the generated trace files by using  the following command:</p> <pre><code>rm wlp_usr/servers/myServer/logs/trace*.log\n</code></pre> <p>As you have seen, the logging component can be controlled through the server configuration and it is quite convenient to enable and disable tracing using configDropins.</p> <p>Configure logging in the bootstrap.properties file</p> <p>Occasionally, you might need to configure trace to diagnose a problem that occurs before the server.xml file is processed. Or you want to change the log format to something other than basic. In this case, the equivalent configuration properties can be specified in the bootstrap.properties file. </p> <p>If a configuration property is specified in both the bootstrap.properties file and the server.xml file, the value in bootstrap.properties is used until the server.xml file is processed. Then, the value in the server.xml file is used. Avoid specifying different values for the same configuration property in both the bootstrap.properties and the server.xml file.</p> <p>You will now change the log format to json. As the bootstrap.properties file does not exist, you will simpoly create it.</p> </li> <li> <p>Create a bootstrap,properties file that defines the property com.ibm.ws.logging.console.format by executing the following command: </p> <pre><code>echo 'com.ibm.ws.logging.console.format=json' &gt; wlp_usr/servers/myServer/bootstrap.properties\ncat wlp_usr/servers/myServer/bootstrap.properties\n</code></pre> <p></p> </li> <li> <p>Start the server via server run and you can see that the log format has been set to JSON.</p> <pre><code>wlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal window, press CTRL+C to stop the server.</p> </li> <li> <p>Change the log format back to default by deleting bootstrap.properties, then run the server again.</p> <pre><code>rm wlp_usr/servers/myServer/bootstrap.properties\nwlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal, press CTRL+C to stop the server.</p> <p>If you are interested into additional logging attributes, please take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace \u2003</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#659-review-the-liberty-configuration-via-liberty-rest-apis","title":"6.5.9   Review the Liberty configuration via Liberty REST APIs","text":"<p>If you use several includes or config dropins, you might run into the situation where you want to review the final setup. This can be done by using the restConnector APIs. </p> <p>Configure the admin access to the Liberty instance. </p> <ol> <li> <p>First of all, you need a strong password as the APIs provide access to sensitive data which could help a hacker to manipulate the system. Use the securityUtility to create a secure password as LibertyIsGreat.</p> <pre><code>wlp/bin/securityUtility encode --encoding=aes LibertyIsGreat\n</code></pre> <p></p> <p>As before, the encoded password is not unique, so your output will likely look different that the one above. But both are valid.</p> </li> <li> <p>Use the following commands to setup and configure the restConnector.</p> <p>a. Update the user password in the following code snippet or keep the password as is.</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;restConnector-2.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n&lt;quickStartSecurity userName=\"admin\" userPassword=\"{aes}ALCpb79MrIuO8aVUdyXKVDWNssXfX3OmL+xD2J3jWcOgLwrIq1f7/qO8tCR7JwNmcQ==\" /&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> <p></p> <p>b. As the restConnector feature is not installed so far, switch to a terminal window to install the missing features via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the Liberty instance by using the command:</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>From a browser window, access the Liberty REST APIs via the URL https://localhost:9443/ibm/api/config.      Enter Username/Password as: admin/LibertyIsGreat.</p> <p></p> </li> <li> <p>If asked, don\u2019t save the password in the browser. Your browser should display something like this:</p> <p></p> </li> <li> <p>In the browser window, press CTRL+F and enter webapp to search for webapp. You should find the related settings.</p> <p></p> </li> <li> <p>Search for logging and you get all attributes currently used for logging.</p> <p></p> </li> <li> <p>Finally stop the server and remove the restConnector configuration.</p> <pre><code>wlp/bin/server stop myServer\nrm wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> <p>For more details about the restConnector for administration, please take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=features-admin-rest-connector-20</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6510-using-the-liberty-admincenter","title":"6.5.10 Using the Liberty AdminCenter","text":"<p>The Liberty AdminCenter can be used to monitor the status of the Liberty server. You will define two users, an administrative user with the role admin and the second user with the role reader. Use again the securityUtility to create two secure passwords.</p> <ol> <li> <p>Create a password as Liberty4Admins for the admin user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Admins\n</code></pre> <p></p> </li> <li> <p>Create a password as Liberty4Readers for the second user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Readers\n</code></pre> <p></p> </li> <li> <p>Execute the following command to Configure the AdminCenter with the two users using the generated passwords generated before.</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;adminCenter-1.0&lt;/feature&gt;\n        &lt;feature&gt;websocket-2.1&lt;/feature&gt;\n    &lt;/featureManager&gt;\n    &lt;!-- Configure administrative roles. --&gt;\n    &lt;basicRegistry realm=\"basicRealm\"&gt;\n        &lt;user name=\"admin\" password=\"{xor}EzY9Oi0rJmseOzI2MSw=\" /&gt;\n        &lt;user name=\"reader\" password=\"{xor}EzY9Oi0rJmsNOj47Oi0s\" /&gt;\n    &lt;/basicRegistry&gt; \n    &lt;!-- Assign 'admin' to Administrator --&gt;\n    &lt;administrator-role&gt;\n        &lt;user&gt;admin&lt;/user&gt;\n    &lt;/administrator-role&gt;\n    &lt;reader-role&gt;\n        &lt;user&gt;reader&lt;/user&gt;\n    &lt;/reader-role&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/adminCenter-config.xml\n</code></pre> <p></p> </li> <li> <p>As the AdminCenter feature is not installed so far, switch to a terminal window to install the feature via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the server and take a look at the log:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the AdminCenter feature adminCenter-1.0 has been enabled. </p> </li> <li> <p>Access the Liberty Admin Center via URL https://localhost:9443/adminCenter, then enter the credentials for the admin user (admin/Liberty4Admins) and press Submit.</p> <p> The Admin Center Toolbox is displayed.</p> </li> <li> <p>Click on Explore to explore the Liberty status, the applications as well monitoring data and configuration.</p> <p></p> </li> <li> <p>On the tab Overview take a look at the running servers and applications. </p> <p></p> <p>You would see more than one server if a collection would have been defined.</p> </li> <li> <p>On the tab Applications you can see the running applications. As user with admin rights, you can use the menu to start, stop or restart an application.</p> <p></p> </li> <li> <p>On the tab Montor, you can see basic performance data. </p> <p></p> <p>As you can see here, the Used Heap Memory max value above 1.9 MB which indicates that max heap has not been defined. You will change that in the next section of the lab.</p> </li> <li> <p>On the tab Configure, you can see current configuration. </p> <p></p> <p>You can see a warning that remote file access is not configured. You can ignore that as you will not configure Liberty via AdminCenter.  But you could click on the link to see the configuration in design and source view.</p> </li> <li> <p>Select to log out as admin.</p> <p></p> </li> <li> <p>Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select the tab Applications. Try to click on the twisty next to the simpleweb application and you can see that you are not auithorized to start or stop an application.</p> <p></p> </li> <li> <p>Select to log out as reader.</p> <p></p> </li> <li> <p>In the terminal window, press CRTL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty server.</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6511-customizing-liberty-jvm-options","title":"6.5.11 Customizing Liberty JVM Options","text":"<p>As you have seen in the Admin Center, the Liberty value for max heap is quite large which indicates that a limit has not been defined yet. This will be done as part of this section by defining Liberty JVM options. </p> <p>The generic JVM arguments are used to configure and adjust how the JVM executes. Liberty is pre-configured with minimal settings defined. Custom generic JVM arguments such as heap settings for a Liberty server can be defined in the jvm.options file.</p> <ol> <li> <p>Create a jvm.options file with definitions for min and max heap by executing the following command:</p> <pre><code>echo '\n-Xms25m\n-Xmx500m\n' &gt; wlp_usr/servers/myServer/jvm.options\ncat wlp_usr/servers/myServer/jvm.options\n</code></pre> <p></p> </li> <li> <p>Start the server with the updated JVM options.</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>Access the Liberty Admin Center again via URL https://localhost:9443/adminCenter. Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select Monitor. Take a look at the dashboard and you can see that the Used Heap Memory Max is now 500 MB as defined in jvm.options.</p> <p> </p> </li> <li> <p>Log out from admin center.</p> </li> <li> <p>Stop the Liberty server using the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> <p>For additional information around the Liberty Admin Center, take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=center-setting-up-admin</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#6512-recap","title":"6.5.12 Recap","text":"<p>Let\u2019s recap what you did in this part of the lab: </p> <ul> <li>installed a Liberty server using the Liberty kernel image.</li> <li>used Liberty environment variables to separate the Liberty configuration from the binaries.</li> <li>created a Liberty server instance and installed missing features.</li> <li>deployed a simple web application via dropins and via server.xml.</li> <li>configured logging via server.xml and server.env.</li> <li>changed the Liberty heap size via jvm.options.</li> <li>used the REST API to see the Liberty configuration.</li> <li>used Liberty Admin Center to see monitoring data and administer Liberty apps. \u2003</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#7-lab-cleanup","title":"7 Lab Cleanup","text":"<ol> <li> <p>Once you are done, make sure that Liberty and Visual Studio Code is not running.</p> </li> <li> <p>Delete the Student folder via command:</p> <pre><code>rm -rf ~/Student\n</code></pre> </li> <li> <p>Close the browser and all terminal windows</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_YI/#summary","title":"Summary","text":"<p>In this lab, you learned how to develop a simple application as a developer, how to deployment and configure the application as an configuration opertor, and how to install and configure Liberty as an administrator.</p> <p>Congratulations!</p> <p>You have successfully completed the lab \"Liberty Getting Started\"</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/","title":"Liberty Getting Started","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#liberty-getting-started","title":"Liberty Getting Started","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#data-collection-assessments-deployment-accelerators","title":"data collection, assessments, &amp; deployment accelerators","text":"<p>Last updated: March 2024</p> <p>Duration: 90 minutes</p> <p>Need support? Contact Lars Besselmann, Kevin Postreich</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#liberty-getting-started-tasks","title":"Liberty Getting Started tasks","text":"<p>Liberty is a lightweight open framework for building fast and efficient cloud-native Java microservices. Build cloud-native apps and microservices while running only what you need. It is the most flexible server runtime available to Java developers in this solar system.</p> <ul> <li>Open Liberty is designed with both developers and application business owners in mind.<ul> <li>It delivers the latest Java APIs and integrates with the most popular Developer and Build tools.</li> <li>It has built-in innovation like zero-migration to reduce application runtime costs and delivery effort.</li> <li>WebSphere Liberty is downstream of Open Liberty so anything that works on Open Liberty works on WebSphere Liberty.</li> <li>Same Monthly Continuous Delivery Release Cycle as WebSphere Liberty</li> <li>You do not need to switch to WebSphere Liberty for commercial support</li> </ul> </li> </ul> <p>Liberty Tools is a set of intuitive developer tools for the Eclipse IDE, Visual Studio Code, and IntelliJ IDEA development environments. These tools adopt a Maven/Gradle-centric approach and enable fast, iterative cloud-native Java application development through Liberty dev mode. Liberty Tools also provides helpful, time-saving features such as code completion, hover descriptions, and configuration diagnostics for Jakarta EE APIs, MicroProfile APIs, and Liberty configuration. For more information, check out the Liberty Tools overview.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#1-introduction","title":"1. Introduction","text":"<p>In the lab, there will be different roles involved with perform different tasks using different tools. You will perform all the different roles during the lab. </p> <ul> <li> <p>You will start as an application developer and use Liberty starter and the code assistant to develop a simple web application. But don't worry, you do not have to be a developer to do this.</p> </li> <li> <p>As Liberty configuration developer, You will use the configuration assistant and concepts like includes and variables to create a portable configuration. </p> </li> <li> <p>As Liberty administrator, you will install Liberty from a kernel image, add missing features, configure loging, security and so on, will use the Liberty REST APIs to review the configuration and use Liberty Admin Center for monitoring.</p> </li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#2-objective","title":"2. Objective","text":"<p>These are the objectives in the lab:</p> <ul> <li> <p>As application developer:</p> <ul> <li>Tasks: <ul> <li>Develops the application.</li> <li>Creates a basic Liberty configuration for the application</li> </ul> </li> <li>Tools:<ul> <li>Apache Maven <ul> <li>to build the project </li> <li>to download the Open Liberty server runtime from the maven repository</li> </ul> </li> <li>Liberty Maven Plugin for inner-loop development via Liberty Dev Mode<ul> <li>to build the application war and deploy it to Liberty</li> </ul> </li> <li>Visual Studio Code <ul> <li>as IDE to build the application code</li> </ul> </li> <li>Liberty Tools plugin for Visual Studio Code<ul> <li>provides a Liberty dashboard with Dev Mode integration in the IDE</li> <li>provides Jakarta EE and MicroProfile code assistance</li> <li>provides Liberty configuration assistance</li> </ul> </li> <li>Liberty Starter Project <ul> <li>to generate a maven project for Liberty </li> </ul> </li> <li>Open Liberty / WebSphere Liberty<ul> <li>as runtime for the Java application that will be developed</li> <li>to create a server package</li> </ul> </li> </ul> </li> </ul> </li> <li> <p>As Liberty configuration developer:</p> <ul> <li>Tasks: <ul> <li>Develop portable Liberty configuration snippets using includes, variables and much more.</li> </ul> </li> <li>Tools:<ul> <li>Visual Studio Code with Liberty Tools plugin as editor with configuration assistance</li> </ul> </li> </ul> </li> <li> <p>As Liberty administrator:</p> <ul> <li>Tasks: <ul> <li>Installs Liberty</li> <li>Configures Liberty for the target application using Liberty configuration snippets</li> <li>Applies security to harden the Liberty configuration</li> <li>Configure logging using configDropins</li> <li>Review the configuration using LIberty REST APIs</li> <li>Monitor Liberty using the Admin Center</li> </ul> </li> <li>Tools:<ul> <li>Liberty server command to create a Liberty instance and start, stop or dump it</li> <li>Liberty installUtility to install missing features</li> <li>Liberty securityUtility to create a keystore or encode a password</li> <li>Liberty REST APIs and Admin Center</li> </ul> </li> </ul> </li> </ul> <p></p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#3-prerequisites","title":"3. Prerequisites","text":"<p>The following prerequisites must be completed prior to beginning this lab:</p> <ul> <li> <p>Familiarity with basic Linux commands</p> </li> <li> <p>Have internet access</p> </li> <li> <p>Have a lab environment ready</p> </li> </ul> <p></p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#4-accessing-the-environment","title":"4. Accessing the environment","text":"<p>If you are doing this lab as part of an instructor led workshop (virtual or face to face), an environment has already been provisioned for you. The instructor will provide the details for accessing the lab environment.</p> <p>Otherwise, you will need to reserve an environment for the lab. You can obtain one here. Follow the on-screen instructions for the \u201cReserve now\u201d option.</p> <p>https://techzone.ibm.com/collection/libery-getting-started-labs </p> <p>The lab environment contains one (1) Linux VM, named Workstation.</p> <p></p> <p></p> <ol> <li> <p>Access the lab environment from your web browser. </p> <p>A <code>Published Service</code> is configured to provide access to the <code>Workstation</code> VM through the noVNC interface for the lab environment.</p> <p>a. When the demo environment is provisioned, click on the <code>environment tile</code> to open its details view. </p> <p>b. Click on the <code>Published Service</code> link which will display a Directory listing </p> <p>c. Click on the <code>vnc.html</code> link to open the lab environment through the noVNC interface. </p> <p></p> <p>d. Click the <code>Connect</code> button </p> <p></p> <p>e. Enter the password as:  <code>IBMDem0s!</code>. Then click the <code>Send Credentials</code> button to access the lab environment. </p> <p>Note: That is a numeric zero in IBMDem0s!  </p> <p></p> <p></p> </li> <li> <p>If prompted to Login to the \"workstation\" VM, use the credetials below: </p> <p>The login credentials for the workstation\u201d VM is:</p> <ul> <li> <p>User ID: techzone</p> </li> <li> <p>Password: IBMDem0s!</p> </li> </ul> <p>Note: That is a numneric zero in the password</p> <p></p> <p></p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#5-tips-for-working-in-the-lab-environment","title":"5. Tips for working in the lab environment","text":"<ol> <li> <p>You can resize the viewable area using the noVNC Settings options to resize the virtual desktop to fit your screen.</p> <p>a. From the environemnt VM, click on the twisty on the noNC control pane to open the menu.  </p> <p></p> <p>b. To increase the visible area, click on <code>Settings &gt; Scaling Mode</code> and set the value to <code>Remote Resizing</code></p> <p></p> </li> <li> <p>You can copy / paste text from the lab guide into the lab environment using the clipboard in the noVNC viewer. </p> <p>a. Copy the text from the lab guide that you want to paste into the lab environment</p> <p>b. Click the <code>Clipboard</code> icon and <code>paste</code> the text into the noVNC clipboard</p> <p></p> <p>c. Paste the text into the VM, such as to a terminal window, browser window, etc. </p> <p>d. Click on the <code>clipboard</code> icon again to close the clipboard</p> </li> <li> <p>An alternative to using the noVNC Copy / Paste option, you may consider opening the lab guide in a web browser inside of the VM. Using this method, you can easily copy / paste text from the lab guide without having to use the noVNC clipboard. </p> </li> <li> <p>To switch between different windows or get access the tool bar, click on the <code>Activities</code> icon within the VM.</p> <p></p> <p>Then select from the tool bar the application that you want to open. In the lab, you will use Firefox and the terminal.</p> <p></p> </li> <li> <p>How to change the background color  In the environment, the default background for terminal windows and Visual Studio Code is dark. For the lab documentation, we changed the color to light. Feel free to keep the background in light but if you want to change it to dark, here the explanation how it was changed.</p> <ol> <li> <p>How to change the terminal background to white     Right-click into the terminal background, then select Preferences.</p> <p></p> <p>A Preferences window opens. Click on Colors, then uncheck the box for  Use colors from system theme . (If you want to get back to dark, check the box again).</p> <p></p> <p>The terminal background should switch to white.</p> <p></p> <p>Close the Preferences window.</p> </li> <li> <p>How to switch the background of Visual Studio Code from dark to light</p> <p>In a terminal Window, run the following command to start Visual Studio Code</p> <pre><code>mkdir ~/temp\ncode ~/temp\n</code></pre> <p></p> <p>Visual Studio Code opens with a dark background.  Click on  Yes, I trust the authors </p> <p></p> <p>Then select Preferences &gt; Theme &gt; Color Theme</p> <p></p> <p>Select Light</p> <p></p> <p>The tool will change to a light background, see below.</p> <p></p> <p>Close Visual Studio Code.</p> </li> </ol> </li> </ol> <p> </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6-execute-lab-tasks","title":"6. Execute Lab Tasks","text":""},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#61-verify-the-installed-software","title":"6.1 Verify the installed software","text":"<p>Open a terminal by clicking on Activities and selecting terminal.</p> <p></p> <p>The terminal window opens.</p> <p></p> <p>Check the Maven version via the following command:</p> <pre><code>mvn -version\n</code></pre> <p></p> <p>Check the Docker version via the following command:</p> <pre><code>docker -v\n</code></pre> <p></p> <p>Check the Git version via the following command:</p> <pre><code>git -v\n</code></pre> <p></p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#62-create-the-required-working-directories","title":"6.2 Create the required working directories","text":"<p>Create the Student directories and some sub-directories used in the lab:</p> <pre><code>mkdir ~/Student\nmkdir ~/Student/dev\nmkdir ~/Student/ops\nmkdir ~/Student/assets\n</code></pre>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#63-develop-a-liberty-web-application","title":"6.3 Develop a Liberty web application","text":"<p>Target of the section is to develop a simple web application for Liberty. You will use a Liberty starter application to now start from scratch and use Visual Studio Code and Liberty Tools to build the application.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#631-create-a-starter-app-project","title":"6.3.1 Create a starter app project.","text":"<p>In this scenario, you want to create a Jakarta EE 10 Web application with the name \u201esimpleweb\u201c and will use maven to build it. The fastest way to get started is to use an Open Liberty starter application which generates a project with the maven configuration as well as a basic Liberty setup.</p> <p></p> <p>The Open Liberty starter gives you a simple, quick way to get the necessary files to start building an application on Open Liberty. There is no need to search how to find out what to add to your maven or gradle build files. A simple RestApplication.java file is generated for you to start creating a REST based application. A server.xml configuration file is provided with the necessary features for the MicroProfile and Jakarta EE versions that you previously selected. </p> <ol> <li>Open a browser window by clicking on Activities and then select the Firefox browser icon.</li> </ol> <p></p> <p>If you get a pop-up that Authentication is required, enter  IBMDem0s! </p> <p></p> <ol> <li>Enter the URL https://openliberty.io/start/</li> </ol> <p>|  | If the page does not open, close the browser and open it again. |</p> <ol> <li>Change the artifact name to simpleweb, change the Java level to 17 and leave the rest as is, then click on Generate project </li> </ol> <p></p> <ol> <li>Click on Save to save the project under Downloads.</li> </ol> <p></p> <p>You will see a pop-up like the one below. Click on Got it!  to close the window.</p> <p></p> <ol> <li>Extract the file</li> </ol> <p>Click on Activities and switch to the terminal window. Move the starter project to the developer directory and extract it:</p> <pre><code>mv ~/Downloads/simpleweb.zip ~/Student/dev\nunzip ~/Student/dev/simpleweb.zip -d ~/Student/dev/simpleweb\n</code></pre> <p></p> <p>The project has been created under ~/Student/dev/simpleweb. List the content via following command:</p> <pre><code>ls -lrt ~/Student/dev/simpleweb\n</code></pre> <p></p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#632-inspect-the-starter-project-using-open-visual-studio-code","title":"6.3.2. Inspect the starter project using Open Visual Studio Code","text":"<p>Now you will use Visual Studio Code to see what has been generated as part of the starter project</p> <ol> <li> <p>From the terminal window, start Visual Studio Code</p> <p>cd ~/Student/dev/simpleweb/ code .</p> </li> </ol> <p></p> <p>Visual Studio Code will be opened.</p> <p></p> <p>Click on Yes, I trust the authors.</p> <p>If you see during the lab one of the pop-ups below or any other pop-up asking to install something, close the pop-up without installation by clicking the X.  </p> <ol> <li> <p>Investigate into the generated project:</p> <p>In Visual Studio Code, take a look at the Explorer section to see the content of the project. You can find a src and a target folder, a Dockerfile and a maven build file (pom.xml).</p> <p></p> </li> <li> <p>Take a look at the generated Maven configuration </p> <p>Click on pom.xml to see the maven pom.</p> <p>In the build section, you can find the configuration of the liberty-maven-plugin.</p> <p></p> <p>Don\u2019t worry if the version of the plugin has changed to 3.10.2 or later.</p> <p>Finally close the pom.xml.</p> </li> <li> <p>Review the generated Liberty configuration      Open src &gt;  main &gt;liberty &gt; config &gt; server.xml to see the Liberty configuration.</p> <p></p> <p>As you can see, the features for jakartaee-10 and MicroProfile-6.1 have been configured.</p> <p></p> <p>Scroll down and you can see that the http endpoint and the web application have been configured.</p> <p></p> <p>Don't close the server.xml file as you will modify it in teh next section.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#633-adjust-the-liberty-configuration","title":"6.3.3 Adjust the Liberty configuration","text":"<p>The application will not require the full Jakarta EE 10 standard but only the servlet specification. As best practice to optimize the footprint of the application runtime regarding memory and disk space and limit the number of potential vulnerabilities, define only the features that are required by the application. In this case, replace the jakartaee-10 feature with an appropriate servlet feature. </p> <ol> <li> <p>In the Visual Studio Code editor for server.xml, scroll up to the feature section.</p> </li> <li> <p>Delete the lines jakartaee-10.0 and &lt; feature&gt;MicroProfile-6.1.     Your featureManager section should now look like this:</p> <p></p> </li> <li> <p>Now you will use the Liberty configuration assistant to define the servlet feature. Place your cursor at the beginning of an empty line in the featureManager section. Then press the CTRL key and type SPACE to activate the configuration assistant. You should see something like:</p> <p></p> <p>|  | You might have to click on the arrow right to feature to get the description. |</p> </li> <li> <p>Select feature and the feature element gets added.</p> <p></p> </li> <li> <p>Use again CTRL+SPACE to get the list of available features.</p> <p></p> </li> <li> <p>Type the word servlet to see the available servlet features.</p> <p></p> </li> <li> <p>Use the arrow-down key to get the description for servlet-6.0.</p> <p></p> </li> <li> <p>Select the feature servlet-6.0 and your configuration should now look like this:</p> <p></p> </li> <li> <p>For this part of the lab, we do not define a keystore or the basic registry, so delete the generated entries.     Your configuration should now look like this:</p> <p></p> </li> <li> <p>Save the configuration by using CTRL+S.</p> </li> <li> <p>Close the file server.xml.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#634-using-liberty-dev-mode","title":"6.3.4   Using Liberty Dev Mode","text":"<p>Liberty development mode, or dev mode, allows you to develop applications with any text editor or IDE by providing hot reload and deployment, on demand testing, and debugger support. Liberty Dev Mode is enabled through Maven and Gradle projects.</p> <p>Your code is automatically compiled and deployed to your running server, making it easy to iterate on your changes.</p> <p>You can run tests on demand or even automatically so that you can get immediate feedback on your changes. You can also attach a debugger at any time to debug your running application.</p> <p></p> <p>You can use the capabilities of Liberty dev mode inside and outside of an IDE. This provides you the flexibility of choice. In a terminal window, you would use Liberty in dev mode with maven using the command mvn liberty:dev or mvn liberty:devc if you want to develop in a container. </p> <p>In the lab environment, the Liberty tools plugin has been installed into Visual Studio Code. Therefore you will use the integrated Liberty dashboard instead.\u2003</p> <ol> <li> <p>In Visual Studio Code, expand the Liberty Dashboard.</p> <p></p> </li> <li> <p>Right-click on simpleweb and then start to start the server in dev mode.</p> <p></p> </li> <li> <p>A terminal opens within Visual Studio Code and you can see that the start of the build process gets triggered.</p> <p></p> </li> <li> <p>The Liberty plugin as well as the Liberty server artifacts get downloaded, then the server is ready for testing.</p> <p></p> </li> <li> <p>Switch to the browser window and enter the URL \u201clocalhost:9080\u201d. You should see something like this:</p> <p></p> <p>|  | If you get a pop-up with \u201cAuthentication required\u201d, enter the password \u201cIBMDem0s!\u201d and click on \u201cUnlock\u201d. |</p> </li> </ol> <p>Now, let\u2019s create a simple web application.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#635-create-a-simple-web-application","title":"6.3.5 Create a simple web application","text":"<p>Now you will develop a simple web application which maiy consists of a servlet. Thanks to Liberty code assistant, you don't have to write the code on your own. </p> <ol> <li> <p>Switch to Visual Studio Code.</p> </li> <li> <p>In Visual Studio Code, expand the path to src/main/java/com/demo/rest, then right-click on demo and select New File.</p> <p></p> </li> <li> <p>Enter the name helloWorldServlet.java and press ENTER.</p> <p></p> </li> <li> <p>The file src/main/java/com/demo/helloWorldServlet.java is generated and opens in an editor.</p> <p></p> </li> <li> <p>Remove all code from the file. Then enter servlet and press CTRL+SPACE.</p> <p></p> </li> <li> <p>The code assistant offers some servlet methods for Jakarta EE. Select servlet_doget, and the required starter code gets generated.     As you can see, the fields that should be changed are highlighted.</p> <p></p> </li> <li> <p>Change the servletName to helloWorldServlet and the urlPatters to /helloWorld. The code should now look like this:</p> <p></p> </li> <li> <p>Press CTRL+S to save the code change. Take a look at the terminal output. As Liberty has been started in DevMode, the code changes are picked up automatically, the source gets compiled and Liberty gets updated.</p> <p></p> </li> <li> <p>Switch to the browser and open the URL localhost:9080/simpleweb/helloWorld. You should see the output of the created servlet.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and change the source code of the servlet response text to something like this:</p> <p></p> </li> <li> <p>Save the changes and reload the page in the browser. The output should be updated.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and close the editor for the file helloWorldServlet.java.</p> </li> </ol> <p>Final step as developer is to export the developed application as WAR file so that it can be used in the next part of the lab.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#636-export-the-developed-application-as-war-file","title":"6.3.6 Export the developed application as WAR file","text":"<p>Export the developed application so that it can be deployed to Liberty by the operations team.</p> <p>The generated maven pom by default does not generate a WAR file as it uses a \u201clooseApplication\u201d approach to optimize the inner-loop development experience. (For more details, see https://github.com/OpenLiberty/ci.maven). To change the default build behaviour, you need to adjust the pom.xml file and configure the Liberty maven plugin to generate a WAR by setting the property: false.</p> <ol> <li> <p>Switch back to Visual Studio Code.</p> </li> <li> <p>In the Liberty dashboard, right-click on the simpleweb application and select Stop (or use CTRL+C on the terminal window instead).</p> <p></p> </li> <li> <p>Verify in the terminal that Liberty has been stopped.</p> <p></p> </li> <li> <p>In Visual Studio Code, open the file pom.xml and add to the Liberty plugin configuration the lines:</p> <p> false </p> <p></p> </li> <li> <p>If you would start Liberty now again in Dev Mode, the property looseApplication would be ignored and you would see a warning like this:   </p> <p></p> <p>Therefore, you must start Liberty in run mode to generate the WAR file. This can be done by entering in the terminal window the command:</p> <pre><code>mvn liberty:run\n</code></pre> <p></p> <p>As you can see in the screenshot above, maven has built the file simpleweb.war and stored it at ~/Student/dev/simpleweb/target/simpleweb.war.</p> </li> <li> <p>Scroll down and you can see that it has been installed into the directory ~/Student/simpleweb/target/liberty/wlp/usr/servers/defaultServer/apps.</p> <p></p> </li> <li> <p>Feel free to test the application in the browser, then stop the Liberty instance by using CTRL+C.</p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#637-create-a-server-package","title":"6.3.7 Create a server package","text":"<p>For the next lab, you will need the WAR file as well as the server.xml which can be found in the created Liberty instance at:  ~/Student/simpleweb/target/liberty/wlp/usr/servers/defaultServer. More complex applications also depend on other files like utility jars, additional Liberty configuration files and JDBC drivers for example.  So instead of copying the files one by one, you could create a server package that contains all files.</p> <p>What is a server package? A server package can contain only the user directory or the full application server. The syntax of the server package command is: </p> <pre><code>server package server_name --archive=package_file_name.jar --include=all\n</code></pre> <p>With the option --include=all, the Liberty binaries as well as the usr directory get packaged. For more details and options, see https://www.ibm.com/docs/en/was-liberty/base?topic=line-packaging-liberty-server-from-command.</p> <ol> <li> <p>To create the server package, execute the following command:</p> <pre><code>~/Student/dev/simpleweb/target/liberty/wlp/bin/server package defaultServer --archive=simpleweb-serverpackage.jar --include=all\n</code></pre> <p></p> </li> <li> <p>To hand over the server package to the ops team, use the following commands: </p> <pre><code>cp ~/Student/dev/simpleweb/target/liberty/wlp/usr/servers/defaultServer/simpleweb-serverpackage.jar ~/Student/assets\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#638-recap","title":"6.3.8 Recap","text":"<p>Congratulations, you have finished the application development part.</p> <p>Let\u2019s recap what you did so far. </p> <p>You acted as developer and used Visual Studio Code and the Liberty Tools for these tasks: -   You generated a Liberty starter project including the required maven and Liberty configuration.  -   You used the Liberty Tools configuration assistant to adjust the Liberty configuration. -   You used Liberty Dev Mode for inner-loop development. -   You create a simple web application using the Jakarta EE code assistant.  -   You exported the web application as WAR file. -   You created a server package including application and Liberty binaries.</p> <p>Useful links: https://github.com/OpenLiberty/liberty-tools-vscode/blob/HEAD/docs/user-guide.md </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#64-liberty-operations","title":"6.4 Liberty operations","text":"<p>Now you will work with Liberty from an operational point of view. Development has handed over a server package to you. The server package contains all necessary configuration to run the application called simpleweb. The provided server package is typically not production-ready, as it is likely not portable between stages and does not fulfill the requirements regarding security and so on. </p> <p>In this part of the lab, you will explore how to create configuration snippets and how to administer Liberty from the command line. But first you will explore the server package and get an understanding about dynamic updates.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#641-explore-the-server-package","title":"6.4.1 Explore the server package","text":"<p>You will now explore the Liberty server package to get a better understanding how to use it, in addition you will use it to learn more about Liberty administration from the command line and Liberty dynamic updates.</p> <p>In this section, you will use the server run command instead of the server start command.     This will allow you to see the logs immediately instead of having to use a tail command.      It will also allow you to stop the Liberty server via CTRL+C</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6411-liberty-administration-from-the-command-line","title":"6.4.1.1 Liberty administration from the command line","text":"<ol> <li> <p>Extract the Liberty server package and try to run it. When asked, enter test as target directory.</p> <pre><code>cd ~/Student/ops/\njava -jar ~/Student/assets/simpleweb-serverpackage.jar\n</code></pre> <p></p> <p>The directory test/wlp got created and contains the configured Liberty instance including application. </p> </li> <li> <p>Run the following command to get the Liberty version:</p> <pre><code>test/wlp/bin/productInfo version\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the Liberty features that have been installed:</p> <pre><code>test/wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, the server package provided by the developer only contains the servlet-6.0 features which is the only feature required by the application. </p> </li> <li> <p>Run the following command to get the list of defined Liberty application servers:</p> <pre><code>test/wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Start the Liberty server instance by running the command:</p> <pre><code>test/wlp/bin/server start defaultServer\n</code></pre> <p></p> <p>This runs the server in the background and the output is written to files in the test/wlp/bin/servers/defaultServer/logs directory.</p> <p>To start the server in the foreground (so the console messages are displayed in the command window) you would use the command </p> <pre><code>test/wlp/bin/server run defaultServer.\n</code></pre> <p>You will use it later in the lab.</p> </li> <li> <p>View the Liberty server\u2019s messages.log file to see the server startup messages via the command:</p> <pre><code>cat test/wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> <p>At the beginning of the log, you can see that Open Liberty 24.0.0.2 is used. The server is started when the message \u201cThe defaultServer server is ready to run a smarter planet\u201d is displayed in the messages.log file.</p> </li> <li> <p>Test that the application is accessible via URL http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6412-liberty-dynamic-updates","title":"6.4.1.2 Liberty dynamic updates","text":"<p>Let\u2019s do a short excurse about Liberty dynamic updates. You will use Visual Studio Code to perform some minor configuration changes. For this part of the lab, you could instead also use a simple text editor like vi or gedit instead. </p> <ol> <li> <p>Open Visual Studio Code.</p> <pre><code>cd ~/Student/ops/test\ncode .\n</code></pre> <p></p> </li> <li> <p>Visual Studio Code opens. Click on Yes, if you are asked to trust the author.</p> <p></p> </li> <li> <p>In Visual Studio Code, open a terminal window</p> <p></p> </li> <li> <p>In the terminal, use the tail command to display the Liberty message log.</p> <pre><code>tail -f wlp/usr/servers/defaultServer/logs/messages.log\n</code></pre> <p></p> </li> <li> <p>Wait until the web application has been initialized</p> <p></p> </li> <li> <p>In Visual Studio Code, navigate to wlp &gt; usr &gt; servers &gt; defaultServer and open the file server.xml.</p> <p></p> </li> <li> <p>In the file server.xml, change the httpPort setting from port 9080 to port 9081</p> <p></p> <p>You can see in the terminal that the change is picked up and Liberty listens now on port 9081.</p> <p></p> </li> <li> <p>Change the webApplication contextRoot setting from \u201c/simpleweb\u201d to \u201c/mysimpleweb\u201d.</p> <p></p> <p>You can see in the log that the change is picked up.</p> <p></p> </li> <li> <p>Switch to the browser and access the application via URL localhost:9081/mysimpleweb/helloWorld.</p> <p></p> <p>As you have seen, you can change the Liberty configuration without having to restart the server.  You will explore this further later in the lab when you dynamically update the logging for example. Now let's stop the server.</p> </li> <li> <p>In the terminal, press CTRL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty instance by executing in the terminal the command:</p> <pre><code>wlp/bin/server stop defaultServer\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#642-create-liberty-configuration-snippets","title":"6.4.2 Create Liberty configuration snippets","text":"<p>There are different ways to create a Liberty server configuration. And there are often different roles involved to get the final configuration for production. The application specific configuration for example is typically created by the application developer while security related configuration is typically done by operations. Operations is typically also responsible to make the configuration portable across stages, configure logging and so on. </p> <p>You could create Liberty configuration snippets by copying over the related snippets from the product documentation and adjust them in a normal text editor. In this part of the lab, you will see that the Liberty tools plugin in Visual Studio Code can help you to speed up the create of configuration snippets as it provides configuration assistance including documentation. Let\u2019s get started.</p> <p>You will now modify the file server.xml which has been provided as part of the server package to make it more portable and re-usable.</p> <ol> <li> <p>In Visual Studio Code, open the file server.xml if you closed it previously.</p> <p></p> </li> <li> <p>Take a look at the httpEndpoint element.</p> <p></p> <p>As mentioned in the comment, the httpEndpoint is by default not accessible from a remote client.  This is good from security point of view and works fine if the client is local to the server. But if you for example use a remote load balancer or a remote HTTP server, that does not work. So there will be likely situations where you want to allow access from a remote client. To allow remote access, you must add a host attribute. You will use the Liberty Tools configuration assistant to do this.</p> </li> <li> <p>Place the cursor at the end of the line &lt;httpEndpoint id=\"defaultHttpEndpoint\" and press ENTER to add another line. </p> <p>In the new line, press CTRL+SPACE to see the available attributes. </p> <p>Use the arrow-down key and navigate to the host attribute to see the description of the attribute.</p> <p></p> </li> <li> <p>Select host and your configuration should look like this:</p> <p></p> <p>As you can see, the attribute host defaults to localhost.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6421-use-variables-for-portability","title":"6.4.2.1 Use variables for portability","text":"<p>To make the configuration portable, you will replace the fixed values for ports and host with Liberty variables. Liberty variables can be defined with a default value and overridden from inside or outside Liberty. To show the concept, you will adjust the httpEndpoint settings.</p> <p>You could use the configuration snippet below to replace the existing httpEndpoint configuration with a portable configuration. </p> <pre><code>&lt;httpEndpoint id=\"defaultHttpEndpoint\"\n              host=\"${httpEndpoint_host}\"\n              httpPort=\"${httpEndpoint_port}\"\n              httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n&lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n&lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n&lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n</code></pre> <p>Instead you will use the Liberty configuration assistant to get an understanding how you could create such a configuration snippet.</p> <ol> <li> <p>Place the cursor in an empty line under the httpEndpoint section, then enter var and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select variable, then enter as name \"httpEndpoint_port\".</p> <p></p> </li> <li> <p>Place the cursor after name=\"httpEndpoint_port\", enter a SPACE and press CTRL+SPACE.</p> <p></p> </li> <li> <p>Select defaultValue and enter as value 9080.</p> <p> </p> </li> <li> <p>Use copy and paste to create two additional variables: </p> <ul> <li>one with the name \"httpEndpoint_secure_port\" and the default value \"9443\"</li> <li>the other one with the name \"httpEndpoint_host\" and the value \"*\".</li> </ul> <p>Your configuration should now look like this:</p> <p></p> </li> <li> <p>Switch to the httpEndpoint section, remove for the attribute host the value \"localhost\", enter ${ht and press CTRL+SPACE.</p> <p></p> <p>As you can see, the variable names are offered. </p> </li> <li> <p>Select \"httpEndpoint_host\", then enter \"}\". Your configuration should look like this:</p> <p></p> </li> <li> <p>Do the same kind of change for the attributes httpPort and httpsPort. </p> <p>Your final httpEndpoint configuration should now look like this:</p> <p></p> </li> <li> <p>Save your changes.</p> </li> </ol> <p>Your server.xml file should now look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n    &lt;!-- Enable features --&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n\n    &lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n    &lt;httpEndpoint id=\"defaultHttpEndpoint\"\n                  host=\"${httpEndpoint_host}\"\n                  httpPort=\"${httpEndpoint_port}\"\n                  httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n    &lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n    &lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n    &lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n    &lt;!-- Automatically expand WAR files and EAR files --&gt;\n    &lt;applicationManager autoExpand=\"true\"/&gt;\n\n    &lt;!-- Configures the application on a specified context root --&gt;\n    &lt;webApplication contextRoot=\"/mysimpleweb\" location=\"simpleweb.war\" /&gt;\n\n    &lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n    &lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n&lt;/server&gt;\n</code></pre> <p>Now let's test if the Liberty configuration is really portable.</p> <ol> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <p>wlp/bin/server run defaultServer</p> <p></p> <p>As you can see, the Liberty server gets started and listens on port 9080.</p> </li> <li> <p>Press CTRL+C to stop the server. </p> </li> <li> <p>Set the httpEnpoint_port value in the Operating System environment variable and start the Liberty server again.</p> <pre><code>export httpEndpoint_port=9081\nwlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, the Liberty server now listens on port 9081, which shows that you can now override from outside Liberty the default settings defined in the Liberty server.xml file. In a Kubernetes environment, you could for example use a config map to change configuration settings.</p> </li> <li> <p>Press CTRL+C to stop the server. Then unset the operating system variable by the following command:</p> <pre><code>unset httpEndpoint_port\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6422-use-includes-for-better-re-use-and-visibility","title":"6.4.2.2 Use includes for better re-use and visibility","text":"<p>If you configure a Liberty server with resources like datasources or JMS queues, user registry and more, your configureation file can get quite long and not easy to be read and maintained. Liberty allows to specify configuration resources to get included into the server configuration. This helps to keep control over the configuration, provides better reuse of the different configuration and allows to split the responsibility for the configuration between different teams. The developer for example could create the application specific configuration and operations the security configuration.</p> <p>You will now use includes to structure the server configuration.</p> <ol> <li> <p>In the terminal in Visual Studio Code, copy the existing server.xml file into a new file called application-config.xml.</p> <pre><code>cp wlp/usr/servers/defaultServer/server.xml wlp/usr/servers/defaultServer/application-config.xml\n</code></pre> <p></p> </li> <li> <p>Open the newly created file application-config.xml in Visual Studio Code.</p> <p></p> </li> <li> <p>Remove all configuration inside the server section other than the definition of the webApplication element.     Your application-config.xml should look like this:</p> <p></p> </li> <li> <p>Save the changes, then close the file application-config.xml.</p> </li> <li> <p>Switch to the server.xml file. Remove the webApplication definition, then enter include and press CTRL+SPACE.</p> <p>The Liberty configuration assistant shows you the available elements.</p> <p></p> </li> <li> <p>Select include and the element gets generated. As value for location, enter \"application-config.xml\".</p> <p></p> </li> <li> <p>As the owner of the server.xml file, you might want to decide what happens if the file to be included does not exist or contains conflicting configuration settings. </p> <p>Go to the end of the include statement and press CTRL+SPACE. The available attributes for the include element are displayed.</p> <p></p> <p>As you can see, you could define the include file as optional, so Liberty would not throw an error if the include file is missing. </p> </li> <li> <p>Click on onConflict to see the available attributes for that options. </p> <p></p> <p>If you want to make sure, that settings in the server.xml cannot be overridden by included files, select IGNORE, otherwise use MERGE or REPLACE. </p> </li> <li> <p>Click on MERGE and your include statement should look like this:</p> <pre><code>&lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n</code></pre> <p></p> </li> </ol> <p>You can configure multiple include files, for example one file for security-config.xml and another one for resource specific configuration settings like for databases or JMS. Now let's test if the include works.</p> <ol> <li> <p>From the Visual Studio Code terminal, start the Liberty server instance via the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p>As you can see, the include has been found and processed, so that the application is started.</p> <p></p> </li> </ol> <p>Keep the server running as we need it in the next section.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6423-enable-transport-security","title":"6.4.2.3 Enable transport security","text":"<p>Right now, you are not able to access Liberty via HTTPS. While the HTTPS port 9443 has been defined, SSL has not been enabled in Liberty. SSL can be enabled using the transport security feature. So the next step is to enable transport security and take a look at other related topics like keystores.</p> <ol> <li> <p>In the file server.xml, navigate the to featureManager section.</p> </li> <li> <p>Add the feature transportSecurity-1.0 to the featureManager section by add the line:</p> <pre><code>&lt;feature&gt; transportSecurity-1.0 &lt;/feature&gt;\n</code></pre> <p>Alternatively, you can use the configuration assistant to enable it.</p> <p></p> </li> <li> <p>Take a look at the logs and you can see that the feature is not available yet.</p> <p></p> <p>This is due to the fact that the Liberty server package generated by the developer only includes the required features (features that have been defined in the server configuration file). You will use the Liberty featureUtility tool to install the missing feature. The feature could be downloaded from a local repository if configured, in this case you will download it from a central maven repository.</p> </li> <li> <p>In the terminal window, stop the Liberty instance by pressing CTRL+C.</p> <p>Then execute the following command to install the missing feature from the maven repository:</p> <pre><code>wlp/bin/featureUtility installFeature transportSecurity-1.0\n</code></pre> <p></p> </li> <li> <p>Then start the Liberty instance again by running the following command:</p> <pre><code>wlp/bin/server run defaultServer\n</code></pre> <p></p> <p>As you can see, Liberty created a certificate and placed it into the SSL key file \"wlp/usr/servers/defaultServer/resources/security/key.p12\". </p> </li> <li> <p>Liberty used the variable keystore_password to secure the keystore. As you did not define a value for the variable keystore_password, Liberty generated a password and stored it in the file server.env. In Visual Studio, open the file server.env to see the keystore password. Your password will likely look different as it has been generated randomly.</p> <p></p> <p>Close the file server.env.</p> </li> <li> <p>To make it more visible where the keystore password comes from, add the following definition to the server.xml file:</p> <pre><code>&lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n</code></pre> <p>The keyStore element also allows you to specify a different keystore location and much more.</p> <p></p> </li> <li> <p>Review your configuration in server.xml. It should look like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;server description=\"new server\"&gt;\n\n    &lt;!-- Enable features --&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;servlet-6.0&lt;/feature&gt;\n        &lt;feature&gt;transportSecurity-1.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;!-- To access this server from a remote client add a host attribute to the following element, e.g. host=\"*\" --&gt;\n    &lt;httpEndpoint id=\"defaultHttpEndpoint\"\n                host=\"${httpEndpoint_host}\"\n                httpPort=\"${httpEndpoint_port}\"\n                httpsPort=\"${httpEndpoint_secure_port}\" /&gt;\n    &lt;variable name=\"httpEndpoint_host\" defaultValue=\"*\"/&gt;\n    &lt;variable name=\"httpEndpoint_port\" defaultValue=\"9080\"/&gt;\n    &lt;variable name=\"httpEndpoint_secure_port\" defaultValue=\"9443\"/&gt;\n\n    &lt;!-- Automatically expand WAR files and EAR files --&gt;\n    &lt;applicationManager autoExpand=\"true\"/&gt;\n\n    &lt;!-- Configures the application on a specified context root --&gt;\n    &lt;include location=\"application-config.xml\" onConflict=\"MERGE\"/&gt;\n\n    &lt;!-- Default SSL configuration enables trust for default certificates from the Java runtime --&gt;\n    &lt;ssl id=\"defaultSSLConfig\" trustDefaultCerts=\"true\" /&gt;\n    &lt;keyStore id=\"defaultKeyStore\" password=\"${keystore_password}\" /&gt;\n&lt;/server&gt;\n</code></pre> </li> <li> <p>Now let's see if the application is accessible via HTTPS. </p> <p>Switch to the browser and access Liberty via https://localhost:9443/mysimpleweb/helloWorld.</p> <p>You should get a security warning like this:</p> <p></p> </li> <li> <p>Click on Advanced, then scroll down and click on \"Accept the Risk and Continue\".</p> <p></p> </li> <li> <p>You should see the output of the web application.</p> <p></p> </li> <li> <p>Switch back to Visual Studio Code and stop the running Liberty instance by entering CTRL+C in the terminal window. </p> </li> <li> <p>Close Visual Studio Code.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6424-backup-the-generated-files","title":"6.4.2.4 Backup the generated files","text":"<p>You will re-use the generated configuration snippets and other assets in the next section of the lab. Therefore it is a good approach to create a snippet repository. Configuration snippets are typically hosted in a git repository or so, here you will use the folder ~/Student/assets. You will also use the asset directory to store the application WAR file.</p> <ol> <li> <p>Copy the generated configuration files as well as the application war file into the assets directory.</p> <pre><code>cp ~/Student/ops/test/wlp/usr/servers/defaultServer/server.* ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/application-config.xml ~/Student/assets\n\ncp ~/Student/ops/test/wlp/usr/servers/defaultServer/apps/simpleweb.war ~/Student/assets\n</code></pre> <p></p> </li> <li> <p>Verify that the assets directory contains the application WAR as well as the configuration files. It also contains the server package but this is no longer required.</p> <pre><code>ls ~/Student/assets\n</code></pre> <p></p> </li> <li> <p>If not already done, exit Visual Studio Code and stop any running Liberty instance.</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6425-recap","title":"6.4.2.5 Recap","text":"<p>In this section of the lab, you got an impression how to create and use configuration snippets:</p> <ul> <li>You used the Liberty Tools configuration assistant to create configuration snippets and to configure Liberty. </li> <li>You used the Liberty featureUtility tool to install missing features.</li> <li>You learned how to use variables to make the configuration more portable.</li> <li>You learned how to use includes to split the configuration into multiple re-usable files.</li> <li>You created a security configuration. </li> </ul> <p>Comments: - Instead of using the Liberty Tools configuration assistant in Visual Studio Code, you could also use the product documentation and copy &amp; paste to create Liberty configuration snippets.  - You could also use the IBM migration tools to transform an existing configuration for WebSphere Traditional and other runtimes into a Liberty configuration.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#643-install-and-configure-liberty-from-the-command-line","title":"6.4.3 Install and configure Liberty from the command line.","text":"<p>Now let\u2019s install and configure Liberty from an administrator point of view. </p> <p>A traditional administrator typically downloads the application server binaries from the IBM pages and uses a regular editor instead of an IDE like Visual Studio to configure Liberty. To download the latest version of WebSphere Liberty, the administrator can use the IBM support page https://www.ibm.com/support/pages/recommended-updates-websphere-application-server</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6431-install-liberty-from-scratch","title":"6.4.3.1 Install Liberty from scratch","text":"<p>Best practice is to create a minimal installation by using the Liberty kernel image and install only the required features on top of it. The latest WebSphere Liberty kernel image could be downloaded from the IBM support page. For simplicity, we will use the ILAN package which is available as zip file at: https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip</p> <ol> <li> <p>Open a terminal window.</p> </li> <li> <p>Create a directory to store the Liberty package. </p> <pre><code>mkdir ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Download and store the Liberty kernel image. </p> <pre><code>wget https://public.dhe.ibm.com/ibmdl/export/pub/software/websphere/wasdev/downloads/wlp/24.0.0.1/wlp-kernel-24.0.0.1.zip -P ~/Student/ops/software\n</code></pre> <p></p> </li> <li> <p>Use ls to see that the kernel image is less than 17 MB in size. The overall disk footprint will be larger depending on the required Liberty features.</p> <p></p> </li> <li> <p>Create a directory for the integration environment. This will be used for the Liberty installation.</p> <pre><code>mkdir ~/Student/ops/int\ncd ~/Student/ops/int\n</code></pre> <p></p> </li> <li> <p>Use the unzip command to extract the image.</p> <pre><code>unzip ../software/wlp-kernel-24.0.0.1.zip\n</code></pre> <p></p> </li> </ol> <p>On the IBM support page, you can find next to the convenience packages like the Liberty kernel package also Liberty archives for Liberty Core, Liberty Base or Liberty ND. To install such an archive, you would use a command like:  \"java -jar ../wlp-base-all-24.0.0.1.jar --acceptLicense .\"</p> <ol> <li> <p>Get the Liberty version by running the following command:</p> <pre><code>wlp/bin/productInfo version\n</code></pre> <p></p> <p>As you can see, this is an ILAN package which can be used for evaluation as well as for production. </p> </li> <li> <p>Get the list of Liberty features that are part of the installation:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> <p>As you can see, no feature is included in the kernel image.</p> </li> </ol> <p>Now that Liberty has been installed, the next step is to create a Liberty server instance.</p> <p>As you have seen, the installation of Liberty is basically an unzip.      If you want to update Liberty later on, you can either apply a jar file or simply replace the binaries.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6432-introducing-liberty-environment-variable-configuration","title":"6.4.3.2 Introducing Liberty Environment Variable Configuration","text":"<p>You can customize the Liberty environment using certain specific variables to support the placement of product binaries and shared resources. The Liberty environment variables are specified using server.env file. You can use server.env file at the installation and server levels to specify environment variables such as JAVA_HOME, WLP_USER_DIR and WLP_OUTPUT_DIR. Here some of the Liberty specific variables can be used to customize the Liberty environment: (see also https://www.ibm.com/docs/en/was-liberty/nd?topic=liberty-customizing-environment) </p> <ul> <li>${wlp.install.dir}      This configuration variable has an inferred location. The installation directory is always set to the parent of the directory containing the launch script or the parent of the /lib directory containing the target jar files.</li> <li>JVM_ARGS      This environment variable can be used to specify a list of command-line options, such as system properties or -X parameters, that are passed to the JVM when the server starts. Any values that contain spaces must be enclosed in quotes.</li> <li>WLP_USER_DIR      This environment variable can be used to specify an alternative location for wlp.user.dir. This variable must be an absolute path. If this variable is specified, the runtime environment looks for shared resources and server definitions in the specified directory.   WLP_USER_DIR can be specified only in the ${wlp.install.dir}/etc/server.env file because the purpose of this variable is to specify where the remaining configuration is located. After the remaining configuration is found and merged, no further configuration in a different location is expected, or supported</li> <li>WLP_OUTPUT_DIR      This environment variable can be used to specify an alternative location for server generated output such as logs, the workarea directory, and generated files. Files in the logs directory can include console.log, messages.log, and any generated FFDC files. Generated files can include server dumps that are created with the server dump or server javadump command. This variable must be an absolute path.</li> </ul>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6433-create-a-liberty-server-instance","title":"6.4.3.3 Create a Liberty server instance","text":"<p>The Liberty server command supports actions for starting, stopping, creating, packaging, and dumping a Liberty server. The server create command creates a new Liberty server with the name specified. Additional detail on the server command can be found here: https://www.ibm.com/docs/en/was-liberty/base?topic=line-server-command-options </p> <p>The server create command creates by default the user directory in a sub-directory of the ${wlp.install.dir} directory. In production, it is recommended to store the Liberty configuration in a separate directory. This can be done by setting the WLP_USER_DIR environment variable.</p> <ol> <li> <p>The etc directory as well as the server.env file are not created as part of the installation.      Use the following commands to set the variable WLP_USER_DIR to \"/home/techzone/Student/ops/int/wlp_usr\" in the server.env on runtime level.      (Keep in mind that the path in server.env must be absolute, ~/Student for example is not supported):</p> <pre><code>mkdir ~/Student/ops/int/wlp/etc\necho \"WLP_USER_DIR=/home/techzone/Student/ops/int/wlp_usr\" &gt; ~/Student/ops/int/wlp/etc/server.env\ncat ~/Student/ops/int/wlp/etc/server.env\n</code></pre> <p></p> </li> <li> <p>Run the following commands to create a new server named \"myServer\":</p> <pre><code>wlp/bin/server create myServer\n</code></pre> <p></p> </li> <li> <p>The new server is created in the following directory: wlp_usr/servers/myServer     Run the following command to verify the name and the path of the server instance:</p> <pre><code>wlp/bin/server list\n</code></pre> <p></p> </li> <li> <p>Run the following command to list the files and directories that have been created for myServer:</p> <pre><code>ls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Replace the generated Liberty configuration with the configuration that you stored in the assets directory.</p> <pre><code>cp ~/Student/assets/server.* wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> </ol> <p>In the Liberty setup, you now have a server.env file on two levels:          - on runtime level at ${wlp.install.dir}/etc/server.env and          - on server level at ${server.config.dir}/server.env.          If both files are present, the contents of the two files are merged; values in the server-level file take precedence over values in the runtime-level file.     </p> <ol> <li> <p>Verify that the pre-defined HTTP settings fit to your environment:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep http\n</code></pre> <p></p> </li> </ol> <p>If you want to change those port values, you could define them in the server.env file or bootstrap.properties file for example.  Alternatively you could define the related variable on the operating system level.      </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6434-install-required-features","title":"6.4.3.4 Install required features","text":"<p>You installed the Liberty kernel package which does not contain any features. The next step is to install the required features. Instead of looking into the Liberty configuration to determine which features are required, you can let Liberty inspect which features are missing. This can be done using the featureUtility and specifying the server you are looking for. The command by default will download the required features from the online repository. In an air-gapped environment, you could download the feature repository from the IBM support page and then specify in the featureUtility command to use a local repository. </p> <ol> <li> <p>To download and install the required features, use the following command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> <p>As you can see, the command detected that the features for servlet-6.0 and transportSecurity-1.0 were missing. It also downloads the feature ssl-1.0 as transportSecurity-1.0 depends on it.</p> </li> <li> <p>Verify that the Liberty features have been installed by using the following command:</p> <pre><code>wlp/bin/productInfo featureInfo\n</code></pre> <p></p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6435-use-your-own-keystore","title":"6.4.3.5 Use your own keystore","text":"<p>If you do not create a keystore but enable SSL, Liberty will create a keystore with a random password. Now, you will create your own keystore with a password of choice. </p> <ol> <li> <p>Run the following command to create a keystore</p> <pre><code>wlp/bin/securityUtility createSSLCertificate --server=myServer --password=mySecret\n</code></pre> <p></p> <p>As you can see, the command uses the hostname and server name as subjectDN and encodes the password using xor. The command also allows to use aes encoding or encryption, see https://www.ibm.com/docs/en/was-liberty/base?topic=applications-securityutility-command.</p> </li> <li> <p>Our server template has already configured SSL and uses a variable to specify the keystore password. Use the following commands to review what has been configured in the server.xml file:</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep trans\ncat wlp_usr/servers/myServer/server.xml | grep keystore\n</code></pre> <p></p> </li> <li> <p>The keystore password has been configured in the server.env file. Use the following command for review the settings:</p> <pre><code>cat wlp_usr/servers/myServer/server.env;echo\n</code></pre> <p></p> <p>As expected, the password used for the keystore does not match to the one in server.env and must be updated. </p> </li> <li> <p>Best practice is to store the password encoded or encrypted. In this case, you will use encoding via aes and store the password in the server.env file. To generate the encoded password, you can use the securityUtility encode command. Use the following command to update the server.env file with the encoded keystore password of \u201cmySecret\u201d, then review the result:</p> <pre><code>echo \"keystore_password=$(wlp/bin/securityUtility encode --encoding=aes mySecret)\" &gt; wlp_usr/servers/myServer/server.env\ncat wlp_usr/servers/myServer/server.env\n</code></pre> <p></p> </li> </ol> <p>The encoded keystore password is not unique, so you might have a different password as in the screenshot above.           But as long as you use the same password to be encoded, all of the different resulting strings are valid.      </p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6436-verify-that-the-server-configuration-works","title":"6.4.3.6 Verify that the server configuration works:","text":"<ol> <li> <p>Start the server via the following command:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the Liberty server is running and listens on port 9080 and 9443. You can also see that it complains about the missing include file application-config.xml. You will fix this later.</p> </li> <li> <p>Verify that the server is accessible via HTTPs. Switch to the browser and access the web application via the URL https://localhost:9443.      As before, you will get a warning that your connection is not secure. Click on Advanced, scroll down and click on \"Accept the Risk and Continue\". Then you should be able to access the application.</p> <p></p> </li> <li> <p>Switch back to the terminal window and press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the server via the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6437-deploying-a-sample-application-to-liberty","title":"6.4.3.7 Deploying a sample application to Liberty","text":"<p>In the first part of this lab, you used the Liberty Tools to develop an application and configure Liberty. The application got deployed via maven under the cover. Then you used the Liberty server package which already included the deployed application. In this section of the lab, you will deploy an application to Liberty using two different techniques.</p> <p>First, you will simply copy the application WAR module into the Liberty \"dropins\" directory. The dropins directory is monitored by Liberty. As deployable units (WAR, EAR, JAR) are added to the directory, Liberty automatically deploys and starts the application on the Liberty server.  The dropins directory can be used for applications that do not require extra configuration like security role mapping. As the deployable units are removed from the dropins folder, the applications are stopped and removed from the running Liberty server. Now, give it a try.</p> <ol> <li> <p>In the terminal window start the server and use the tail -f command to view the messages.log file.</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> </li> <li> <p>Right-click on Terminal and select New Window to open a second terminal window.</p> <p></p> </li> <li> <p>In the new Terminal window, navigate to the int directory:</p> <pre><code>cd ~/Student/ops/int/\n</code></pre> </li> <li> <p>Copy the web application into the dropins directory.</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/dropins\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window where tail command is running. You can see messages that the application deployment has taken place, the application simpleweb application has been started and is available at http://rhel9-base.gym..lan:9080/simpleweb/.       Be aware that Liberty defined the context root based on the name of the WAR file as \"/simpleweb\".</p> <p></p> </li> <li> <p>Verify that the application is accessible by opening a browser at: http://localhost:9080/simpleweb/helloWorld</p> <p></p> </li> <li> <p>In the terminal window where tail is running, you can see that the application has been accessed.</p> <p></p> </li> <li> <p>Switch back to the terminal where you entered the copy command and remove the deployed application from the dropins directory using the following command:</p> <pre><code>rm wlp_usr/servers/myServer/dropins/simpleweb.war\n</code></pre> </li> <li> <p>Switch back to the terminal window where tail is running. You can see that the application has been removed.</p> <p></p> </li> </ol> <p>While the dropins directory can be used for applications that do not require extra configuration, deploying the application by adding it to the Liberty server configuration provides the freedom to configure the Liberty server based on the application configuration requirements.  Now you will deploy the simpleweb application by adding it to the Liberty server configuration.  The default place for applications is: ${server.config.dir}/apps.</p> <ol> <li> <p>Switch back to the terminal window not running tail. Copy the application WAR file into the apps directory by using the following command:</p> <pre><code>cp ~/Student/assets/simpleweb.war wlp_usr/servers/myServer/apps\nls -lrt wlp_usr/servers/myServer/apps/*.war\n</code></pre> <p></p> </li> <li> <p>To define the application in the Liberty configuration file, take a look at the application configuration that has been provided as snippet.</p> <pre><code>cat ~/Student/assets/application-config.xml\n</code></pre> <p></p> <p>As you can see, a different context root has been defined.</p> </li> <li> <p>You will add the webApplication element to the Liberty configuration by using the include concept. Review that the include element and the properties that have already been defined in the server.xml file.</p> <pre><code>cat wlp_usr/servers/myServer/server.xml | grep include\n</code></pre> <p></p> </li> <li> <p>Copy the application-config.xml into the server directory.</p> <pre><code>cp ~/Student/assets/application-config.xml wlp_usr/servers/myServer\nls -lrt wlp_usr/servers/myServer\n</code></pre> <p></p> </li> <li> <p>Switch back to the terminal window running tail. You can see that the application simpleweb gets deployed, this time with the context root mysimpleweb. </p> <p></p> </li> <li> <p>Finally test the application in the browser via URL http://localhost:9080/mysimpleweb/helloWorld. </p> <p></p> </li> </ol> <p>You have successfully deployed the web application into Liberty, first via dropins directory, then by adding it to the server.xml file via include.</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6438-change-logging-and-tracing-by-using-configdropins","title":"6.4.3.8 Change logging and tracing by using ConfigDropins","text":"<p>Right now, you used the include concept to enhance the server.xml file with additional configuration files. Alternatively, you can specify additional configuration files in the configDropins directory without specifying include elements in the server.xml file. If you want to add configuration files to override anything in the server.xml file of the server, create a configDropins/overrides directory.  In this case, you want to add/change the log level of the application server.</p> <ol> <li> <p>Create a configDropins directory in the server directory.</p> <pre><code>mkdir -p wlp_usr/servers/myServer/configDropins/overrides\n</code></pre> <p></p> </li> </ol> <p>Add INFO logging output to console</p> <p>Liberty provides the ability to set the logging level to any of the supported log levels defined in the documentation: https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace  - AUDIT logging enables logging of \u201cSignificant event affecting server state or resources\u201d - INFO logging enables of \u201cGeneral information outlining overall task progress\u201d By default, the Liberty Server has the console log level set to AUDIT. In this section, you will change the level of log messages written to the console from AUDIT to INFO, which will result in additional logging messages. You will perform this activity not directly in the server.xml file but using the configDropins concept. Purpose is that you could change the log level easily on the fly and switch back to the previous level without having to manually edit a file. </p> <p>Note:          It is also possible to set default logging options in the bootstrap.properties file.          If the logging options are set in the bootstrap.properties file, the logging options will take effect very early in server startup,          so it may be useful for debugging server initialization problems.     </p> <ol> <li> <p>Switch to the terminal currently running the tail on the file messages.log and press CTRL+C to stop it.</p> </li> <li> <p>Review the current console logging and you can see that it only contains messages from type AUDIT.</p> <pre><code>tail -f wlp_usr/servers/myServer/logs/console.log\n</code></pre> <p></p> </li> <li> <p>Switch to the second terminal window. Create a server configuration file to change the console log level to INFO via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\"&gt; &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>You will verify that messages of log level INFO will now be logged during the configuration of tracing.</p> </li> </ol> <p>Update trace specification</p> <p>By default, the Liberty Server trace specification is set to \"*=info=enabled\". </p> <p>To update the trace specification, you will again use the configDropings concept.</p> <ol> <li> <p>Switch to the second terminal window. Update the file configDropins/overrides/loglevel-config.xml to include a trace specification via the following command:</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;logging consoleLogLevel=\"INFO\" traceSpecification=\"webcontainer=all=enabled\"&gt;\n    &lt;/logging&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> <p></p> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, messages of log level INFO are displayed now which means that the change of the consoleLogLevel has been picked up.  The message indicates as expected, that the trace level has been set to \u201cwebcontainer=all\u201d. </p> </li> <li> <p>Switch to the second terminal window to verify that the trace has been created.</p> <pre><code>ls -lrt wlp_usr/servers/myServer/logs\n</code></pre> <p></p> </li> <li> <p>Remove the file to set the trace level back to default. </p> <pre><code>rm wlp_usr/servers/myServer/configDropins/overrides/loglevel-config.xml\n</code></pre> </li> <li> <p>Switch to the terminal window running tail to verify, that the new file has been detected.</p> <p></p> <p>As you can see, the trace specification has been changed back to \"*=info\".</p> </li> <li> <p>Press CTRL+C in the terminal window to stop the tail command.</p> </li> <li> <p>Stop the Liberty instance using the following command: </p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> <li> <p>Delete the generated trace files by using  the following command:</p> <pre><code>rm wlp_usr/servers/myServer/logs/trace*.log\n</code></pre> </li> </ol> <p>As you have seen, the logging component can be controlled through the server configuration and it is quite convenient to enable and disable tracing using configDropins.</p> <p>Configure logging in the bootstrap.properties file</p> <p>Occasionally, you might need to configure trace to diagnose a problem that occurs before the server.xml file is processed. Or you want to change the log format to something other than basic. In this case, the equivalent configuration properties can be specified in the bootstrap.properties file. </p> <p>If a configuration property is specified in both the bootstrap.properties file and the server.xml file, the value in bootstrap.properties is used until the server.xml file is processed. Then, the value in the server.xml file is used. Avoid specifying different values for the same configuration property in both the bootstrap.properties and the server.xml file.</p> <p>You will now change the log format to json. As the bootstrap.properties file does not exist, you will simpoly create it.</p> <ol> <li> <p>Create a bootstrap,properties file that defines the property com.ibm.ws.logging.console.format by executing the following command: </p> <p>echo 'com.ibm.ws.logging.console.format=json' &gt; wlp_usr/servers/myServer/bootstrap.properties cat wlp_usr/servers/myServer/bootstrap.properties</p> <p></p> </li> <li> <p>Start the server via server run and you can see that the log format has been set to JSON.</p> <pre><code>wlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal window, press CTRL+C to stop the server.</p> </li> <li> <p>Change the log format back to default by deleting bootstrap.properties, then run the server again.</p> <pre><code>rm wlp_usr/servers/myServer/bootstrap.properties\nwlp/bin/server run myServer\n</code></pre> <p></p> </li> <li> <p>In the terminal, press CTRL+C to stop the server.</p> </li> </ol> <p>If you are interested into additional logging attributes, please take a look at https://www.ibm.com/docs/en/was-liberty/base?topic=liberty-logging-trace \u2003</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#6439-review-the-liberty-configuration-via-liberty-rest-apis","title":"6.4.3.9 Review the Liberty configuration via Liberty REST APIs","text":"<p>If you use several includes or config dropins, you might run into the situation where you want to review the final setup.  This can be done by using the restConnector APIs. </p> <p>Configure the admin access to the Liberty instance. </p> <ol> <li> <p>First of all, you need a strong password as the APIs provide access to sensitive data which could help a hacker to manipulate the system. Use the securityUtility to create a secure password.</p> <pre><code>wlp/bin/securityUtility encode --encoding=aes LibertyIsGreat\n</code></pre> <p></p> <p>As before, the encoded password is not unique, so your output will likely look different that the one above. But both are valid.</p> </li> <li> <p>Use the following command to configure the restConnector. (Update the user password in the following code snippet or keep the password as is).</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;restConnector-2.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n&lt;quickStartSecurity userName=\"admin\" userPassword=\"{aes}ALCpb79MrIuO8aVUdyXKVDWNssXfX3OmL+xD2J3jWcOgLwrIq1f7/qO8tCR7JwNmcQ==\" /&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> <p></p> </li> <li> <p>As the restConnector feature is not installed so far, switch to a terminal window to install the missing features via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the Liberty instance by using the command:</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>From a browser window, access the Liberty REST APIs via the URL https://localhost:9443/ibm/api/config.      Enter as Username admin and as password LibertyIsGreat.</p> <p></p> </li> <li> <p>If asked, don\u2019t save the password in the browser. Your browser should display something like this:</p> <p></p> </li> <li> <p>In the browser window, press CTRL+F and enter webapp to search for webapp.          You should find the related settings.</p> <p></p> </li> <li> <p>Search for logging and you get all attributes currently used for logging.</p> <p></p> </li> <li> <p>Finally stop the server and remove the restConnector configuration.</p> <pre><code>wlp/bin/server stop myServer\nrm wlp_usr/servers/myServer/configDropins/overrides/rest-config.xml\n</code></pre> </li> </ol> <p>For more details about the restConnector for administration, please take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=features-admin-rest-connector-20</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#64310-using-the-liberty-admincenter","title":"6.4.3.10 Using the Liberty AdminCenter","text":"<p>The Liberty AdminCenter can be used to monitor the status of the Liberty server. You will define two users, an administrative user with the role admin and the second user with the role reader. Use again the securityUtility to create two secure passwords.</p> <ol> <li> <p>Create a password for the admin user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Admins\n</code></pre> <p></p> </li> <li> <p>Create a password for the second user.</p> <pre><code>    wlp/bin/securityUtility encode --encoding=xor Liberty4Readers\n</code></pre> <p></p> </li> <li> <p>Execute the following command to Configure the AdminCenter with the two users using the generated passwords generated before.</p> <pre><code>echo '\n&lt;server&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;adminCenter-1.0&lt;/feature&gt;\n        &lt;feature&gt;websocket-2.1&lt;/feature&gt;\n    &lt;/featureManager&gt;\n    &lt;!-- Configure administrative roles. --&gt;\n    &lt;basicRegistry realm=\"basicRealm\"&gt;\n        &lt;user name=\"admin\" password=\"{xor}EzY9Oi0rJmseOzI2MSw=\" /&gt;\n        &lt;user name=\"reader\" password=\"{xor}EzY9Oi0rJmsNOj47Oi0s\" /&gt;\n    &lt;/basicRegistry&gt; \n    &lt;!-- Assign 'admin' to Administrator --&gt;\n    &lt;administrator-role&gt;\n        &lt;user&gt;admin&lt;/user&gt;\n    &lt;/administrator-role&gt;\n    &lt;reader-role&gt;\n        &lt;user&gt;reader&lt;/user&gt;\n    &lt;/reader-role&gt;\n&lt;/server&gt;\n' &gt; wlp_usr/servers/myServer/configDropins/overrides/adminCenter-config.xml\n</code></pre> <p></p> </li> <li> <p>As the AdminCenter feature is not installed so far, switch to a terminal window to install the feature via command:</p> <pre><code>wlp/bin/featureUtility installServerFeatures myServer\n</code></pre> <p></p> </li> <li> <p>Start the server and take a look at the log:</p> <pre><code>wlp/bin/server start myServer\ntail -f wlp_usr/servers/myServer/logs/messages.log\n</code></pre> <p></p> <p>As you can see, the admin-center feature has been enabled. </p> </li> <li> <p>Access the Liberty Admin Center via URL https://localhost:9443/adminCenter, then enter the credentials for the admin user (admin/Liberty4Admins) and press Submit.</p> <p></p> </li> <li> <p>The Admin Center Toolbox is displayed. Click on Explore to explore the Liberty status, the applications as well monitoring data and configuration.</p> <p></p> </li> <li> <p>On the tab Overview take a look at the running servers and applications. </p> <p></p> <p>You would see more than one server if a collection would have been defined.</p> </li> <li> <p>On the tab Applications you can see the running applications.      As user with admin rights, you can use the menu to start, stop or restart an application.</p> <p></p> </li> <li> <p>On the tab Montor, you can see basic performance data. </p> <p></p> <p>As you can see here, the Used Heap Memory max value above 1.9 MB which indicates that max heap has not been defined. You will change that in the next section of the lab.</p> </li> <li> <p>On the tab Configure, you can see current configuration. </p> <p></p> <p>You can see a warning that remote file access is not configured. You can ignore that as you will not configure Liberty via AdminCenter.  But you could click on the link to see the configuration in design and source view.</p> </li> <li> <p>Select to log out as admin.</p> <p></p> </li> <li> <p>Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select the tab Applications.      Try to click on the twisty next to the simpleweb application and you can see that you are not auithorized to start or stop an application.</p> <p></p> </li> <li> <p>Select to log out as reader.</p> <p></p> </li> <li> <p>In the terminal window, press CRTL+C to stop the tail command. </p> </li> <li> <p>Stop the Liberty server.</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#64311-customizing-liberty-jvm-options","title":"6.4.3.11 Customizing Liberty JVM Options","text":"<p>As you have seen in the Admin Center, the Liberty value for max heap is quite large which indicates that a limit has not been defined yet. This will be done as part of this section by defining Liberty JVM options. </p> <p>The generic JVM arguments are used to configure and adjust how the JVM executes. Liberty is pre-configured with minimal settings defined. Custom generic JVM arguments such as heap settings for a Liberty server can be defined in the jvm.options file.</p> <ol> <li> <p>Create a jvm.options file with definitions for min and max heap by executing the following command:</p> <pre><code>echo '\n-Xms25m\n-Xmx500m\n' &gt; wlp_usr/servers/myServer/jvm.options\ncat wlp_usr/servers/myServer/jvm.options\n</code></pre> <p></p> </li> <li> <p>Start the server with the updated JVM options.</p> <pre><code>wlp/bin/server start myServer\n</code></pre> </li> <li> <p>Access the Liberty Admin Center again via URL https://localhost:9443/adminCenter.      Log in as user reader with password Liberty4Readers.</p> <p></p> </li> <li> <p>Click on Explore, then select Monitor.      Take a look at the dashboard and you can see, that the Used Heap Memory Max is now 500 MB as defined in jvm.options.</p> <p></p> </li> </ol> <p> </p> <ol> <li> <p>Log out from admin center.</p> </li> <li> <p>Stop the Liberty server using the following command:</p> <pre><code>wlp/bin/server stop myServer\n</code></pre> </li> </ol> <p>For additional information around the Liberty Admin Center, take a look at: https://www.ibm.com/docs/en/was-liberty/base?topic=center-setting-up-admin</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#64312-recap","title":"6.4.3.12 Recap","text":"<ol> <li>Recap</li> </ol> <p>Let\u2019s recap what you did in this part of the lab:  - You installed a Liberty server using the Liberty kernel image. - You used Liberty environment variables to separate the Liberty configuration from the binaries. - You created a Liberty server instance and installed missing features. - You deployed a simple web application via dropins and via server.xml. - You configured logging via server.xml and server.env. - You changed the Liberty heap size via jvm.options. - You used the REST API to see the Liberty configuration. - You used Liberty Admin Center to see monitoring data and administer Liberty apps. \u2003</p>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#7-lab-cleanup","title":"7 Lab Cleanup","text":"<ol> <li> <p>Once you are done, make sure that Liberty and Visual Studio Code is not running.</p> </li> <li> <p>Delete the Student folder via command:</p> <p>rm -rf ~/Student</p> </li> <li> <p>Close the browser and all terminal windows</p> </li> </ol>"},{"location":"1024-Liberty-Getting-Started/backup/README_ori/#summary","title":"Summary","text":"<p>In this lab, you learned how to develop a simple application and how to install and configure Liberty. </p> <p>Congratulations!</p> <p>You have successfully completed the lab \"Liberty Getting Started\"</p>"}]}