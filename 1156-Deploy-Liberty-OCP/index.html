
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Guidances for doing TechXchange Runtimes labs">
      
      
        <meta name="author" content="Yi Tang (yitang@us.ibm.com)">
      
      
      
        <link rel="prev" href="../1024-Liberty-Getting-Started/">
      
      
        <link rel="next" href="../1157-Liberty-Enterprise-Deployment-VMs/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>1156 - Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform - 2024 TechXchange Runtimes Lab Guides</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-1156" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="2024 TechXchange Runtimes Lab Guides" class="md-header__button md-logo" aria-label="2024 TechXchange Runtimes Lab Guides" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            2024 TechXchange Runtimes Lab Guides
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              1156 - Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="2024 TechXchange Runtimes Lab Guides" class="md-nav__button md-logo" aria-label="2024 TechXchange Runtimes Lab Guides" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    2024 TechXchange Runtimes Lab Guides
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1024-Liberty-Getting-Started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1024 - Liberty Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    1156 - Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    1156 - Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rapidly-deploy-and-configure-your-java-applications-with-websphere-liberty-and-openshift-container-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    <span class="md-ellipsis">
      Objective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-lab-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the lab environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Tasks
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1157-Liberty-Enterprise-Deployment-VMs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1157 - Recommended practices for WebSphere Liberty deployments and zero-migration upgrades on VMs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1597-WebSphere_Automation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1597 - WebSphere proactive CVE protection and memory leak remediation observed by Instana
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rapidly-deploy-and-configure-your-java-applications-with-websphere-liberty-and-openshift-container-platform" class="md-nav__link">
    <span class="md-ellipsis">
      Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    <span class="md-ellipsis">
      Objective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#accessing-the-lab-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Accessing the lab environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Tasks
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="lab-1156">Lab 1156</h1>
<h2 id="rapidly-deploy-and-configure-your-java-applications-with-websphere-liberty-and-openshift-container-platform">Rapidly deploy and configure your Java applications with WebSphere Liberty and OpenShift Container Platform</h2>
<h2 id="overview">Overview</h2>
<p>This lab provides fundamental hands-on experience with modernizing existing Java applications to WebSphere Liberty, deployed into a container platform, such as Red Hat OpenShift. </p>
<p>The focus of this lab is on the practical aspects of application deployment and configurations and not the analysis of the Transformation Advisor results. <em>Other labs cover Transformation Advisor in detail.</em></p>
<p>Upon completion of this lab, you will have gained skills to download and use the <strong>Transformation Advisor migration bundle</strong> to deploy and configure your application in the following scenarios: </p>
<ol>
<li>
<p><strong>to a locally running WebSphere Liberty</strong> - useful for deploying to Liberty in a VM</p>
</li>
<li>
<p><strong>to a container image</strong> – useful for deploying to Kubernetes</p>
</li>
<li>
<p><strong>using the Liberty Operator</strong> – useful for deploying to OpenShift</p>
</li>
</ol>
<p><strong>IBM Cloud Transformation Advisor</strong> (Transformation Advisor) is an application modernization tool that is entitled through IBM Cloud Pak for Applications and WebSphere Hybrid Edition. Transformation Advisor helps you quickly evaluate on-premises Java EE applications for deployment to the cloud. </p>
<p>The Transformation Advisor tool provides the following value:</p>
<ul>
<li>
<p>Identifies the Java EE programming models in the app</p>
</li>
<li>
<p>Determines the complexity of replatforming these apps by listing a high-level inventory of the content and structure of each app</p>
</li>
<li>
<p>Highlights Java EE programming model and WebSphere API differences between the WebSphere runtime profile types </p>
</li>
<li>
<p>Identifies Java EE specification implementation differences that might affect the app</p>
</li>
<li>
<p>Generates accelerators for deploying the application to Liberty and containers in a target environment</p>
</li>
</ul>
<p>Additionally, the tool provides a recommendation for the right-fit IBM WebSphere Application Server edition and offers advice, best practices, and potential solutions to assess the ease of moving apps to Liberty or newer versions of WebSphere traditional. It accelerates application migrating to cloud process, minimizes errors and risks and reduces time to market.</p>
<h2 id="objective">Objective</h2>
<p>The objectives of this lab are to:</p>
<ul>
<li>
<p>Learn how to download the application migration bundle and use it to deploy an application to WebSphere Liberty running locally</p>
</li>
<li>
<p>Learn how to fully populate the migration bundle placeholders and build the application into a container image</p>
</li>
<li>
<p>Learn the role of Kustomize when deploying the migration bundle</p>
</li>
<li>
<p>Learn how to deploy your application to OpenShift with a single command</p>
</li>
<li>
<p>Learn how to create multiple configurations for the application and deploy them to OpenShift</p>
</li>
</ul>
<h2 id="prerequisites">Prerequisites</h2>
<p>The following prerequisites must be completed prior to beginning this lab:</p>
<ul>
<li>
<p>Familiarity with basic Linux commands</p>
</li>
<li>
<p>Have internet access</p>
</li>
<li>
<p>Access to the TechZone lab environment</p>
</li>
</ul>
<h2 id="accessing-the-lab-environment">Accessing the lab environment</h2>
<ol>
<li>
<p>Access the lab environment from your web browser.</p>
<p>The lab environment page is displayed, the lab environment contains
 six (6) Linux VMs, including <strong>workstation</strong>, and OpenShift Container Platform (OCP) Cluster VMs. The VM <strong>worstation</strong> is the one with the Graphical User Interface (GUI) for you to access and work in this lab. </p>
<p><img alt="Screens screenshot of a computer Description automatically
 generated" src="images/media/image001.png"></p>
<p><strong>Note:</strong> The <strong>workstation</strong> VM is the only VM that you access directly in the lab environment.</p>
</li>
<li>
<p>Click <strong>Red Hat</strong> icon of the <strong>workstation</strong> VM to access it.</p>
<p><img alt="" src="images/media/image002.png"></p>
</li>
<li>
<p>Click <strong>techzone</strong> user to log in.</p>
<p><img alt="" src="images/media/image003.png"></p>
</li>
<li>
<p>Enter the password as: <strong>IBMDm0s!</strong> and press <strong>Enter</strong>.</p>
<p><img alt="" src="images/media/image004.png"></p>
<p><strong>Note:</strong> That is a numeric zero in <strong>IBMDem0s!</strong></p>
<p>The lab VM GUI is displayed.</p>
<p><img alt="" src="images/media/image005.png"></p>
</li>
</ol>
<p><strong>Tips for working in the lab environment:</strong></p>
<ol>
<li>
<p>You can use the VM Desktop tools to fit to window or resize the
    window.</p>
<p><img alt="A screenshot of a computer Description automatically
 generated" src="images/media/image006.png"></p>
</li>
<li>
<p>To copy the text from the lab guide into the lab
    environment, you must use the VM Desktop Send Text tool.</p>
<p><img alt="A computer screen shot of a keyboard Description automatically
 generated" src="images/media/image007.png"></p>
<p>a. Copy the text from the lab guide that you want to paste into the
 lab environment.</p>
<p>b. Open a terminal window, or a text editor or a web browser in the VM
 Desktop where you want to copy the text to.</p>
<p>c. Click the <strong>Send Text</strong> icon in the VM Desktop tool bar, paste the
 text into its window, then again click <strong>Send Text</strong> to send the text
 to an open command shell and close its window.</p>
<p><img alt="A screenshot of a computer Description automatically
 generated" src="images/media/image008.png"></p>
<p>The text is now copied to the terminal window, or the text editor or
 the web browser you opened in the previous step.</p>
<p><img alt="A screenshot of a computer Description automatically
 generated" src="images/media/image009.png"></p>
</li>
</ol>
<h2 id="lab-tasks">Lab Tasks</h2>
<p>In this lab, you will use the Transformation Advisor <strong>migration bundle</strong> to build a container image and deploy an application to a local container for testing.</p>
<p>To simplify the lab and to allow you to focus on the migration bundle, certain software and artifacts have already been put in place for you. These are as follows:</p>
<ul>
<li>
<p><strong>Transformation Advisor</strong> has been installed and collected data has been loaded</p>
</li>
<li>
<p><strong>docker</strong> (for creating and running images) has been installed</p>
</li>
<li>
<p><strong>oc</strong> (OpenShift command Line tool for running OCP commands) has been installed</p>
</li>
<li>
<p>The <strong>PlantsByWebSphere Sample Application</strong>, built as an Enterprise Archive file (EAR) is available from the lab resource provided.</p>
</li>
</ul>
<h1 id="part-1-application-assesment">Part 1: Application Assesment</h1>
<h2 id="11-pull-down-the-lab-artifacts-and-setup-lab-environment">1.1 Pull down the Lab artifacts and setup lab environment</h2>
<ol>
<li>
<p>If you have not yet cloned the GitHub repo with the lab artifacts, in a previous lab, run the following command on your terminal:</p>
<p>a.  Open a new Terminal window and clone the git repository to pull down the lab artifacts</p>
<p><img alt="A screen shot of a computer Description automatically generated" src="images/media/image10.png"></p>
<p>b.  Run the commands to clone the git repository to the local system</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone

git clone https://github.com/IBMTechSales/appmod-pot-labfiles.git
</code></pre></div>
<p>c.  <strong>Add “execute” permissions to the shell scripts</strong></p>
<div class="highlight"><pre><span></span><code>find ./appmod-pot-labfiles -name "*.sh" -exec chmod +x {} \;
</code></pre></div>
</li>
<li>
<p>Start the PlantsByWebSphere application database</p>
<p>The PlantsByWebShere application database runs in a local docker container. Usethe command below to start the database. </p>
<div class="highlight"><pre><span></span><code>docker start db2_demo_data
</code></pre></div>
</li>
</ol>
<h2 id="12-launch-transformation-advisor-local">1.2 Launch Transformation Advisor (local)</h2>
<p>Transformation Advisor provides a <strong>migration plan</strong> for each application being assessed for modernization. The migration plan includes a <strong>migration bundle</strong> of generated artifacts that accelerate the deployment of applications to Liberty in containers and Kubernetes / OpenShift.</p>
<p>The migration bundle includes diverse artifacts, depending on the needs of the application to accelerate the build and deployment of an application Container image into an OpenShift container platform.</p>
<p>The Transformation Advisor is installed locally on the <strong>Workstation</strong> VM. </p>
<ol>
<li>
<p>Launch the Transformation Advisor tool using the steps below.</p>
<p>a.  From <strong>Workstation</strong> VM Desktop Tool Bar, click the <strong>Terminal</strong> icon to open a Terminal window.</p>
<p><img alt="" src="images/media/image11.png"></p>
<p>b.  Launch the <strong>Transformation Advisor</strong> with commands:</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/transformation-advisor-local-3.8.1

./launchTransformationAdvisor.sh
</code></pre></div>
<p>Wait for Transformation Advisor to initialize and display the <strong>action menu</strong> list.</p>
<p>c.  Type <strong>5</strong> and press <strong>Enter</strong> to start the <strong>Transformation Advisor</strong>.</p>
<p><img alt="" src="images/media/image12.png"></p>
<p>d. The <strong>Transformation Advisor</strong> application is started, <strong>right-click</strong> the application URL link and select <strong>Open Link</strong> to launch it in a web browser window.</p>
<p>The URL is displayed in the output from the TA command: <a href="http://server0.gym.lan:3000"><strong>http://server0.gym.lan:3000</strong></a></p>
<p><img alt="" src="images/media/image13.png"></p>
<p>The <strong>Transformation Advisor</strong> Home page is displayed in the Web Browser.</p>
<p><img alt="" src="images/media/image14.png"></p>
<p>In the next section, you will create a new “<strong>Workspace</strong>” in Transformation Advisor and upload the saved results from the scan of a WebSphere Application Server that has a single application deployed, named “PlantsByWebSphere”.</p>
</li>
</ol>
<h2 id="13-create-new-workspace-and-upload-scan-results-from-a-websphere-application-server">1.3 Create new workspace and upload scan results from a WebSphere Application Server</h2>
<p>In this section, create a new workspace named <strong>proof_of_concept</strong>.</p>
<p>A <strong>workspace</strong> is a designated area that will house the migration recommendations provided by Transformation Advisor based on the Data Collector scan results of your application server environment.</p>
<ol>
<li>
<p>Create a new workspace named <strong>proof-of-concept</strong></p>
<p>a.  From the Transformation Advisor Home page, click the <strong>Create New</strong> button</p>
<p>b.  Type <strong>proof_of_concept</strong> as the Workspace name. Then click the <strong>Create</strong> button</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image15.png"></p>
</li>
<li>
<p>Upload an existing <strong>scan results</strong> file provided for the lab.</p>
<p>The scan results file is provided for you.</p>
<p>It was produced by running the Transformation Advisor <strong>Data Collector</strong> on a WebSphere Application Server that had the <strong>PlantsByWebSphere</strong> application deployed.</p>
<p>a. Click the <strong>Upload</strong> button</p>
<p>b. Click the <strong>Drop or add file</strong> link. Then click the <strong>Upload</strong> button</p>
<p><img alt="A screen shot of a computer Description automatically generated" src="images/media/image16.png"></p>
<p>c.  Navigate to <strong>Home &gt; Techzone &gt; appmod-pot-labfiles &gt; labs &gt; RuntimeModernization</strong></p>
<p>d.  Select <strong>pbw-collection.zip</strong> file. Then click the <strong>Open</strong> button</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image17.png"></p>
<p>e. Once the <strong>pbw-collection.zip</strong> has been added, click on the <strong>Upload</strong> button to upload the results into Transformation Advisor.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image18.png"></p>
<p>After a few moments, the application data will be uploaded to the Transformation Advisor UI.</p>
<p>The "<strong>proof_of_concept</strong>" workspace displays the “<strong>All Java Applications</strong>” page which shows the recommendations for the workspace.</p>
<p>There is a single application called <strong>plantsbywebsphereee6.ear</strong>. </p>
<p>By default, "WebSphere Liberty" is selected as a modernization target. All the information provided assumes that this application will be modernized to WebSphere Liberty.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image19.png"></p>
</li>
</ol>
<h2 id="14-analyze-the-plantsbywebsphereee6-application">1.4 Analyze the plantsbywebsphereee6 application</h2>
<p>Transformation Advisor provides detailed information about each application that has been analyzed. This application has a complexity of <strong>Simple</strong>.</p>
<p><strong>Simple</strong> means:</p>
<ul>
<li>The application is ready to be deployed to WebSphere Liberty</li>
<li>No changes to the source code are required</li>
</ul>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image20.png"></p>
<p><strong><em>How is this application ready for deployment when it shows 4 issues?</em></strong></p>
<p>In this case, the application has four <strong>Informational</strong> issues.</p>
<p>Informational issues do not prevent the application from executing on the new runtime (WebSphere Liberty) but there may be small changes in the application’s behavior.</p>
<p>If unexpected behavior is found during testing, then reviewing these <strong>Informational</strong> issues may help explain what is happening.</p>
<ol>
<li>
<p>We are now ready to review the <strong>migration plan</strong> for this application. </p>
<p>a. Click on the <strong>Migration plan</strong> link at the end of the row of the <strong>plantsbywebsphereee6.ear</strong> application.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image21.png"></p>
<p>b.  The <strong>Migration Plan</strong> page opens.</p>
<p>This page contains a summary of the application being migrated:</p>
<ul>
<li>
<p>a preview of the files that will help during deployment (highlighted below)</p>
</li>
<li>
<p>a list of the application’s dependencies.</p>
</li>
</ul>
<p>All the files can be downloaded in a single convenient <strong>migration bundle</strong>.</p>
<p><img alt="" src="images/media/image22.png"></p>
</li>
<li>
<p>At the bottom of the screen, there is a <strong>Application Dependencies</strong> section. </p>
<p>This shows all the files, in addition to the application, that are required for a deployment. <strong>Plantsbywebspheeee6.ear</strong> has two dependencies.</p>
<p>a. Expand the section it to see the details</p>
<p>b. In this case, DB2 drivers called <strong>db2jcc.jar</strong> and <strong>db2cc_licence.jar</strong> are required for deployment</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image23.png"></p>
</li>
<li>
<p>Download the migration bundle by clicking the <strong>Download</strong> button in the bottom right. </p>
<p>A zip file named “<strong>plantsbywebsphereee6.ear_migrationBundle.zip</strong>” will download to your <strong>Download</strong> folder.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image24.png"></p>
</li>
</ol>
<p>We will go through a step-by-step process of using the Transformation Advisor migration bundle to deploy <strong>plantsbywebsphereee6.ear</strong> as follows:</p>
<ol>
<li>
<p>Ensure the application can run locally on WebSphere Liberty</p>
</li>
<li>
<p>Build an immutable container image running on WebSphere Liberty</p>
</li>
<li>
<p>Deploy the image to OpenShift (and configure it) using a single command</p>
</li>
<li>
<p>Redeploy and reconfigure this image for a new environment with a single command</p>
</li>
</ol>
<h1 id="part-2-deploy-plantsbywebsphere-app-to-a-locally-running-websphere-liberty">Part 2: Deploy PlantsByWebSphere app to a locally running WebSphere Liberty</h1>
<p>In this step, you will create a new Liberty server to run the PlantsByWebSphere application.</p>
<p>Then, you will review the migration bundle to see what files you need to add, and use the provided <strong>server.xml</strong> Liberty configuration file. This file is used to configure Liberty by providing values for ports, security, context routes and by providing application-specific configuration. </p>
<h3 id="21-create-a-local-liberty-server">2.1   Create a local Liberty Server</h3>
<ol>
<li>
<p>From a <strong>Terminal</strong> window, create a new local WebSphere Liberty server named <strong>pbwserver</strong>.</p>
<div class="highlight"><pre><span></span><code>/home/techzone/wlp/bin/server create pbwserver
</code></pre></div>
<p><strong>output:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>Server pbwserver created.
</code></pre></div>
</li>
<li>
<p>From the <strong>Terminal</strong> window, start the local WebSphere Liberty server.</p>
<div class="highlight"><pre><span></span><code>/home/techzone/wlp/bin/server start pbwserver
</code></pre></div>
<p><strong>Output:</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Starting server pbwserver.
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>Server pbwserver started with process ID #####
</code></pre></div>
</li>
<li>
<p>Confirm the local WebSphere Liberty server is running. Open the web browser, open a new browser tab. Then go to: <strong>http://localhost:9080</strong></p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image25.png"></p>
</li>
</ol>
<h3 id="213-review-the-placeholder-files-in-the-migration-bundle">2.1.3 Review the placeholder files in the migration bundle</h3>
<p>In this section, you will review the migration bundle to see what files need to be added to the WebSphere Liberty configuration to run the application. </p>
<ol>
<li>
<p>Let’s make note of the 3 <strong>placeholder files</strong> that are placed in the <strong>migration bundle</strong>.</p>
<p>The placeholder files are convenient references to let you know which files you will need to copy to the <strong>Liberty server</strong>.</p>
<p><em>Note: You will fully populate the migration bundle in later steps</em>.</p>
<p>a.  From the <strong>Terminal window</strong>, list the placeholder files in the migration bundle.</p>
<div class="highlight"><pre><span></span><code>unzip -l /home/techzone/Downloads/plantsbywebsphereee6.ear\_migrationBundle.zip | grep placeholder
</code></pre></div>
<p><img alt="" src="images/media/placeholder-files.png"></p>
<ul>
<li>
<p>The <strong>target</strong> directory contains the placeholder file for the PlantsByWebSphere application EAR deployment file. This is a reminder that you need to copy the PlantsByWebSphere EAR file the Liberty server.</p>
</li>
<li>
<p>The <strong>src/main/liberty/lib</strong> directory contains the placeholder files for the DB2 database libraries required by the application. This is a reminder that you need to copy the DB2 libraries to the Liberty server.</p>
</li>
</ul>
<p><br></p>
</li>
</ol>
<h3 id="214-configure-the-liberty-server-for-plantsbywebsphere">2.1.4   Configure the Liberty server for PlantsByWebSphere</h3>
<p>In this section, extract the migration bundle that you downloaded. Then, copy the required dependency files and server configuration to the Liberty server.</p>
<ul>
<li>
<p>Extract the <strong>migration bundle</strong> to a new directory</p>
</li>
<li>
<p>Copy the <strong>DB2 libraries</strong> to the directory defined in the "DB2 driver configuration" in the server.xml file.</p>
</li>
<li>
<p>Copy the <strong>PlantsByWebSphere EAR</strong> file to the “apps” directory of the Liberty server</p>
</li>
<li>
<p>Copy the <strong>server.xml</strong> file from the migration bundle to the Liberty server, replacing the default server.xml file</p>
</li>
</ul>
<ol>
<li>
<p>Extract the migration bundle that you downloaded</p>
<div class="highlight"><pre><span></span><code>mkdir /home/techzone/Student/labs/appmod/migration-bundle

cd /home/techzone/Student/labs/appmod/migration-bundle

cp /home/techzone/Downloads/plantsbywebsphereee6.ear_migrationBundle.zip .

unzip plantsbywebsphereee6.ear_migrationBundle.zip
</code></pre></div>
</li>
<li>
<p>List the directory of the extracted migration bundle</p>
<div class="highlight"><pre><span></span><code>ls -l
</code></pre></div>
<p>The migration bundle contains the files to build and deploy the PlantsByWebSphere application to Liberty, in containers, and on OpenShift.     </p>
<p><img alt="" src="images/media/migbundle-dirs.png"></p>
</li>
<li>
<p>Copy the PlantsByWebSPhere application binary file into the <strong>apps</strong> location in Liberty</p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/plantsbywebsphereee6.ear /home/techzone/wlp/usr/servers/pbwserver/apps
</code></pre></div>
</li>
<li>
<p>Create the <strong>global shared</strong> directory in Liberty. </p>
<p>This is where you will copy the DB2 libraries for Liberty</p>
<div class="highlight"><pre><span></span><code>mkdir /home/techzone/wlp/usr/shared/config/lib/global
</code></pre></div>
</li>
<li>
<p>Copy the DB2 driver files into the <strong>global shared</strong> location in Liberty.</p>
<p>This will make it available to any application running in Liberty.</p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/Student/LabFiles/db2_drivers/* /home/techzone/wlp/usr/shared/config/lib/global
</code></pre></div>
</li>
<li>
<p>Copy the <strong>server.xml</strong> file from the migration bundle into the Liberty server to replace its existing configuration. Choose to overwrite the existing file if prompted.</p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/Student/labs/appmod/migration-bundle/src/main/liberty/config/server.xml /home/techzone/wlp/usr/servers/pbwserver
</code></pre></div>
<hr>
<p>Now that the PlantsByWebSphere binary and its configuration are added to the Liberty server, the application is ready to be run form the web browser.     </p>
<hr>
</li>
<li>
<p>Run the PlantsByWebSphere application from the browser.</p>
<div class="highlight"><pre><span></span><code>http://localhost:9080/PlantsByWebSphere
</code></pre></div>
<p>Now the application is running in Liberty, and the main page is displayed.</p>
<p><img alt="A website page of a garden Description automatically generated" src="images/media/image36.png"></p>
</li>
<li>
<p>Attempt to click on any of the tabs: “<strong>Flowers</strong>”, <strong>Fruits &amp; Vegetables</strong>”, or “<strong>Trees</strong>”.</p>
<hr>
<p><strong>Note the exception.</strong> This is an expected erorr. The issue is in the JPA persistence (Database access). A user is not defined, and therefore authentication to the database failed.</p>
<p><img alt="A screen shot of a computer Description automatically generated" src="images/media/image37.png"></p>
<hr>
<p>These pages should display a catalog of items in their respective category, which are rereived from the application database. </p>
<p><strong>So what happened?</strong> </p>
<p>Transformation Advisor does not collect any <strong>sensitive data</strong> for the application server.  This means the application-specific configuration information in the <strong>server.xml</strong> file has not been set. In this case, the <strong>username</strong> and <strong>password</strong> to access the database are missing.</p>
<p>In the next section, you will review the server.xml file and add the sensitive data required to access the application database.  </p>
<p><br></p>
</li>
</ol>
<h3 id="215-review-the-serverxml-file">2.1.5   Review the server.xml file</h3>
<p>Now you will review the <strong>server.xml</strong> file and set the necessary configuration information. </p>
<p>The <strong>server.xml</strong> file defines a set of <strong>features</strong> that the application requires. By importing only the necessary <strong>features</strong> to support the application’s API needs, the footprint of the deployed application and Liberty server is kept as small as possible.</p>
<ol>
<li>
<p>Review the server.xml file</p>
<p>Using the <strong>gedit</strong> editor in a <strong>Terminal</strong> window, open the <strong>server.xml</strong> file located in the Liberty server</p>
<div class="highlight"><pre><span></span><code>gedit /home/techzone/wlp/usr/servers/pbwserver/server.xml
</code></pre></div>
<ul>
<li><strong>Section 1</strong> contains the <strong>features</strong> that the application requires, and these are discovered automatically during analysis performed the Transformation Advisor <strong>Data Collector</strong>.</li>
</ul>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image38.png"></p>
<ul>
<li>
<p><strong>Section 2:</strong> Defines the <strong>resources</strong> required to access the database</p>
</li>
<li>
<p>The <strong>authdata</strong> defies the BD2 user and password that is used by the datasources. These refer to variables that are defined in the server.xml file.</p>
</li>
<li>
<p>The <strong>jdbc</strong> driver defines the required libraries. These are the libraries you copied into this location via the script</p>
</li>
</ul>
<p><img alt="A computer code with green and white text Description automatically generated" src="images/media/image39.png"></p>
<ul>
<li><strong>Section 3:</strong> The <strong>datasource</strong> contains all the information required to access the database: Database user, password, database name, host, and port number.</li>
</ul>
<p><img alt="A computer screen shot of a program Description automatically generated" src="images/media/image40.png"></p>
<ul>
<li><strong>Section 4</strong> contains the variables for the <strong>non-sensitive configuration data</strong>. For example, the port to run the server on. The values of these variables are collected by Transformation Advisor.</li>
</ul>
<p><img alt="A screen shot of a computer code Description automatically generated" src="images/media/image41.png"></p>
<ul>
<li><strong>Section 5</strong> contains the <strong>sensitive data variables</strong>. </li>
</ul>
<p>You can see that the values for these variables are all <strong>blank</strong>, as this information is <strong>never</strong> collected by Transformation Advisor.</p>
<p><img alt="A screenshot of a computer program Description automatically generated" src="images/media/image42.png"></p>
</li>
<li>
<p>The reason that the <strong>PlantsByWebSphere</strong> application retuned an “Exception” is because the values for the <strong>sensitive variables</strong> has not been set. </p>
<p><img alt="" src="images/media/image43.png"></p>
<p>Next, you will update the server.xml to include the credentials required to access the application database. </p>
</li>
</ol>
<h3 id="216-update-the-serverxml-and-retest-the-plantsbywebsphere-application">2.1.6   Update the server.xml and retest the PlantsByWebSphere application</h3>
<ol>
<li>
<p>From a Terminal window, stop the Liberty server named <strong>pbwserver</strong> with the following command:</p>
<div class="highlight"><pre><span></span><code>/home/techzone/wlp/bin/server stop pbwserver
</code></pre></div>
</li>
<li>
<p>From the <strong>gedit</strong> editor that you have open, update the values in the <strong>server.xml</strong> file for the sensitive data as illustrtated below:</p>
</li>
</ol>
<p>a. Scroll to the bottom of the <strong>server.xml</strong> file to view the sensitive-data variables. </p>
<p>b.  Set the default value for <strong>rhel9_baseNode01_pbwuser_password</strong> to: <strong>db2inst1-pwd</strong></p>
<p>c. Set the default value for <strong>rhel9_baseNode01_pbwuser_user</strong> to: <strong>db2inst1</strong></p>
<div class="highlight"><pre><span></span><code> ![](./images/media/image44.png)
</code></pre></div>
<p>d. <strong>Save</strong> and <strong>close</strong> the <strong>server.xml</strong> in the editor</p>
<ol start="3">
<li>
<p>From a Terminal window, start the Liberty server named <strong>pbwserver</strong> with the following command:</p>
<div class="highlight"><pre><span></span><code>/home/techzone/wlp/bin/server start pbwserver
</code></pre></div>
</li>
<li>
<p>Reload and test PlantsByWebSphere application in the browser</p>
<div class="highlight"><pre><span></span><code>http://localhost:9080/PlantsByWebSphere
</code></pre></div>
<p>a. Click the <strong>Flowers</strong> tab. The catalog of flowers should now be displayed.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image45.png"></p>
</li>
<li>
<p>From a <strong>Terminal</strong> window, stop the Liberty server named <strong>pbwserver</strong> with the following command:</p>
<div class="highlight"><pre><span></span><code>/home/techzone/wlp/bin/server stop pbwserver
</code></pre></div>
</li>
</ol>
<h3 id="checkpoint">Checkpoint</h3>
<p>At this point in the lab, you have successfully demonstrated the PlantsByWebSphere application runs successfully in WebSPhere Lberty on a local VM. </p>
<p>In the next sections, you will deploy the PlantsByWebSphere application to containers and Red Hat OpenShift. </p>
<h1 id="part-3-create-and-run-the-plantsbywebsphere-application-as-a-container-image">Part 3: Create and run the PlantsByWebSphere application as a container image</h1>
<h2 id="31-explore-the-containerfile-used-to-build-plantsbywebsphere-as-a-container-image">3.1  Explore the Containerfile used to build PlantsByWebSphere as a container image</h2>
<p>In the previous section, you used the <strong>server.xml</strong> to get the  application running on a <strong>local Liberty instance</strong>. This was to show you how the Transformation Advisor <strong>server.xml</strong> file is used. If you are moving to Liberty in VMs as your new runtime, then you are done! </p>
<p>However. if containers are to be your final destination, this section explores the Transformation Advisor migration bundle artifacts that accelerate application deployment to Lberty in containers. </p>
<p>In the case of <strong>Simple</strong> applications, it is not necessary to carry out a separate step of deploying to a local Liberty instance at all. Instead, by using the Transformation Advisor migration bundle, you can deploy your application to <strong>Liberty running in a container</strong> all in one go. </p>
<p>This is what we will do now.</p>
<ol>
<li>
<p>Add the PlantsByWebSphere binary file to your migration bundle, and remove the placeholder.</p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/plantsbywebsphereee6.ear /home/techzone/Student/labs/appmod/migration-bundle/target

rm /home/techzone/Student/labs/appmod/migration-bundle/target/plantsbywebsphereee6.ear.placeholder
</code></pre></div>
</li>
<li>
<p>Add the db2 library files to your migration bundle, and remove the placeholder.</p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/Student/LabFiles/db2_drivers/* /home/techzone/Student/labs/appmod/migration-bundle/src/main/liberty/lib

rm /home/techzone/Student/labs/appmod/migration-bundle/src/main/liberty/lib/*.placeholder
</code></pre></div>
</li>
<li>
<p>Update the server.xml file to remove the TLS configuration which is not used. </p>
<div class="highlight"><pre><span></span><code>cp /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/deploy-config-updates/apps-pbw/server.xml /home/techzone/Student/labs/appmod/migration-bundle/src/main/liberty/config
</code></pre></div>
</li>
<li>
<p>The <strong>migration bundle</strong> is ready to be used to generate an image of your application running on WebSphere Liberty. To do this, we will use the <strong>Containerfile</strong> that comes with the migration bundle.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image49a.png"></p>
<p>a. Explore the Containerfile in the migration bundle</p>
<div class="highlight"><pre><span></span><code>gedit /home/techzone/Student/labs/appmod/migration-bundle/Containerfile
</code></pre></div>
<ul>
<li>
<p>The <strong>FROM</strong> statements in the <strong>Containerfile</strong> pull in the following two images. </p>
</li>
<li>
<p><strong>Open JDK 8</strong></p>
</li>
<li><strong>Latest WebSphere Liberty</strong></li>
</ul>
<p><img alt="" src="images/media/image50.png"></p>
<p><img alt="" src="images/media/image51a.png"></p>
<ul>
<li>The <strong>RUN</strong> commands in the Containerfile create the necessary folder structures and copies the <strong>binary files</strong> from the migration bundle into the appropriate locations in the image.</li>
</ul>
<p><img alt="A close-up of a computer code Description automatically generated" src="images/media/image52.png"></p>
<ul>
<li>There are several lines in the file that have been commented out. </li>
</ul>
<p>By default, the <strong>Containerfile</strong> assumes that your application is available as a <strong>binary</strong> file. However, it can also be used to build your application from <strong>source</strong> code. The full details of how to do this can be found in <strong>README.md</strong> in the migration bundle.</p>
<p><img alt="" src="images/media/image53.png"></p>
<p>b. Close the <strong>gedit</strong> editor. <strong>DO NOT SAVE ANY CHNAGES TO THE FILE!</strong> </p>
<p><br></p>
</li>
</ol>
<h3 id="32-setup-build-and-run-plantsbywebsphere-in-a-local-container">3.2 Setup, build and run PlantsByWebSphere in a local container</h3>
<p>In this section, you will build and run the PlantsByWebSphere application in a local container.</p>
<ol>
<li>
<p>Build the container image from the migration bundle using docker</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle

docker build -f /home/techzone/Student/labs/appmod/migration-bundle/Containerfile --tag apps/pbw .
</code></pre></div>
<ul>
<li><strong>-f</strong> is the path to the <strong>Containerfile</strong> used to build the image</li>
<li><strong>--tag</strong> allows you to define the name and version of the image to build</li>
<li><strong>.</strong> is the <strong>current directory</strong> of the migration bunlde that includes the artifacts for building the container image. </li>
</ul>
<p><strong>Note:</strong> Ignore the following warning message. This will be fixed in the next release of Transfromation Advisor </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>1 warning found (use --debug to expand):
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>- Empty continuation line found in: RUN mkdir -p /config/apps &amp;&amp;     mkdir -p /sharedlibs &amp;&amp;     cp ./src/main/liberty/config/* /config &amp;&amp;     cp ./target/*.*ar /config/apps/ &amp;&amp;     if [ ! -z "$(ls ./src/main/liberty/lib 2&gt;/dev/null)" ]; then         cp -r ./src/main/liberty/lib/* /sharedlibs;     fi
</code></pre></div>
</li>
<li>
<p>Confirm the container image has been built</p>
<div class="highlight"><pre><span></span><code>docker images | grep apps/pbw
</code></pre></div>
<p><img alt="" src="images/media/pbw-image-listed.png"></p>
</li>
<li>
<p>The next step is to run the image using the <strong>docker run</strong> command.</p>
<div class="highlight"><pre><span></span><code>docker run -d --rm -p 9080:9080 --name pbw-app  apps/pbw
</code></pre></div>
<ul>
<li><strong>-d</strong> start the container in 'detached' mode so you get your command prompt back</li>
<li><strong>--rm</strong> remove the container when it is stopped</li>
<li><strong>-p</strong> expose the HTTP port</li>
<li><strong>--network</strong> connect the container to the same docker network as the DB2 container</li>
<li><strong>--name</strong> is the name we are giving the container </li>
</ul>
</li>
<li>
<p>Check that the contaier is up and running. </p>
<div class="highlight"><pre><span></span><code>docker ps | grep pbw-app
</code></pre></div>
<p><img alt="" src="images/media/pbw-app-up.png"></p>
</li>
<li>
<p>From the browser, access the PlantsByWebSphere application that is running in the local container</p>
<div class="highlight"><pre><span></span><code>http://server0.gym.lan:9080/PlantsByWebSphere
</code></pre></div>
<p><img alt="A screenshot of a web page Description automatically generated" src="images/media/image61.png"></p>
<p>Attempt to click on any of the tabs: “<strong>Flowers</strong>”, <strong>Fruits &amp; Vegetables</strong>”, or “<strong>Trees</strong>”.</p>
<hr>
<p><strong>Note the exception.</strong> This is an expected erorr. The issue is in the JPA persistence (Database access). A user is not defined, and therefore authentication to the database failed.</p>
<p><img alt="" src="images/media/pbw-container-db-error.png"></p>
<p>The error is because we are using the unchanged server.xml file that came with the migration bundle. </p>
<p>As outlined already, Transformation Advisor does not collect any sensitive data so the application specific configuration information has not been set. </p>
<hr>
</li>
</ol>
<p><strong>Considerations &amp; recommendations:</strong></p>
<p>One option here is to update the <strong>server.xml</strong> file, add in the sensitive data values that Transformation Advisor did not collect and rebuild the image. </p>
<p>However, a big part of container image value is that they are <strong>immutable</strong>. No matter where you take and deploy the image the operating system, runtime, security patch level, etc. will be the same. </p>
<p>This gives you great <strong>reproducibility</strong> and gets away from the classic <strong>but it works for me!</strong> issue. We lose much of this value if we bake in the configuration with the image, as we will have to produce an image for each new configuration. </p>
<p>Instead of using the exact same image in each of your development, staging and production environments, you would be using different images. </p>
<hr>
<p><strong>It is never best practice to hard code configuration into your image.</strong> </p>
<p>In the next section we will look at how the <strong>migration bundle</strong> helps you manage this configuration easily across all your environments and how it will simplify deployment to your OpenShift cluster. The migration bundle uses <strong>Kustomize</strong> to help achieve this.</p>
<hr>
<h2 id="32-understand-how-kustomize-is-used-in-the-migration-bundle">3.2 Understand how Kustomize is used in the migration bundle</h2>
<p><strong>kustomize</strong> is simple way to manage configuration across all your different deployments and environments without the need for templates.</p>
<p>By using <strong>overlays</strong>, it allows you to break out your basic configuration information (ports, names, hosts, etc.) from your sensitive data (usernames, password, etc.) that are likely to change in every deployment.</p>
<p>Every <strong>kustomize</strong> artifact is plain <strong>YAML</strong> and can be validated and processed in a standardized way. Plus, it makes them very human readable! It is natively built into <strong>kubectl</strong> and the <strong>OpenShift client</strong>.</p>
<p>The structure of the kustomize folder is as follows.</p>
<ol>
<li>
<p><strong>base</strong> contains your expected standard deployment in a <strong>config map</strong> (because it is not sensitive data). It also contains the <strong>application.cr-yaml</strong> file that will execute the deployment and mount the necessary secrets that are created from the secret file.</p>
</li>
<li>
<p><strong>overlays</strong> contains all your different deployment configurations. In this case, only a single deployment has been created for your <strong>dev</strong> systems. The <strong>secret</strong> file will contain all your application-specific <strong>sensitive data</strong> that will be created as secrets in OpenShift.</p>
</li>
</ol>
<blockquote>
<p><img alt="" src="images/media/image64a.png"></p>
</blockquote>
<hr>
<p><strong>Note:</strong> In the next section we will use this kustomize structure to deploy your application image.</p>
<p>Further information on <strong>kustomize</strong> can be found at <a href="http://kustomize.io">http://kustomize.io</a></p>
<hr>
<h2 id="4-deploy-to-openshift-with-config">4 Deploy to OpenShift with config</h2>
<p>You have now created a a container image without any application specific configuration. In this section, we will <strong>push</strong> that image to an image repository and then <strong>deploy</strong> it into OpenShift, along with its configuration, with a single command.</p>
<h3 id="41-update-the-kustomize-structure-to-move-the-configmap-configuration-to-the-overlays-folder">4.1 Update the Kustomize structure to move the configmap configuration to the overlays folder</h3>
<p>It is common to have different application configuration between deployments such as <strong>dev</strong> and <strong>staging</strong>. In this lab, we use different DB2 application databases between the two configurations. For this reason , we want the configMap to be located in the Kustomize <strong>overlays</strong> folder, rather than the <strong>base</strong> where it is placed, by default, in the Transformation Advisor migration bundle. </p>
<p>For the lab, we have provided the updated file structure for you. You just need to run the commands below to update the migration bundle. </p>
<ol>
<li>
<p>Run the following commands to update the Kustomize structure as stated above. </p>
<div class="highlight"><pre><span></span><code>rm -rf /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize

cp -r /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/kustomize /home/techzone/Student/labs/appmod/migration-bundle/deploy/
</code></pre></div>
<p>a. List the updated directory structure   </p>
<div class="highlight"><pre><span></span><code>ls -Rl  /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize
</code></pre></div>
<p>Notice the <strong>plantsbywebspheree6-configmap.yaml</strong> file is now in the <strong>overlays/dev</strong> folder. </p>
<p>The <strong>kustomize.yaml</strong> files in the <strong>base</strong> and <strong>overlays/dev</strong> folder have been updated to reflect the new location of the <strong>configmap yaml</strong> file. </p>
<p><img alt="" src="images/media/updated-kustomize-structure.png"></p>
</li>
</ol>
<h3 id="42-update-the-yaml-files-to-add-the-application-configuraton-for-deployment">4.2 Update the YAML files to add the application configuraton for deployment</h3>
<p>Recall, the container image does not have the application configuration baked in. </p>
<p>You will make the following updates to the configuration YAML files in the migration bundle for the PlantsByWebSphere application deployment to OpenShift. </p>
<ul>
<li>
<p>Update the <strong>overays/dev/plantsbywebsphereee6-secret.yaml</strong> file</p>
<ul>
<li>Add the sensitive-data to the <strong>secret</strong> YAML file</li>
</ul>
</li>
<li>
<p>Update the <strong>overlays/dev/plantsbywebsphereee6-configmap.yaml</strong> file</p>
<ul>
<li>Add the database host imformation to access the dev database</li>
</ul>
</li>
<li>
<p>Update the <strong>base/application-cr.yaml</strong> file</p>
<ul>
<li>Add the referece to the container image</li>
<li>Disable TLS, as we do not have this configured in our environment</li>
<li>Accept the Liberty license</li>
</ul>
</li>
</ul>
<hr>
<p><strong>TIP:</strong> To perform the updates, you will copy updated versions of the yaml files from the lab artifacts that we provide for the lab. This way you can focus on the outcomes, rather that the tedious task of editing text files.    </p>
<hr>
<ol>
<li>
<p>Update the <strong>plantsbywebsphereee6-secret.yaml</strong> file, which contains the sensitive-data for the application. You will copy an updated version of the file that we have prepared for the lab</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays/dev/

cp  /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/deploy-config-updates/apps-pbw/plantsbywebsphereee6-secret.yaml  /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays/dev
</code></pre></div>
<p>The update to the <strong>plantsbywebsphereee6-secret.yaml</strong> in the <strong>overlays/dev</strong> directory is now complete. The sensitive data is encoded and added to the yaml file. </p>
<p><img alt="" src="images/media/secret-yaml-update.png"></p>
<p>a. <code>How did we encode the values?</code> </p>
<p>We updated the values in the YAML file with the sensitive data by  <strong>Base64 encoding</strong> the values as illustrated below.</p>
<ul>
<li>We encoded the following values:</li>
</ul>
<hr>
<ul>
<li>
<p>user: <strong>db2inst1</strong></p>
<p>echo db2inst1 | base64</p>
</li>
</ul>
<p>The encoded value is: <strong>ZGIyaW5zdDEK</strong></p>
<hr>
<ul>
<li>
<p>password: <strong>db2inst1-pwd</strong></p>
<p>echo db2inst1-pwd | base64</p>
</li>
</ul>
<p>The encoded value is: <strong>ZGIyaW5zdDEtcHdkCg==</strong></p>
<hr>
</li>
<li>
<p>Update the <strong>plantsbywebsphereee6-configmap.yaml</strong> file, which contains the database name and host for the <strong>dev</strong> database</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays/dev

cp  /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/deploy-config-updates/apps-pbw/plantsbywebsphereee6-configmap.yaml  /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays/dev
</code></pre></div>
<p>The update to the <strong>plantsbywebsphereee6-configmap.yaml</strong> in the <strong>overlays/dev</strong> directory is now complete. The database host for the dev database has been added to the yaml file. </p>
<p><img alt="" src="images/media/pbw-configmap-yaml-update.png"></p>
</li>
<li>
<p>Update the <strong>application-cr.yaml</strong> file</p>
<p>The <strong>application-cr.yaml</strong> is the WebSphere Liberty custom resource used to deploy the PlantsByWebSphere application.</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/base/

cp  /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/deploy-config-updates/apps-pbw/application-cr.yaml  /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/base
</code></pre></div>
<p>The updated <strong>application-cr.yaml</strong> in the <strong>base</strong> directory is now complete. The PlantsByWebSphere application configuration is finalized.  </p>
<p><img alt="" src="images/media/application-cr-yaml-update.png"></p>
</li>
</ol>
<p>### 4.3 Deploy the application and its configuration to OpenShift</p>
<p>To deploy the PlantsByWebSphere application to OpenShift, you must perform the following basic steps.</p>
<ul>
<li>
<p>Tag the container image, appropriately tagging for the OpenShift internal registry</p>
</li>
<li>
<p>Push the tagged container image to the OpenShift internal registry   </p>
</li>
<li>
<p>Use a single command to deploy and configure the application to openShift</p>
</li>
</ul>
<ol>
<li>
<p>Tag the container image </p>
<p>a. Go to a <strong>Terminal</strong>window.   </p>
<p>b. Tag the container image using the following docker command:</p>
<div class="highlight"><pre><span></span><code>docker tag apps/pbw default-route-openshift-image-registry.apps.ocp.ibm.edu/apps-pbw/pbw-app:1.0
</code></pre></div>
</li>
<li>
<p>Verify the image was tagged:</p>
<div class="highlight"><pre><span></span><code>docker images | grep pbw-app
</code></pre></div>
<p><img alt="" src="images/media/pbw-apps-tagged.png"></p>
</li>
<li>
<p>Login to OpenShift to run the commands to push and deploy the image </p>
<div class="highlight"><pre><span></span><code>oc login -u ocadmin -p ibmrhocp
</code></pre></div>
</li>
<li>
<p>Create a new project where you will dpeloy the application </p>
<div class="highlight"><pre><span></span><code>oc new-project apps-pbw
</code></pre></div>
</li>
<li>
<p>Login to the OpnShift internal registry so you can push the image </p>
<div class="highlight"><pre><span></span><code>docker login -u $(oc whoami) -p $(oc whoami -t) default-route-openshift-image-registry.apps.ocp.ibm.edu
</code></pre></div>
</li>
<li>
<p>Push the container image to OpenShift internal registry</p>
<div class="highlight"><pre><span></span><code>docker push default-route-openshift-image-registry.apps.ocp.ibm.edu/apps-pbw/pbw-app:1.0
</code></pre></div>
</li>
</ol>
<p>In previous steps, you configured the sensitive data that is needed, accepted the license, pointed to the image that is needed to pull,  and logged into OpenShift. Now, with a single command, you can deploy to OpenShift and configure the image. </p>
<p>You must specify which overlay will provide the configuration (dev in this case).</p>
<ol start="7">
<li>
<p>Deploy the PlantsByWebSphere application to OpenShift    </p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize

oc apply -n apps-pbw -k overlays/dev
</code></pre></div>
</li>
<li>
<p>Verify the deployment</p>
<div class="highlight"><pre><span></span><code>oc get deployment -n apps-pbw
</code></pre></div>
<p>Wait for the <strong>deployment</strong> to be ready and availabe, as illustrated below:</p>
<div class="highlight"><pre><span></span><code>NAME                   READY   UP-TO-DATE   AVAILABLE  
plantsbywebsphereee6   1/1     1            1
</code></pre></div>
</li>
<li>
<p>Verify the appliation <strong>pod</strong> is ready.</p>
<p>This may take a few moments. Just keep checkig with command below</p>
<div class="highlight"><pre><span></span><code>oc get pods -n apps-pbw
</code></pre></div>
<p>Wait for the <strong>pod</strong> to be ready and availabe, as illustrated below:</p>
<div class="highlight"><pre><span></span><code>NAME                                    READY   STATUS       
plantsbywebsphereee6-7476449666-shnx8   1/1     Running
</code></pre></div>
</li>
<li>
<p>From the browser, navigate to the PlantsByWebSphere route for the <strong>dev</strong> deployment:</p>
<div class="highlight"><pre><span></span><code>http://plantsbywebsphereee6-apps-pbw.apps.ocp.ibm.edu/PlantsByWebSphere
</code></pre></div>
<p>The PlantsByWebSphere main page is displayed.</p>
<p><img alt="A website page of a garden Description automatically generated" src="images/media/image78a.png"></p>
</li>
<li>
<p>Click on the <strong>Trees</strong> category and view the trees that are loaded in the <strong>dev</strong> database.</p>
<p>This catalog of trees was retrieved from the DB2 database in the <strong>dev</strong> configuration.</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image79.png"></p>
</li>
</ol>
<h2 id="44-explore-the-websphere-liberty-operator-in-openshift">4.4 Explore the WebSphere Liberty Operator in OpenShift</h2>
<p>In this section, you will take a look at the <strong>WebSphere Liberty Operator</strong> in the OpenShift console to see what has been deployed.</p>
<ol>
<li>
<p>Login to OpenShift console</p>
<p>a.  Open a new tab in the web browser</p>
<p>b.  Click on the <strong>OpenShift Console</strong> bookmark on the bookmark toolbar</p>
<p>c.  Login credentials:</p>
<ul>
<li>
<p>Username: <strong>ocadmin</strong></p>
</li>
<li>
<p>Password: <strong>ibmrhocp</strong></p>
</li>
</ul>
</li>
<li>
<p>View the <strong>IBM WebSphere Liberty Operator</strong></p>
<p>a.  Click on <strong>Operators &gt; Installed Operators</strong> in the left-hand menu</p>
<p>b. Select <strong>apps-pbw</strong> in the <strong>Project</strong> filter</p>
<p>c. Type <strong>Liberty</strong> in the <strong>Name</strong> filter</p>
<p>d.  Click on <strong>IBM WebSphere Liberty</strong></p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/installed-operators-apps-pbw.png"></p>
</li>
<li>
<p>View the <strong>WebSphereLibertyApplication Deployment</strong></p>
<p>a.  Click on the tab called <strong>WebSphereLibertyApplication</strong></p>
<p><img alt="A green circle with text Description automatically generated" src="images/media/image87a.png"></p>
<p>b. You will see the <strong>plantsbywebsphereee6</strong> application listed in the ‘dev’ namespace</p>
<p>b. Click on the link called <strong>plantsbywebsphereee6</strong> under the <strong>Name</strong> column</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image88a.png"></p>
<p>c.  Select the <strong>Resources</strong> tab</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image89a.png"></p>
<p>d. Select the link for the <strong>Deployment</strong></p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image90a.png"></p>
<p>e. The PlantsByWebSphere deployment has one <strong>pod</strong> running</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image91a.png"></p>
</li>
<li>
<p>View the WebSphereLibertyApplication <strong>Route</strong></p>
<p>a.  Return to the <strong>plantsbywebsphereee6 operator</strong> page</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image92a.png"></p>
<p>b.  Click the <strong>Resources</strong> tab</p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image92b.png"></p>
<p>c.  Select the link of <strong>Kind: route</strong></p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image93a.png"></p>
<p>d.  Click on the <strong>Location</strong> link for the route</p>
<div class="highlight"><pre><span></span><code> http://plantsbywebsphereee6-apps-pbw.apps.ocp.ibm.edu
</code></pre></div>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image94a.png"></p>
<p>e.  The <strong>Welcome to Liberty</strong> page is displayed in a new Browser tab. </p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image95.png"></p>
<p>f.  Append the context root ‘<strong>PlantsByWebSphere’</strong> to access the PlantsByWebSphere application</p>
<div class="highlight"><pre><span></span><code>http://plantsbywebsphereee6-apps-pbw.apps.ocp.ibm.edu/PlantsByWebSphere
</code></pre></div>
</li>
</ol>
<h2 id="45-re-deploy-app-with-different-configuration-to-openshift">4.5 Re-deploy app with different configuration to OpenShift</h2>
<p>We have deployed the PlantsByWebSphere application with its configuration to <strong>dev</strong>, using a single kustomize command. </p>
<p>In this section, we will deploy the same application again with a new configuration for <strong>staging</strong>, again using a single kustomize command.</p>
<ol>
<li>
<p>Create a new <strong>overlay</strong> directory called <strong>staging</strong> that will store the new staging configuration, coping the existing dev directory.</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays

cp -r dev staging
</code></pre></div>
</li>
<li>
<p>Update the <strong>plantsbywebsphereee6-configmap.yaml</strong> file, which contains the database name and host for the <strong>staging</strong> configuration.</p>
<p>To update, use the command below to copy a completed version of the config map yaml file to the new configuration for the <strong>staging</strong> configuration.  </p>
<div class="highlight"><pre><span></span><code>cp  /home/techzone/appmod-pot-labfiles/labs/RuntimeModernization/lab_2161-1/deploy-config-updates/apps-pbw/plantsbywebsphereee6-configmap-staging.yaml  /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize/overlays/staging/plantsbywebsphereee6-configmap.yaml
</code></pre></div>
<p>The update to the <strong>plantsbywebsphereee6-configmap.yaml</strong> in the <strong>overays/staging</strong> directory is now complete. The database <strong>serverName</strong> for the <strong>staging</strong> configuration has been added to the configmap yaml file, as illustrated below. </p>
<p><img alt="" src="images/media/staging-db-servername.png"></p>
</li>
<li>
<p>From the <strong>kustomize</strong> directory, apply the new <strong>staging</strong> overlay</p>
<div class="highlight"><pre><span></span><code>cd /home/techzone/Student/labs/appmod/migration-bundle/deploy/kustomize

oc apply -n apps-pbw -k overlays/staging
</code></pre></div>
<p><strong>Note:</strong> that the configmap and secret were <strong>configured</strong>,  but the application is <strong>unchanged</strong>, as illustrated below.  </p>
<div class="highlight"><pre><span></span><code>configmap/plantsbywebsphereee6-config configured
secret/plantsbywebsphereee6-secret configured
webspherelibertyapplication.liberty.websphere.ibm.com/plantsbywebsphereee6 unchanged
</code></pre></div>
</li>
<li>
<p>Restart the PlantsByWebSphere application, to work around a bug in the PlantsByWebSphere app.</p>
</li>
<li>
<p>Ensure the pod has restarted</p>
<div class="highlight"><pre><span></span><code>oc get pods -n apps-pbw
</code></pre></div>
<p>The <strong>STATUS</strong> State should be <strong>Running</strong></p>
<div class="highlight"><pre><span></span><code>NAME                                    READY   STATUS    
plantsbywebsphereee6-6d8979cc99-hj4fg   1/1     Running
</code></pre></div>
</li>
<li>
<p>From the browser, navigate to the PlantsByWebSphere route for the application:</p>
<div class="highlight"><pre><span></span><code>http://plantsbywebsphereee6-apps-pbw.apps.ocp.ibm.edu/PlantsByWebSphere
</code></pre></div>
<p>The PlantsByWebSphere main page is displayed.</p>
<p><img alt="A website page of a garden Description automatically generated" src="images/media/image78a.png"></p>
<p>a. Click on the <strong>Home</strong> link on the application main page</p>
<p><img alt="" src="images/media/home-link.png"></p>
<p>b. Click on the <strong>Trees</strong> category and view the trees that are loaded in the <strong>staging</strong> database.</p>
<p><img alt="" src="images/media/staging-db-trees.png"></p>
<hr>
<p>For reference, this catalog of trees was retrieved from the <strong>dev</strong> database. Notice the name of the trees are different. </p>
<p><img alt="A screenshot of a computer Description automatically generated" src="images/media/image79.png"></p>
</li>
</ol>
<h1 id="summary">Summary</h1>
<hr>
<p><strong>Congratulations!</strong></p>
<p><strong>You have successfully completed the core learning objectives in the lab</strong></p>
<hr>
<p>In this lab, you learned how to deploy applications to WebSphere Liberty using the WebSphere Liberty Operator and the deployment artifacts produced by Transformation Advisor in its migration bundle.</p>
<p>You explored the options for deployment: </p>
<ul>
<li>locally running Liberty</li>
<li>Liberty as an image running in local container</li>
<li>Liberty as an image running in OpenShift.</li>
</ul>
<p>You learned how to easily configure deployments to OpenShift to allow the same immutable image to be deployed for different configurations such as ‘dev’ and ‘staging’ environment deployments.</p>
<p>You learned about some of the practical ways you can secure your configuration data.</p>
<p>You explored the PlantsByWebSphere assessment details and reports in Transformation Advisor.</p>
<hr>
<p>You may continue your learning journey with the optional sections of the lab. </p>
<hr>
<h1 id="optional-sections">Optional Sections:</h1>
<details>
 <summary><b><font color="dodgerblue">Click to expand:</font></b> Section 5: (Optional) GitOps and configuration management
 </summary>

<br>

## 5 GitOps and configuration management

At this point we have two distinct elements for deployment: the **application image** and the **configuration for that image for each potential environment**. In the GitOps model, these two elements are stored in separate Git repositories. 

You can further distribute the configuration into different repositories for each environment. This approach allows you to treat configuration as if it were code and to apply standard code development techniques such as Pull Requests, code review and maintain a full audit history. This approach delivers excellent controls and oversights for configuration changes for your OpenShift clusters, especially as you promote changes through your environments.

![A black background with white arrows and dots Description automatically generated](./images/media/image105.png)

This illustration above comes from an excellent article on real world GitOps: <https:></https:>

We will not cover all of GitOps it in detail in this lab - however, there are two relevant areas that are worth mentioning briefly.

**Configuration Drift**

With the GitOps approach, there is the risk that the deployed configuration for the OpenShift cluster does not match what is in the Git repository. Someone could have updated the OpenShift cluster directly, for example. There are a number of tools to manage this configuration drift, with ArgoCD being a common tool to address this issue. It can be configured to sync manually or automatically, so that any changes made directly on the cluster are reverted to what is in the Git repository. 

The OpenShift GitOps Operator can be used to install ArgoCD into your OpenShift cluster. Further details on how to this can be found here: <https:></https:>

**Securing Secrets**

Even with controls and restricted access to Git repositories, it is not considered good practice to store the sensitive data in plain text (aka the values entered into the secrets files). There are generally two approaches you can take to tackle this: encrypt the values or use a reference:

  - **Encrypt the values**: In this approach, the value in the secret file is encrypted when it is committed to the Git repo. During deployment to OpenShift there is an extra step where the secret values are decrypted. **SealedSecrets** is one implementation of such an approach.

  - **Use a reference**: In this case, the secrets and their values are stored in a secret manager. During deployment, a reference is provided to the secret manager which will then mount the secret to the deployed container. **HashiCorp Vault** is a common implementation of this approach.

In both cases, there is additional work to be done above what has been covered in this lab. However, the kustomize files provided in the migration bundle gives you a good starting point to identify the secrets and provide a standard output that can be transformed to suit your selected approach.

</details>

<details>
 <summary><b><font color="dodgerblue">Click to expand:</font></b> Section 6: (Optional) Exploring the PlantsByWebSphere application in the proof_of_concept workspace
 </summary>

<br>

## 6 Exploring the PlantsByWebSphere application in the proof_of_concept workspace

IBM Cloud Transformation Advisor (TA) analyzes application and configuration data collected from Java application server environments. TA delivers great insights that help organizations plan and implement a modernization journey to WebSphere Liberty and Kubernetes base container platform for existing Java applications.

TA provides recommendations for modernization which includes and considers application complexity, dependencies, potential issues, and estimated development effort.

![A screenshot of a computer Description automatically generated](./images/media/image106.png)

1. In a browser window, return to Transformation Advisor using the following URL: 

        http://localhost:3000

2. Open the **proof-of-concept** workspace, if it is not already open

    ![](./images/media/ta-proof-of-concept.png)


3.  Scroll down to the **Java applications** section and note the high-level summary for the **plantsbywebsphereee6.ear** application assessment.

  - Complexity

  - Issues

  - Required code changes

  - Application cost (in days for development)

    ![](./images/media/image107.png)

This workspace has only a single application name **plantsbywebsphereee6.ear**. It is summarized as **simple** to  modernize to WebSphere Liberty.  

 ***Complexity values and their meanings:***

**Simple**: The application is ready for deployment, no access to the source code is required. 

  - Simple complexity value typically represents about 20% of applications.

 **Moderate**: Code changes are required before deployment; however, these code changes are well known, and specific help is provided for each issue to assist in resolving it. 

   - Moderate complexity value typically represents about 80% of applications.

 **Complex**: The application uses a technology that does not have a direct equivalent in the new runtime and a new approach will need to be adopted. In our experience, only about 1 in 6 customers have these kinds of applications. 

   - Complex complexity value typically represents less than 1% of applications.

4. Click on **plantsByWebSphereee6.ear** which will expand the analysis

    ![A screenshot of a computer Description automatically generated](./images/media/image108.png)

    a. Scroll down, noting the groups or categories of analysis available

    - **Complexity rules**

    - **Required code changes**

    - **Issue details**

      - Critical

      - Warning

      - Informational

    - **Additional reports**

      - Technology report

      - Inventory report

      - Analysis reports


5.  View the **Analysis Report** for more detailed application information

    **Analysis Report**

    The **Detailed Migration Analysis Report** does a deep dive on the preferred migration target to help you understand any migration issues, like deprecated or removed APIs, Java SE version differences, and Java EE behavioral differences.

    a.  Click on the **Analysis report** link. 

    ![A screenshot of a computer Description automatically generated](./images/media/image109.png)

    b. The **Analysis report** will open in a new browser tab

    ![A screenshot of a computer Description automatically generated](./images/media/image110.png)


    c.  Note the **target**

    - Because the **source** was traditional WebSphere v8.5.5, which is Java EE 6, the target is also EE6.

    - Because the source was running Jave SE 8, the target is also set to Java SE 8.

    By default, Transformation advisor recommends the first step of modernization to Liberty that requires the minimal amount of change and effort.

    You may use the binary scanner with the **--ta** option if you want to assess the modernization effort to newer versions Java, Jave EE, or Jakarta EE. Running the binary scanner with the **-ta** option produces an archive file that can be loaded into Transformation Advisor for analysis.

    d.  Click on the **Information** label, to review the details of this item.

    ![A screenshot of a computer Description automatically generated](./images/media/image112.png)

    The **Information** rules provide migration related considerations. Be aware of these rules during testing. Many of these rules relate to connectivity to other resources that need to be considered during migration.

    e.  You may review the Information rules for PlantsByWebSphere migration.

    ![A screenshot of a computer Description automatically generated](./images/media/image113.png)


6.  Return to the **Cloud Transformation Advisor** browser tab that shows the **plantsbywebsphereee6.ear details** page. Then click on **Inventory Report**, which will open in a new browser tab.

    ![A screenshot of a computer Description automatically generated](./images/media/image114.png)

    a.  Scroll down and review the Inventory Report, which is especially useful in larger applications.

    The **Inventory report** provides a high-level inventory of the content and structure of each application, plus information about potential deployment problems and performance considerations.

    ![](./images/media/image115.png)

    b.  Scroll down to the bottom of the **Inventory report** and locate **the Contained Archives** section.

    The inventory report provides valuable insights into utility jars that are contained in the application. It also provides the ‘package’ name of the utility jar. This is extremely valuable to help determine what 3<sup>rd</sup> party utilities are used by the application.

    c.  Notice the PlantsByWebSphere application contains utility jar named **‘pbw-lib’jar**’. The archive package is “ibm.com.websphere’, indicating it is NOT a 3<sup>rd</sup> party utility jar.

    ![A screenshot of a computer Description automatically generated](./images/media/image116.png)

    d.  Return to the **Cloud Transformation Advisor** browser tab that shows the **plantsbywebsphereee6.ear details** page. Then click on **Technology report**, which will open in a new browser tab.

    The **Technology report** provides details on which editions of Liberty support the technologies used by the applications.

    ![A screenshot of a computer Description automatically generated](./images/media/image117.png)

    a.  Scroll down Technology Report, which can quickly help assess which Java EE API technologies that the PlantsByWebSphere application uses, and which editions of Liberty the APIS are available.

    ![A screenshot of a computer Description automatically generated](./images/media/image118.png)

    b. As you see from the report above, the APIs used in the PlantsByWebSphere application are available in ALL editions of Liberty.

</details></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 IBM
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "content.code.annotate", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>